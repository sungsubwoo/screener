import{r as d,a as Dn,R as K,c as mc,b as Lo,N as Vs,u as pc,d as gc,e as vc,f as yc}from"./vendor-CnSK6Mz1.js";import{C as bc,E as wc,a as xc,L as _c,S as Sc}from"./ui-53u9B3pC.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var jo={exports:{}},mi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cc=d,Ec=Symbol.for("react.element"),kc=Symbol.for("react.fragment"),Tc=Object.prototype.hasOwnProperty,Nc=Cc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Rc={key:!0,ref:!0,__self:!0,__source:!0};function Vo(s,t,e){var i,n={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)Tc.call(t,i)&&!Rc.hasOwnProperty(i)&&(n[i]=t[i]);if(s&&s.defaultProps)for(i in t=s.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:Ec,type:s,key:r,ref:o,props:n,_owner:Nc.current}}mi.Fragment=kc;mi.jsx=Vo;mi.jsxs=Vo;jo.exports=mi;var f=jo.exports,zo,cr=Dn;zo=cr.createRoot,cr.hydrateRoot;var zs=["light","dark"],Ln="(prefers-color-scheme: dark)",Mc=typeof window>"u",Fo=d.createContext(void 0),Ac=s=>d.useContext(Fo)?s.children:d.createElement(Oc,{...s}),Pc=["light","dark"],Oc=({forcedTheme:s,disableTransitionOnChange:t=!1,enableSystem:e=!0,enableColorScheme:i=!0,storageKey:n="theme",themes:r=Pc,defaultTheme:o=e?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:h})=>{let[u,m]=d.useState(()=>hr(n,o)),[g,y]=d.useState(()=>hr(n)),w=l?Object.values(l):r,b=d.useCallback(k=>{let P=k;if(!P)return;k==="system"&&e&&(P=ur());let E=l?l[P]:P,z=t?Dc():null,O=document.documentElement;if(a==="class"?(O.classList.remove(...w),E&&O.classList.add(E)):E?O.setAttribute(a,E):O.removeAttribute(a),i){let j=zs.includes(o)?o:null,F=zs.includes(P)?P:j;O.style.colorScheme=F}z==null||z()},[]),S=d.useCallback(k=>{let P=typeof k=="function"?k(k):k;m(P);try{localStorage.setItem(n,P)}catch{}},[s]),_=d.useCallback(k=>{let P=ur(k);y(P),u==="system"&&e&&!s&&b("system")},[u,s]);d.useEffect(()=>{let k=window.matchMedia(Ln);return k.addListener(_),_(k),()=>k.removeListener(_)},[_]),d.useEffect(()=>{let k=P=>{if(P.key!==n)return;let E=P.newValue||o;S(E)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[S]),d.useEffect(()=>{b(s??u)},[s,u]);let N=d.useMemo(()=>({theme:u,setTheme:S,forcedTheme:s,resolvedTheme:u==="system"?g:u,themes:e?[...r,"system"]:r,systemTheme:e?g:void 0}),[u,S,s,g,e,r]);return d.createElement(Fo.Provider,{value:N},d.createElement(Ic,{forcedTheme:s,disableTransitionOnChange:t,enableSystem:e,enableColorScheme:i,storageKey:n,themes:r,defaultTheme:o,attribute:a,value:l,children:c,attrs:w,nonce:h}),c)},Ic=d.memo(({forcedTheme:s,storageKey:t,attribute:e,enableSystem:i,enableColorScheme:n,defaultTheme:r,value:o,attrs:a,nonce:l})=>{let c=r==="system",h=e==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${e}',s='setAttribute';`,u=n?zs.includes(r)&&r?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${r}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(y,w=!1,b=!0)=>{let S=o?o[y]:y,_=w?y+"|| ''":`'${S}'`,N="";return n&&b&&!w&&zs.includes(y)&&(N+=`d.style.colorScheme = '${y}';`),e==="class"?w||S?N+=`c.add(${_})`:N+="null":S&&(N+=`d[s](n,${_})`),N},g=s?`!function(){${h}${m(s)}}()`:i?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='${Ln}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${c?"":"else{"+m(r,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(r,!1,!1)};}${u}}catch(t){}}();`;return d.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:g}})}),hr=(s,t)=>{if(Mc)return;let e;try{e=localStorage.getItem(s)||void 0}catch{}return e||t},Dc=()=>{let s=document.createElement("style");return s.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(s),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(s)},1)}},ur=s=>(s||(s=window.matchMedia(Ln)),s.matches?"dark":"light"),gs=s=>s.type==="checkbox",Ce=s=>s instanceof Date,Ct=s=>s==null;const $o=s=>typeof s=="object";var pt=s=>!Ct(s)&&!Array.isArray(s)&&$o(s)&&!Ce(s),Bo=s=>pt(s)&&s.target?gs(s.target)?s.target.checked:s.target.value:s,Lc=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,Wo=(s,t)=>s.has(Lc(t)),jc=s=>{const t=s.constructor&&s.constructor.prototype;return pt(t)&&t.hasOwnProperty("isPrototypeOf")},jn=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Tt(s){let t;const e=Array.isArray(s);if(s instanceof Date)t=new Date(s);else if(s instanceof Set)t=new Set(s);else if(!(jn&&(s instanceof Blob||s instanceof FileList))&&(e||pt(s)))if(t=e?[]:{},!e&&!jc(s))t=s;else for(const i in s)s.hasOwnProperty(i)&&(t[i]=Tt(s[i]));else return s;return t}var pi=s=>Array.isArray(s)?s.filter(Boolean):[],dt=s=>s===void 0,I=(s,t,e)=>{if(!t||!pt(s))return e;const i=pi(t.split(/[,[\].]+?/)).reduce((n,r)=>Ct(n)?n:n[r],s);return dt(i)||i===s?dt(s[t])?e:s[t]:i},It=s=>typeof s=="boolean",Vn=s=>/^\w*$/.test(s),Yo=s=>pi(s.replace(/["|']|\]/g,"").split(/\.|\[/)),rt=(s,t,e)=>{let i=-1;const n=Vn(t)?[t]:Yo(t),r=n.length,o=r-1;for(;++i<r;){const a=n[i];let l=e;if(i!==o){const c=s[a];l=pt(c)||Array.isArray(c)?c:isNaN(+n[i+1])?{}:[]}if(a==="__proto__")return;s[a]=l,s=s[a]}return s};const Fs={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},jt={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ut={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Uo=K.createContext(null),gi=()=>K.useContext(Uo),Vc=s=>{const{children:t,...e}=s;return K.createElement(Uo.Provider,{value:e},t)};var Zo=(s,t,e,i=!0)=>{const n={defaultValues:t._defaultValues};for(const r in s)Object.defineProperty(n,r,{get:()=>{const o=r;return t._proxyFormState[o]!==jt.all&&(t._proxyFormState[o]=!i||jt.all),e&&(e[o]=!0),s[o]}});return n},Nt=s=>pt(s)&&!Object.keys(s).length,Xo=(s,t,e,i)=>{e(s);const{name:n,...r}=s;return Nt(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find(o=>t[o]===(!i||jt.all))},ss=s=>Array.isArray(s)?s:[s],Qo=(s,t,e)=>!s||!t||s===t||ss(s).some(i=>i&&(e?i===t:i.startsWith(t)||t.startsWith(i)));function zn(s){const t=K.useRef(s);t.current=s,K.useEffect(()=>{const e=!s.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{e&&e.unsubscribe()}},[s.disabled])}function zc(s){const t=gi(),{control:e=t.control,disabled:i,name:n,exact:r}=s||{},[o,a]=K.useState(e._formState),l=K.useRef(!0),c=K.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),h=K.useRef(n);return h.current=n,zn({disabled:i,next:u=>l.current&&Qo(h.current,u.name,r)&&Xo(u,c.current,e._updateFormState)&&a({...e._formState,...u}),subject:e._subjects.state}),K.useEffect(()=>(l.current=!0,c.current.isValid&&e._updateValid(!0),()=>{l.current=!1}),[e]),Zo(o,e,c.current,!1)}var zt=s=>typeof s=="string",Go=(s,t,e,i,n)=>zt(s)?(i&&t.watch.add(s),I(e,s,n)):Array.isArray(s)?s.map(r=>(i&&t.watch.add(r),I(e,r))):(i&&(t.watchAll=!0),e);function Fc(s){const t=gi(),{control:e=t.control,name:i,defaultValue:n,disabled:r,exact:o}=s||{},a=K.useRef(i);a.current=i,zn({disabled:r,subject:e._subjects.values,next:h=>{Qo(a.current,h.name,o)&&c(Tt(Go(a.current,e._names,h.values||e._formValues,!1,n)))}});const[l,c]=K.useState(e._getWatch(i,n));return K.useEffect(()=>e._removeUnmounted()),l}function $c(s){const t=gi(),{name:e,disabled:i,control:n=t.control,shouldUnregister:r}=s,o=Wo(n._names.array,e),a=Fc({control:n,name:e,defaultValue:I(n._formValues,e,I(n._defaultValues,e,s.defaultValue)),exact:!0}),l=zc({control:n,name:e,exact:!0}),c=K.useRef(n.register(e,{...s.rules,value:a,...It(s.disabled)?{disabled:s.disabled}:{}}));return K.useEffect(()=>{const h=n._options.shouldUnregister||r,u=(m,g)=>{const y=I(n._fields,m);y&&y._f&&(y._f.mount=g)};if(u(e,!0),h){const m=Tt(I(n._options.defaultValues,e));rt(n._defaultValues,e,m),dt(I(n._formValues,e))&&rt(n._formValues,e,m)}return()=>{(o?h&&!n._state.action:h)?n.unregister(e):u(e,!1)}},[e,n,o,r]),K.useEffect(()=>{I(n._fields,e)&&n._updateDisabledField({disabled:i,fields:n._fields,name:e,value:I(n._fields,e)._f.value})},[i,e,n]),{field:{name:e,value:a,...It(i)||l.disabled?{disabled:l.disabled||i}:{},onChange:K.useCallback(h=>c.current.onChange({target:{value:Bo(h),name:e},type:Fs.CHANGE}),[e]),onBlur:K.useCallback(()=>c.current.onBlur({target:{value:I(n._formValues,e),name:e},type:Fs.BLUR}),[e,n]),ref:K.useCallback(h=>{const u=I(n._fields,e);u&&h&&(u._f.ref={focus:()=>h.focus(),select:()=>h.select(),setCustomValidity:m=>h.setCustomValidity(m),reportValidity:()=>h.reportValidity()})},[n._fields,e])},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!I(l.errors,e)},isDirty:{enumerable:!0,get:()=>!!I(l.dirtyFields,e)},isTouched:{enumerable:!0,get:()=>!!I(l.touchedFields,e)},isValidating:{enumerable:!0,get:()=>!!I(l.validatingFields,e)},error:{enumerable:!0,get:()=>I(l.errors,e)}})}}const Bc=s=>s.render($c(s));var Ho=(s,t,e,i,n)=>t?{...e[s],types:{...e[s]&&e[s].types?e[s].types:{},[i]:n||!0}}:{},dr=s=>({isOnSubmit:!s||s===jt.onSubmit,isOnBlur:s===jt.onBlur,isOnChange:s===jt.onChange,isOnAll:s===jt.all,isOnTouch:s===jt.onTouched}),fr=(s,t,e)=>!e&&(t.watchAll||t.watch.has(s)||[...t.watch].some(i=>s.startsWith(i)&&/^\.\w+/.test(s.slice(i.length))));const is=(s,t,e,i)=>{for(const n of e||Object.keys(s)){const r=I(s,n);if(r){const{_f:o,...a}=r;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!i)return!0;if(o.ref&&t(o.ref,o.name)&&!i)return!0;if(is(a,t))break}else if(pt(a)&&is(a,t))break}}};var Wc=(s,t,e)=>{const i=ss(I(s,e));return rt(i,"root",t[e]),rt(s,e,i),s},Fn=s=>s.type==="file",Qt=s=>typeof s=="function",$s=s=>{if(!jn)return!1;const t=s?s.ownerDocument:0;return s instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Is=s=>zt(s),$n=s=>s.type==="radio",Bs=s=>s instanceof RegExp;const mr={value:!1,isValid:!1},pr={value:!0,isValid:!0};var Ko=s=>{if(Array.isArray(s)){if(s.length>1){const t=s.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!dt(s[0].attributes.value)?dt(s[0].value)||s[0].value===""?pr:{value:s[0].value,isValid:!0}:pr:mr}return mr};const gr={isValid:!1,value:null};var Jo=s=>Array.isArray(s)?s.reduce((t,e)=>e&&e.checked&&!e.disabled?{isValid:!0,value:e.value}:t,gr):gr;function vr(s,t,e="validate"){if(Is(s)||Array.isArray(s)&&s.every(Is)||It(s)&&!s)return{type:e,message:Is(s)?s:"",ref:t}}var xe=s=>pt(s)&&!Bs(s)?s:{value:s,message:""},yr=async(s,t,e,i,n)=>{const{ref:r,refs:o,required:a,maxLength:l,minLength:c,min:h,max:u,pattern:m,validate:g,name:y,valueAsNumber:w,mount:b,disabled:S}=s._f,_=I(t,y);if(!b||S)return{};const N=o?o[0]:r,k=T=>{i&&N.reportValidity&&(N.setCustomValidity(It(T)?"":T||""),N.reportValidity())},P={},E=$n(r),z=gs(r),O=E||z,j=(w||Fn(r))&&dt(r.value)&&dt(_)||$s(r)&&r.value===""||_===""||Array.isArray(_)&&!_.length,F=Ho.bind(null,y,e,P),Z=(T,U,B,H=Ut.maxLength,tt=Ut.minLength)=>{const nt=T?U:B;P[y]={type:T?H:tt,message:nt,ref:r,...F(T?H:tt,nt)}};if(n?!Array.isArray(_)||!_.length:a&&(!O&&(j||Ct(_))||It(_)&&!_||z&&!Ko(o).isValid||E&&!Jo(o).isValid)){const{value:T,message:U}=Is(a)?{value:!!a,message:a}:xe(a);if(T&&(P[y]={type:Ut.required,message:U,ref:N,...F(Ut.required,U)},!e))return k(U),P}if(!j&&(!Ct(h)||!Ct(u))){let T,U;const B=xe(u),H=xe(h);if(!Ct(_)&&!isNaN(_)){const tt=r.valueAsNumber||_&&+_;Ct(B.value)||(T=tt>B.value),Ct(H.value)||(U=tt<H.value)}else{const tt=r.valueAsDate||new Date(_),nt=vt=>new Date(new Date().toDateString()+" "+vt),ht=r.type=="time",ct=r.type=="week";zt(B.value)&&_&&(T=ht?nt(_)>nt(B.value):ct?_>B.value:tt>new Date(B.value)),zt(H.value)&&_&&(U=ht?nt(_)<nt(H.value):ct?_<H.value:tt<new Date(H.value))}if((T||U)&&(Z(!!T,B.message,H.message,Ut.max,Ut.min),!e))return k(P[y].message),P}if((l||c)&&!j&&(zt(_)||n&&Array.isArray(_))){const T=xe(l),U=xe(c),B=!Ct(T.value)&&_.length>+T.value,H=!Ct(U.value)&&_.length<+U.value;if((B||H)&&(Z(B,T.message,U.message),!e))return k(P[y].message),P}if(m&&!j&&zt(_)){const{value:T,message:U}=xe(m);if(Bs(T)&&!_.match(T)&&(P[y]={type:Ut.pattern,message:U,ref:r,...F(Ut.pattern,U)},!e))return k(U),P}if(g){if(Qt(g)){const T=await g(_,t),U=vr(T,N);if(U&&(P[y]={...U,...F(Ut.validate,U.message)},!e))return k(U.message),P}else if(pt(g)){let T={};for(const U in g){if(!Nt(T)&&!e)break;const B=vr(await g[U](_,t),N,U);B&&(T={...B,...F(U,B.message)},k(B.message),e&&(P[y]=T))}if(!Nt(T)&&(P[y]={ref:N,...T},!e))return P}}return k(!0),P};function Yc(s,t){const e=t.slice(0,-1).length;let i=0;for(;i<e;)s=dt(s)?i++:s[t[i++]];return s}function Uc(s){for(const t in s)if(s.hasOwnProperty(t)&&!dt(s[t]))return!1;return!0}function gt(s,t){const e=Array.isArray(t)?t:Vn(t)?[t]:Yo(t),i=e.length===1?s:Yc(s,e),n=e.length-1,r=e[n];return i&&delete i[r],n!==0&&(pt(i)&&Nt(i)||Array.isArray(i)&&Uc(i))&&gt(s,e.slice(0,-1)),s}var Ii=()=>{let s=[];return{get observers(){return s},next:n=>{for(const r of s)r.next&&r.next(n)},subscribe:n=>(s.push(n),{unsubscribe:()=>{s=s.filter(r=>r!==n)}}),unsubscribe:()=>{s=[]}}},Ws=s=>Ct(s)||!$o(s);function ae(s,t){if(Ws(s)||Ws(t))return s===t;if(Ce(s)&&Ce(t))return s.getTime()===t.getTime();const e=Object.keys(s),i=Object.keys(t);if(e.length!==i.length)return!1;for(const n of e){const r=s[n];if(!i.includes(n))return!1;if(n!=="ref"){const o=t[n];if(Ce(r)&&Ce(o)||pt(r)&&pt(o)||Array.isArray(r)&&Array.isArray(o)?!ae(r,o):r!==o)return!1}}return!0}var qo=s=>s.type==="select-multiple",Zc=s=>$n(s)||gs(s),Di=s=>$s(s)&&s.isConnected,ta=s=>{for(const t in s)if(Qt(s[t]))return!0;return!1};function Ys(s,t={}){const e=Array.isArray(s);if(pt(s)||e)for(const i in s)Array.isArray(s[i])||pt(s[i])&&!ta(s[i])?(t[i]=Array.isArray(s[i])?[]:{},Ys(s[i],t[i])):Ct(s[i])||(t[i]=!0);return t}function ea(s,t,e){const i=Array.isArray(s);if(pt(s)||i)for(const n in s)Array.isArray(s[n])||pt(s[n])&&!ta(s[n])?dt(t)||Ws(e[n])?e[n]=Array.isArray(s[n])?Ys(s[n],[]):{...Ys(s[n])}:ea(s[n],Ct(t)?{}:t[n],e[n]):e[n]=!ae(s[n],t[n]);return e}var Ss=(s,t)=>ea(s,t,Ys(t)),sa=(s,{valueAsNumber:t,valueAsDate:e,setValueAs:i})=>dt(s)?s:t?s===""?NaN:s&&+s:e&&zt(s)?new Date(s):i?i(s):s;function Li(s){const t=s.ref;if(!(s.refs?s.refs.every(e=>e.disabled):t.disabled))return Fn(t)?t.files:$n(t)?Jo(s.refs).value:qo(t)?[...t.selectedOptions].map(({value:e})=>e):gs(t)?Ko(s.refs).value:sa(dt(t.value)?s.ref.value:t.value,s)}var Xc=(s,t,e,i)=>{const n={};for(const r of s){const o=I(t,r);o&&rt(n,r,o._f)}return{criteriaMode:e,names:[...s],fields:n,shouldUseNativeValidation:i}},Xe=s=>dt(s)?s:Bs(s)?s.source:pt(s)?Bs(s.value)?s.value.source:s.value:s;const br="AsyncFunction";var Qc=s=>(!s||!s.validate)&&!!(Qt(s.validate)&&s.validate.constructor.name===br||pt(s.validate)&&Object.values(s.validate).find(t=>t.constructor.name===br)),Gc=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate);function wr(s,t,e){const i=I(s,e);if(i||Vn(e))return{error:i,name:e};const n=e.split(".");for(;n.length;){const r=n.join("."),o=I(t,r),a=I(s,r);if(o&&!Array.isArray(o)&&e!==r)return{name:e};if(a&&a.type)return{name:r,error:a};n.pop()}return{name:e}}var Hc=(s,t,e,i,n)=>n.isOnAll?!1:!e&&n.isOnTouch?!(t||s):(e?i.isOnBlur:n.isOnBlur)?!s:(e?i.isOnChange:n.isOnChange)?s:!0,Kc=(s,t)=>!pi(I(s,t)).length&&gt(s,t);const Jc={mode:jt.onSubmit,reValidateMode:jt.onChange,shouldFocusError:!0};function qc(s={}){let t={...Jc,...s},e={submitCount:0,isDirty:!1,isLoading:Qt(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},n=pt(t.defaultValues)||pt(t.values)?Tt(t.defaultValues||t.values)||{}:{},r=t.shouldUnregister?{}:Tt(n),o={action:!1,mount:!1,watch:!1},a={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={values:Ii(),array:Ii(),state:Ii()},m=dr(t.mode),g=dr(t.reValidateMode),y=t.criteriaMode===jt.all,w=p=>x=>{clearTimeout(c),c=setTimeout(p,x)},b=async p=>{if(h.isValid||p){const x=t.resolver?Nt((await O()).errors):await F(i,!0);x!==e.isValid&&u.state.next({isValid:x})}},S=(p,x)=>{(h.isValidating||h.validatingFields)&&((p||Array.from(a.mount)).forEach(v=>{v&&(x?rt(e.validatingFields,v,x):gt(e.validatingFields,v))}),u.state.next({validatingFields:e.validatingFields,isValidating:!Nt(e.validatingFields)}))},_=(p,x=[],v,D,L=!0,C=!0)=>{if(D&&v){if(o.action=!0,C&&Array.isArray(I(i,p))){const R=v(I(i,p),D.argA,D.argB);L&&rt(i,p,R)}if(C&&Array.isArray(I(e.errors,p))){const R=v(I(e.errors,p),D.argA,D.argB);L&&rt(e.errors,p,R),Kc(e.errors,p)}if(h.touchedFields&&C&&Array.isArray(I(e.touchedFields,p))){const R=v(I(e.touchedFields,p),D.argA,D.argB);L&&rt(e.touchedFields,p,R)}h.dirtyFields&&(e.dirtyFields=Ss(n,r)),u.state.next({name:p,isDirty:T(p,x),dirtyFields:e.dirtyFields,errors:e.errors,isValid:e.isValid})}else rt(r,p,x)},N=(p,x)=>{rt(e.errors,p,x),u.state.next({errors:e.errors})},k=p=>{e.errors=p,u.state.next({errors:e.errors,isValid:!1})},P=(p,x,v,D)=>{const L=I(i,p);if(L){const C=I(r,p,dt(v)?I(n,p):v);dt(C)||D&&D.defaultChecked||x?rt(r,p,x?C:Li(L._f)):H(p,C),o.mount&&b()}},E=(p,x,v,D,L)=>{let C=!1,R=!1;const V={name:p},st=!!(I(i,p)&&I(i,p)._f&&I(i,p)._f.disabled);if(!v||D){h.isDirty&&(R=e.isDirty,e.isDirty=V.isDirty=T(),C=R!==V.isDirty);const Q=st||ae(I(n,p),x);R=!!(!st&&I(e.dirtyFields,p)),Q||st?gt(e.dirtyFields,p):rt(e.dirtyFields,p,!0),V.dirtyFields=e.dirtyFields,C=C||h.dirtyFields&&R!==!Q}if(v){const Q=I(e.touchedFields,p);Q||(rt(e.touchedFields,p,v),V.touchedFields=e.touchedFields,C=C||h.touchedFields&&Q!==v)}return C&&L&&u.state.next(V),C?V:{}},z=(p,x,v,D)=>{const L=I(e.errors,p),C=h.isValid&&It(x)&&e.isValid!==x;if(s.delayError&&v?(l=w(()=>N(p,v)),l(s.delayError)):(clearTimeout(c),l=null,v?rt(e.errors,p,v):gt(e.errors,p)),(v?!ae(L,v):L)||!Nt(D)||C){const R={...D,...C&&It(x)?{isValid:x}:{},errors:e.errors,name:p};e={...e,...R},u.state.next(R)}},O=async p=>{S(p,!0);const x=await t.resolver(r,t.context,Xc(p||a.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return S(p),x},j=async p=>{const{errors:x}=await O(p);if(p)for(const v of p){const D=I(x,v);D?rt(e.errors,v,D):gt(e.errors,v)}else e.errors=x;return x},F=async(p,x,v={valid:!0})=>{for(const D in p){const L=p[D];if(L){const{_f:C,...R}=L;if(C){const V=a.array.has(C.name),st=L._f&&Qc(L._f);st&&h.validatingFields&&S([D],!0);const Q=await yr(L,r,y,t.shouldUseNativeValidation&&!x,V);if(st&&h.validatingFields&&S([D]),Q[C.name]&&(v.valid=!1,x))break;!x&&(I(Q,C.name)?V?Wc(e.errors,Q,C.name):rt(e.errors,C.name,Q[C.name]):gt(e.errors,C.name))}!Nt(R)&&await F(R,x,v)}}return v.valid},Z=()=>{for(const p of a.unMount){const x=I(i,p);x&&(x._f.refs?x._f.refs.every(v=>!Di(v)):!Di(x._f.ref))&&ye(p)}a.unMount=new Set},T=(p,x)=>(p&&x&&rt(r,p,x),!ae(yt(),n)),U=(p,x,v)=>Go(p,a,{...o.mount?r:dt(x)?n:zt(p)?{[p]:x}:x},v,x),B=p=>pi(I(o.mount?r:n,p,s.shouldUnregister?I(n,p,[]):[])),H=(p,x,v={})=>{const D=I(i,p);let L=x;if(D){const C=D._f;C&&(!C.disabled&&rt(r,p,sa(x,C)),L=$s(C.ref)&&Ct(x)?"":x,qo(C.ref)?[...C.ref.options].forEach(R=>R.selected=L.includes(R.value)):C.refs?gs(C.ref)?C.refs.length>1?C.refs.forEach(R=>(!R.defaultChecked||!R.disabled)&&(R.checked=Array.isArray(L)?!!L.find(V=>V===R.value):L===R.value)):C.refs[0]&&(C.refs[0].checked=!!L):C.refs.forEach(R=>R.checked=R.value===L):Fn(C.ref)?C.ref.value="":(C.ref.value=L,C.ref.type||u.values.next({name:p,values:{...r}})))}(v.shouldDirty||v.shouldTouch)&&E(p,L,v.shouldTouch,v.shouldDirty,!0),v.shouldValidate&&vt(p)},tt=(p,x,v)=>{for(const D in x){const L=x[D],C=`${p}.${D}`,R=I(i,C);(a.array.has(p)||!Ws(L)||R&&!R._f)&&!Ce(L)?tt(C,L,v):H(C,L,v)}},nt=(p,x,v={})=>{const D=I(i,p),L=a.array.has(p),C=Tt(x);rt(r,p,C),L?(u.array.next({name:p,values:{...r}}),(h.isDirty||h.dirtyFields)&&v.shouldDirty&&u.state.next({name:p,dirtyFields:Ss(n,r),isDirty:T(p,C)})):D&&!D._f&&!Ct(C)?tt(p,C,v):H(p,C,v),fr(p,a)&&u.state.next({...e}),u.values.next({name:o.mount?p:void 0,values:{...r}})},ht=async p=>{o.mount=!0;const x=p.target;let v=x.name,D=!0;const L=I(i,v),C=()=>x.type?Li(L._f):Bo(p),R=V=>{D=Number.isNaN(V)||ae(V,I(r,v,V))};if(L){let V,st;const Q=C(),bt=p.type===Fs.BLUR||p.type===Fs.FOCUS_OUT,Pi=!Gc(L._f)&&!t.resolver&&!I(e.errors,v)&&!L._f.deps||Hc(bt,I(e.touchedFields,v),e.isSubmitted,g,m),Ze=fr(v,a,bt);rt(r,v,Q),bt?(L._f.onBlur&&L._f.onBlur(p),l&&l(0)):L._f.onChange&&L._f.onChange(p);const Oi=E(v,Q,bt,!1),dc=!Nt(Oi)||Ze;if(!bt&&u.values.next({name:v,type:p.type,values:{...r}}),Pi)return h.isValid&&(s.mode==="onBlur"?bt&&b():b()),dc&&u.state.next({name:v,...Ze?{}:Oi});if(!bt&&Ze&&u.state.next({...e}),t.resolver){const{errors:ar}=await O([v]);if(R(Q),D){const fc=wr(e.errors,i,v),lr=wr(ar,i,fc.name||v);V=lr.error,v=lr.name,st=Nt(ar)}}else S([v],!0),V=(await yr(L,r,y,t.shouldUseNativeValidation))[v],S([v]),R(Q),D&&(V?st=!1:h.isValid&&(st=await F(i,!0)));D&&(L._f.deps&&vt(L._f.deps),z(v,st,V,Oi))}},ct=(p,x)=>{if(I(e.errors,x)&&p.focus)return p.focus(),1},vt=async(p,x={})=>{let v,D;const L=ss(p);if(t.resolver){const C=await j(dt(p)?p:L);v=Nt(C),D=p?!L.some(R=>I(C,R)):v}else p?(D=(await Promise.all(L.map(async C=>{const R=I(i,C);return await F(R&&R._f?{[C]:R}:R)}))).every(Boolean),!(!D&&!e.isValid)&&b()):D=v=await F(i);return u.state.next({...!zt(p)||h.isValid&&v!==e.isValid?{}:{name:p},...t.resolver||!p?{isValid:v}:{},errors:e.errors}),x.shouldFocus&&!D&&is(i,ct,p?L:a.mount),D},yt=p=>{const x={...o.mount?r:n};return dt(p)?x:zt(p)?I(x,p):p.map(v=>I(x,v))},Wt=(p,x)=>({invalid:!!I((x||e).errors,p),isDirty:!!I((x||e).dirtyFields,p),error:I((x||e).errors,p),isValidating:!!I(e.validatingFields,p),isTouched:!!I((x||e).touchedFields,p)}),Yt=p=>{p&&ss(p).forEach(x=>gt(e.errors,x)),u.state.next({errors:p?e.errors:{}})},se=(p,x,v)=>{const D=(I(i,p,{_f:{}})._f||{}).ref,L=I(e.errors,p)||{},{ref:C,message:R,type:V,...st}=L;rt(e.errors,p,{...st,...x,ref:D}),u.state.next({name:p,errors:e.errors,isValid:!1}),v&&v.shouldFocus&&D&&D.focus&&D.focus()},bs=(p,x)=>Qt(p)?u.values.subscribe({next:v=>p(U(void 0,x),v)}):U(p,x,!0),ye=(p,x={})=>{for(const v of p?ss(p):a.mount)a.mount.delete(v),a.array.delete(v),x.keepValue||(gt(i,v),gt(r,v)),!x.keepError&&gt(e.errors,v),!x.keepDirty&&gt(e.dirtyFields,v),!x.keepTouched&&gt(e.touchedFields,v),!x.keepIsValidating&&gt(e.validatingFields,v),!t.shouldUnregister&&!x.keepDefaultValue&&gt(n,v);u.values.next({values:{...r}}),u.state.next({...e,...x.keepDirty?{isDirty:T()}:{}}),!x.keepIsValid&&b()},We=({disabled:p,name:x,field:v,fields:D,value:L})=>{if(It(p)&&o.mount||p){const C=p?void 0:dt(L)?Li(v?v._f:I(D,x)._f):L;rt(r,x,C),E(x,C,!1,!1,!0)}},be=(p,x={})=>{let v=I(i,p);const D=It(x.disabled)||It(s.disabled);return rt(i,p,{...v||{},_f:{...v&&v._f?v._f:{ref:{name:p}},name:p,mount:!0,...x}}),a.mount.add(p),v?We({field:v,disabled:It(x.disabled)?x.disabled:s.disabled,name:p,value:x.value}):P(p,!0,x.value),{...D?{disabled:x.disabled||s.disabled}:{},...t.progressive?{required:!!x.required,min:Xe(x.min),max:Xe(x.max),minLength:Xe(x.minLength),maxLength:Xe(x.maxLength),pattern:Xe(x.pattern)}:{},name:p,onChange:ht,onBlur:ht,ref:L=>{if(L){be(p,x),v=I(i,p);const C=dt(L.value)&&L.querySelectorAll&&L.querySelectorAll("input,select,textarea")[0]||L,R=Zc(C),V=v._f.refs||[];if(R?V.find(st=>st===C):C===v._f.ref)return;rt(i,p,{_f:{...v._f,...R?{refs:[...V.filter(Di),C,...Array.isArray(I(n,p))?[{}]:[]],ref:{type:C.type,name:p}}:{ref:C}}}),P(p,!1,void 0,C)}else v=I(i,p,{}),v._f&&(v._f.mount=!1),(t.shouldUnregister||x.shouldUnregister)&&!(Wo(a.array,p)&&o.action)&&a.unMount.add(p)}}},Ye=()=>t.shouldFocusError&&is(i,ct,a.mount),ws=p=>{It(p)&&(u.state.next({disabled:p}),is(i,(x,v)=>{const D=I(i,v);D&&(x.disabled=D._f.disabled||p,Array.isArray(D._f.refs)&&D._f.refs.forEach(L=>{L.disabled=D._f.disabled||p}))},0,!1))},Ue=(p,x)=>async v=>{let D;v&&(v.preventDefault&&v.preventDefault(),v.persist&&v.persist());let L=Tt(r);if(u.state.next({isSubmitting:!0}),t.resolver){const{errors:C,values:R}=await O();e.errors=C,L=R}else await F(i);if(gt(e.errors,"root"),Nt(e.errors)){u.state.next({errors:{}});try{await p(L,v)}catch(C){D=C}}else x&&await x({...e.errors},v),Ye(),setTimeout(Ye);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Nt(e.errors)&&!D,submitCount:e.submitCount+1,errors:e.errors}),D)throw D},xs=(p,x={})=>{I(i,p)&&(dt(x.defaultValue)?nt(p,Tt(I(n,p))):(nt(p,x.defaultValue),rt(n,p,Tt(x.defaultValue))),x.keepTouched||gt(e.touchedFields,p),x.keepDirty||(gt(e.dirtyFields,p),e.isDirty=x.defaultValue?T(p,Tt(I(n,p))):T()),x.keepError||(gt(e.errors,p),h.isValid&&b()),u.state.next({...e}))},ie=(p,x={})=>{const v=p?Tt(p):n,D=Tt(v),L=Nt(p),C=L?n:D;if(x.keepDefaultValues||(n=v),!x.keepValues){if(x.keepDirtyValues)for(const R of a.mount)I(e.dirtyFields,R)?rt(C,R,I(r,R)):nt(R,I(C,R));else{if(jn&&dt(p))for(const R of a.mount){const V=I(i,R);if(V&&V._f){const st=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if($s(st)){const Q=st.closest("form");if(Q){Q.reset();break}}}}i={}}r=s.shouldUnregister?x.keepDefaultValues?Tt(n):{}:Tt(C),u.array.next({values:{...C}}),u.values.next({values:{...C}})}a={mount:x.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!x.keepIsValid||!!x.keepDirtyValues,o.watch=!!s.shouldUnregister,u.state.next({submitCount:x.keepSubmitCount?e.submitCount:0,isDirty:L?!1:x.keepDirty?e.isDirty:!!(x.keepDefaultValues&&!ae(p,n)),isSubmitted:x.keepIsSubmitted?e.isSubmitted:!1,dirtyFields:L?{}:x.keepDirtyValues?x.keepDefaultValues&&r?Ss(n,r):e.dirtyFields:x.keepDefaultValues&&p?Ss(n,p):x.keepDirty?e.dirtyFields:{},touchedFields:x.keepTouched?e.touchedFields:{},errors:x.keepErrors?e.errors:{},isSubmitSuccessful:x.keepIsSubmitSuccessful?e.isSubmitSuccessful:!1,isSubmitting:!1})},we=(p,x)=>ie(Qt(p)?p(r):p,x);return{control:{register:be,unregister:ye,getFieldState:Wt,handleSubmit:Ue,setError:se,_executeSchema:O,_getWatch:U,_getDirty:T,_updateValid:b,_removeUnmounted:Z,_updateFieldArray:_,_updateDisabledField:We,_getFieldArray:B,_reset:ie,_resetDefaultValues:()=>Qt(t.defaultValues)&&t.defaultValues().then(p=>{we(p,t.resetOptions),u.state.next({isLoading:!1})}),_updateFormState:p=>{e={...e,...p}},_disableForm:ws,_subjects:u,_proxyFormState:h,_setErrors:k,get _fields(){return i},get _formValues(){return r},get _state(){return o},set _state(p){o=p},get _defaultValues(){return n},get _names(){return a},set _names(p){a=p},get _formState(){return e},set _formState(p){e=p},get _options(){return t},set _options(p){t={...t,...p}}},trigger:vt,register:be,handleSubmit:Ue,watch:bs,setValue:nt,getValues:yt,reset:we,resetField:xs,clearErrors:Yt,unregister:ye,setError:se,setFocus:(p,x={})=>{const v=I(i,p),D=v&&v._f;if(D){const L=D.refs?D.refs[0]:D.ref;L.focus&&(L.focus(),x.shouldSelect&&L.select())}},getFieldState:Wt}}function th(s={}){const t=K.useRef(),e=K.useRef(),[i,n]=K.useState({isDirty:!1,isValidating:!1,isLoading:Qt(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,defaultValues:Qt(s.defaultValues)?void 0:s.defaultValues});t.current||(t.current={...qc(s),formState:i});const r=t.current.control;return r._options=s,zn({subject:r._subjects.state,next:o=>{Xo(o,r._proxyFormState,r._updateFormState,!0)&&n({...r._formState})}}),K.useEffect(()=>r._disableForm(s.disabled),[r,s.disabled]),K.useEffect(()=>{if(r._proxyFormState.isDirty){const o=r._getDirty();o!==i.isDirty&&r._subjects.state.next({isDirty:o})}},[r,i.isDirty]),K.useEffect(()=>{s.values&&!ae(s.values,e.current)?(r._reset(s.values,r._options.resetOptions),e.current=s.values,n(o=>({...o}))):r._resetDefaultValues()},[s.values,r]),K.useEffect(()=>{s.errors&&r._setErrors(s.errors)},[s.errors,r]),K.useEffect(()=>{r._state.mount||(r._updateValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),K.useEffect(()=>{s.shouldUnregister&&r._subjects.values.next({values:r._getWatch()})},[s.shouldUnregister,r]),t.current.formState=Zo(i,r),t.current}const xr=(s,t,e)=>{if(s&&"reportValidity"in s){const i=I(e,t);s.setCustomValidity(i&&i.message||""),s.reportValidity()}},ia=(s,t)=>{for(const e in t.fields){const i=t.fields[e];i&&i.ref&&"reportValidity"in i.ref?xr(i.ref,e,s):i.refs&&i.refs.forEach(n=>xr(n,e,s))}},eh=(s,t)=>{t.shouldUseNativeValidation&&ia(s,t);const e={};for(const i in s){const n=I(t.fields,i),r=Object.assign(s[i]||{},{ref:n&&n.ref});if(sh(t.names||Object.keys(s),i)){const o=Object.assign({},I(e,i));rt(o,"root",r),rt(e,i,o)}else rt(e,i,r)}return e},sh=(s,t)=>s.some(e=>e.startsWith(t+"."));var ih=function(s,t){for(var e={};s.length;){var i=s[0],n=i.code,r=i.message,o=i.path.join(".");if(!e[o])if("unionErrors"in i){var a=i.unionErrors[0].errors[0];e[o]={message:a.message,type:a.code}}else e[o]={message:r,type:n};if("unionErrors"in i&&i.unionErrors.forEach(function(h){return h.errors.forEach(function(u){return s.push(u)})}),t){var l=e[o].types,c=l&&l[i.code];e[o]=Ho(o,t,e,n,c?[].concat(c,i.message):i.message)}s.shift()}return e},nh=function(s,t,e){return e===void 0&&(e={}),function(i,n,r){try{return Promise.resolve(function(o,a){try{var l=Promise.resolve(s[e.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(c){return r.shouldUseNativeValidation&&ia({},r),{errors:{},values:e.raw?i:c}})}catch(c){return a(c)}return l&&l.then?l.then(void 0,a):l}(0,function(o){if(function(a){return Array.isArray(a==null?void 0:a.errors)}(o))return{values:{},errors:eh(ih(o.errors,!r.shouldUseNativeValidation&&r.criteriaMode==="all"),r)};throw o}))}catch(o){return Promise.reject(o)}}},it;(function(s){s.assertEqual=n=>n;function t(n){}s.assertIs=t;function e(n){throw new Error}s.assertNever=e,s.arrayToEnum=n=>{const r={};for(const o of n)r[o]=o;return r},s.getValidEnumValues=n=>{const r=s.objectKeys(n).filter(a=>typeof n[n[a]]!="number"),o={};for(const a of r)o[a]=n[a];return s.objectValues(o)},s.objectValues=n=>s.objectKeys(n).map(function(r){return n[r]}),s.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const r=[];for(const o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.push(o);return r},s.find=(n,r)=>{for(const o of n)if(r(o))return o},s.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function i(n,r=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(r)}s.joinValues=i,s.jsonStringifyReplacer=(n,r)=>typeof r=="bigint"?r.toString():r})(it||(it={}));var _r;(function(s){s.mergeShapes=(t,e)=>({...t,...e})})(_r||(_r={}));const W=it.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ue=s=>{switch(typeof s){case"undefined":return W.undefined;case"string":return W.string;case"number":return isNaN(s)?W.nan:W.number;case"boolean":return W.boolean;case"function":return W.function;case"bigint":return W.bigint;case"symbol":return W.symbol;case"object":return Array.isArray(s)?W.array:s===null?W.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?W.promise:typeof Map<"u"&&s instanceof Map?W.map:typeof Set<"u"&&s instanceof Set?W.set:typeof Date<"u"&&s instanceof Date?W.date:W.object;default:return W.unknown}},M=it.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Dt extends Error{constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const e=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,e):this.__proto__=e,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const e=t||function(r){return r.message},i={_errors:[]},n=r=>{for(const o of r.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)i._errors.push(e(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(e(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return n(this),i}static assert(t){if(!(t instanceof Dt))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,it.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=e=>e.message){const e={},i=[];for(const n of this.issues)n.path.length>0?(e[n.path[0]]=e[n.path[0]]||[],e[n.path[0]].push(t(n))):i.push(t(n));return{formErrors:i,fieldErrors:e}}get formErrors(){return this.flatten()}}Dt.create=s=>new Dt(s);const us=(s,t)=>{let e;switch(s.code){case M.invalid_type:s.received===W.undefined?e="Required":e=`Expected ${s.expected}, received ${s.received}`;break;case M.invalid_literal:e=`Invalid literal value, expected ${JSON.stringify(s.expected,it.jsonStringifyReplacer)}`;break;case M.unrecognized_keys:e=`Unrecognized key(s) in object: ${it.joinValues(s.keys,", ")}`;break;case M.invalid_union:e="Invalid input";break;case M.invalid_union_discriminator:e=`Invalid discriminator value. Expected ${it.joinValues(s.options)}`;break;case M.invalid_enum_value:e=`Invalid enum value. Expected ${it.joinValues(s.options)}, received '${s.received}'`;break;case M.invalid_arguments:e="Invalid function arguments";break;case M.invalid_return_type:e="Invalid function return type";break;case M.invalid_date:e="Invalid date";break;case M.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(e=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(e=`${e} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?e=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?e=`Invalid input: must end with "${s.validation.endsWith}"`:it.assertNever(s.validation):s.validation!=="regex"?e=`Invalid ${s.validation}`:e="Invalid";break;case M.too_small:s.type==="array"?e=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?e=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?e=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?e=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:e="Invalid input";break;case M.too_big:s.type==="array"?e=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?e=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?e=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?e=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?e=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:e="Invalid input";break;case M.custom:e="Invalid input";break;case M.invalid_intersection_types:e="Intersection results could not be merged";break;case M.not_multiple_of:e=`Number must be a multiple of ${s.multipleOf}`;break;case M.not_finite:e="Number must be finite";break;default:e=t.defaultError,it.assertNever(s)}return{message:e}};let rh=us;function an(){return rh}const ln=s=>{const{data:t,path:e,errorMaps:i,issueData:n}=s,r=[...e,...n.path||[]],o={...n,path:r};if(n.message!==void 0)return{...n,path:r,message:n.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:t,defaultError:a}).message;return{...n,path:r,message:a}};function $(s,t){const e=an(),i=ln({issueData:t,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,e,e===us?void 0:us].filter(n=>!!n)});s.common.issues.push(i)}class kt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,e){const i=[];for(const n of e){if(n.status==="aborted")return G;n.status==="dirty"&&t.dirty(),i.push(n.value)}return{status:t.value,value:i}}static async mergeObjectAsync(t,e){const i=[];for(const n of e){const r=await n.key,o=await n.value;i.push({key:r,value:o})}return kt.mergeObjectSync(t,i)}static mergeObjectSync(t,e){const i={};for(const n of e){const{key:r,value:o}=n;if(r.status==="aborted"||o.status==="aborted")return G;r.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),r.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(i[r.value]=o.value)}return{status:t.value,value:i}}}const G=Object.freeze({status:"aborted"}),Je=s=>({status:"dirty",value:s}),Rt=s=>({status:"valid",value:s}),Sr=s=>s.status==="aborted",Cr=s=>s.status==="dirty",Us=s=>s.status==="valid",Zs=s=>typeof Promise<"u"&&s instanceof Promise;function Xs(s,t,e,i){if(typeof t=="function"?s!==t||!i:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(s)}function na(s,t,e,i,n){if(typeof t=="function"?s!==t||!n:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(s,e),e}var Y;(function(s){s.errToObj=t=>typeof t=="string"?{message:t}:t||{},s.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Y||(Y={}));var qe,ts;class $t{constructor(t,e,i,n){this._cachedPath=[],this.parent=t,this.data=e,this._path=i,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Er=(s,t)=>{if(Us(t))return{success:!0,data:t.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const e=new Dt(s.common.issues);return this._error=e,this._error}}};function J(s){if(!s)return{};const{errorMap:t,invalid_type_error:e,required_error:i,description:n}=s;if(t&&(e||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(o,a)=>{var l,c;const{message:h}=s;return o.code==="invalid_enum_value"?{message:h??a.defaultError}:typeof a.data>"u"?{message:(l=h??i)!==null&&l!==void 0?l:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(c=h??e)!==null&&c!==void 0?c:a.defaultError}},description:n}}class et{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return ue(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:ue(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new kt,ctx:{common:t.parent.common,data:t.data,parsedType:ue(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const e=this._parse(t);if(Zs(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){const e=this._parse(t);return Promise.resolve(e)}parse(t,e){const i=this.safeParse(t,e);if(i.success)return i.data;throw i.error}safeParse(t,e){var i;const n={common:{issues:[],async:(i=e==null?void 0:e.async)!==null&&i!==void 0?i:!1,contextualErrorMap:e==null?void 0:e.errorMap},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ue(t)},r=this._parseSync({data:t,path:n.path,parent:n});return Er(n,r)}async parseAsync(t,e){const i=await this.safeParseAsync(t,e);if(i.success)return i.data;throw i.error}async safeParseAsync(t,e){const i={common:{issues:[],contextualErrorMap:e==null?void 0:e.errorMap,async:!0},path:(e==null?void 0:e.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:ue(t)},n=this._parse({data:t,path:i.path,parent:i}),r=await(Zs(n)?n:Promise.resolve(n));return Er(i,r)}refine(t,e){const i=n=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(n):e;return this._refinement((n,r)=>{const o=t(n),a=()=>r.addIssue({code:M.custom,...i(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(t,e){return this._refinement((i,n)=>t(i)?!0:(n.addIssue(typeof e=="function"?e(i,n):e),!1))}_refinement(t){return new ee({schema:this,typeName:X.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Jt.create(this,this._def)}nullable(){return me.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ft.create(this,this._def)}promise(){return fs.create(this,this._def)}or(t){return Hs.create([this,t],this._def)}and(t){return Ks.create(this,t,this._def)}transform(t){return new ee({...J(this._def),schema:this,typeName:X.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const e=typeof t=="function"?t:()=>t;return new si({...J(this._def),innerType:this,defaultValue:e,typeName:X.ZodDefault})}brand(){return new la({typeName:X.ZodBranded,type:this,...J(this._def)})}catch(t){const e=typeof t=="function"?t:()=>t;return new ii({...J(this._def),innerType:this,catchValue:e,typeName:X.ZodCatch})}describe(t){const e=this.constructor;return new e({...this._def,description:t})}pipe(t){return vi.create(this,t)}readonly(){return ni.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oh=/^c[^\s-]{8,}$/i,ah=/^[0-9a-z]+$/,lh=/^[0-9A-HJKMNP-TV-Z]{26}$/,ch=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hh=/^[a-z0-9_-]{21}$/i,uh=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,dh=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,fh="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ji;const mh=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ph=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,gh=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ra="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vh=new RegExp(`^${ra}$`);function oa(s){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?t=`${t}\\.\\d{${s.precision}}`:s.precision==null&&(t=`${t}(\\.\\d+)?`),t}function yh(s){return new RegExp(`^${oa(s)}$`)}function bh(s){let t=`${ra}T${oa(s)}`;const e=[];return e.push(s.local?"Z?":"Z"),s.offset&&e.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${e.join("|")})`,new RegExp(`^${t}$`)}function wh(s,t){return!!((t==="v4"||!t)&&mh.test(s)||(t==="v6"||!t)&&ph.test(s))}class Gt extends et{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==W.string){const r=this._getOrReturnCtx(t);return $(r,{code:M.invalid_type,expected:W.string,received:r.parsedType}),G}const i=new kt;let n;for(const r of this._def.checks)if(r.kind==="min")t.data.length<r.value&&(n=this._getOrReturnCtx(t,n),$(n,{code:M.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="max")t.data.length>r.value&&(n=this._getOrReturnCtx(t,n),$(n,{code:M.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),i.dirty());else if(r.kind==="length"){const o=t.data.length>r.value,a=t.data.length<r.value;(o||a)&&(n=this._getOrReturnCtx(t,n),o?$(n,{code:M.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):a&&$(n,{code:M.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),i.dirty())}else if(r.kind==="email")dh.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"email",code:M.invalid_string,message:r.message}),i.dirty());else if(r.kind==="emoji")ji||(ji=new RegExp(fh,"u")),ji.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"emoji",code:M.invalid_string,message:r.message}),i.dirty());else if(r.kind==="uuid")ch.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"uuid",code:M.invalid_string,message:r.message}),i.dirty());else if(r.kind==="nanoid")hh.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"nanoid",code:M.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid")oh.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"cuid",code:M.invalid_string,message:r.message}),i.dirty());else if(r.kind==="cuid2")ah.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"cuid2",code:M.invalid_string,message:r.message}),i.dirty());else if(r.kind==="ulid")lh.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"ulid",code:M.invalid_string,message:r.message}),i.dirty());else if(r.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),$(n,{validation:"url",code:M.invalid_string,message:r.message}),i.dirty()}else r.kind==="regex"?(r.regex.lastIndex=0,r.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"regex",code:M.invalid_string,message:r.message}),i.dirty())):r.kind==="trim"?t.data=t.data.trim():r.kind==="includes"?t.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(t,n),$(n,{code:M.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),i.dirty()):r.kind==="toLowerCase"?t.data=t.data.toLowerCase():r.kind==="toUpperCase"?t.data=t.data.toUpperCase():r.kind==="startsWith"?t.data.startsWith(r.value)||(n=this._getOrReturnCtx(t,n),$(n,{code:M.invalid_string,validation:{startsWith:r.value},message:r.message}),i.dirty()):r.kind==="endsWith"?t.data.endsWith(r.value)||(n=this._getOrReturnCtx(t,n),$(n,{code:M.invalid_string,validation:{endsWith:r.value},message:r.message}),i.dirty()):r.kind==="datetime"?bh(r).test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{code:M.invalid_string,validation:"datetime",message:r.message}),i.dirty()):r.kind==="date"?vh.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{code:M.invalid_string,validation:"date",message:r.message}),i.dirty()):r.kind==="time"?yh(r).test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{code:M.invalid_string,validation:"time",message:r.message}),i.dirty()):r.kind==="duration"?uh.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"duration",code:M.invalid_string,message:r.message}),i.dirty()):r.kind==="ip"?wh(t.data,r.version)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"ip",code:M.invalid_string,message:r.message}),i.dirty()):r.kind==="base64"?gh.test(t.data)||(n=this._getOrReturnCtx(t,n),$(n,{validation:"base64",code:M.invalid_string,message:r.message}),i.dirty()):it.assertNever(r);return{status:i.value,value:t.data}}_regex(t,e,i){return this.refinement(n=>t.test(n),{validation:e,code:M.invalid_string,...Y.errToObj(i)})}_addCheck(t){return new Gt({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Y.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Y.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Y.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Y.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Y.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Y.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Y.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Y.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Y.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Y.errToObj(t)})}datetime(t){var e,i;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(e=t==null?void 0:t.offset)!==null&&e!==void 0?e:!1,local:(i=t==null?void 0:t.local)!==null&&i!==void 0?i:!1,...Y.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Y.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Y.errToObj(t)})}regex(t,e){return this._addCheck({kind:"regex",regex:t,...Y.errToObj(e)})}includes(t,e){return this._addCheck({kind:"includes",value:t,position:e==null?void 0:e.position,...Y.errToObj(e==null?void 0:e.message)})}startsWith(t,e){return this._addCheck({kind:"startsWith",value:t,...Y.errToObj(e)})}endsWith(t,e){return this._addCheck({kind:"endsWith",value:t,...Y.errToObj(e)})}min(t,e){return this._addCheck({kind:"min",value:t,...Y.errToObj(e)})}max(t,e){return this._addCheck({kind:"max",value:t,...Y.errToObj(e)})}length(t,e){return this._addCheck({kind:"length",value:t,...Y.errToObj(e)})}nonempty(t){return this.min(1,Y.errToObj(t))}trim(){return new Gt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Gt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Gt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxLength(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Gt.create=s=>{var t;return new Gt({checks:[],typeName:X.ZodString,coerce:(t=s==null?void 0:s.coerce)!==null&&t!==void 0?t:!1,...J(s)})};function xh(s,t){const e=(s.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=e>i?e:i,r=parseInt(s.toFixed(n).replace(".","")),o=parseInt(t.toFixed(n).replace(".",""));return r%o/Math.pow(10,n)}class Me extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==W.number){const r=this._getOrReturnCtx(t);return $(r,{code:M.invalid_type,expected:W.number,received:r.parsedType}),G}let i;const n=new kt;for(const r of this._def.checks)r.kind==="int"?it.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),$(i,{code:M.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):r.kind==="min"?(r.inclusive?t.data<r.value:t.data<=r.value)&&(i=this._getOrReturnCtx(t,i),$(i,{code:M.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):r.kind==="max"?(r.inclusive?t.data>r.value:t.data>=r.value)&&(i=this._getOrReturnCtx(t,i),$(i,{code:M.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):r.kind==="multipleOf"?xh(t.data,r.value)!==0&&(i=this._getOrReturnCtx(t,i),$(i,{code:M.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):r.kind==="finite"?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),$(i,{code:M.not_finite,message:r.message}),n.dirty()):it.assertNever(r);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,Y.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Y.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Y.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Y.toString(e))}setLimit(t,e,i,n){return new Me({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:Y.toString(n)}]})}_addCheck(t){return new Me({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Y.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Y.toString(e)})}finite(t){return this._addCheck({kind:"finite",message:Y.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(t)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&it.isInteger(t.value))}get isFinite(){let t=null,e=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(e===null||i.value>e)&&(e=i.value):i.kind==="max"&&(t===null||i.value<t)&&(t=i.value)}return Number.isFinite(e)&&Number.isFinite(t)}}Me.create=s=>new Me({checks:[],typeName:X.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...J(s)});class Ae extends et{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==W.bigint){const r=this._getOrReturnCtx(t);return $(r,{code:M.invalid_type,expected:W.bigint,received:r.parsedType}),G}let i;const n=new kt;for(const r of this._def.checks)r.kind==="min"?(r.inclusive?t.data<r.value:t.data<=r.value)&&(i=this._getOrReturnCtx(t,i),$(i,{code:M.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):r.kind==="max"?(r.inclusive?t.data>r.value:t.data>=r.value)&&(i=this._getOrReturnCtx(t,i),$(i,{code:M.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):r.kind==="multipleOf"?t.data%r.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),$(i,{code:M.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):it.assertNever(r);return{status:n.value,value:t.data}}gte(t,e){return this.setLimit("min",t,!0,Y.toString(e))}gt(t,e){return this.setLimit("min",t,!1,Y.toString(e))}lte(t,e){return this.setLimit("max",t,!0,Y.toString(e))}lt(t,e){return this.setLimit("max",t,!1,Y.toString(e))}setLimit(t,e,i,n){return new Ae({...this._def,checks:[...this._def.checks,{kind:t,value:e,inclusive:i,message:Y.toString(n)}]})}_addCheck(t){return new Ae({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(t)})}multipleOf(t,e){return this._addCheck({kind:"multipleOf",value:t,message:Y.toString(e)})}get minValue(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t}get maxValue(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t}}Ae.create=s=>{var t;return new Ae({checks:[],typeName:X.ZodBigInt,coerce:(t=s==null?void 0:s.coerce)!==null&&t!==void 0?t:!1,...J(s)})};class cn extends et{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==W.boolean){const i=this._getOrReturnCtx(t);return $(i,{code:M.invalid_type,expected:W.boolean,received:i.parsedType}),G}return Rt(t.data)}}cn.create=s=>new cn({typeName:X.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...J(s)});class ds extends et{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==W.date){const r=this._getOrReturnCtx(t);return $(r,{code:M.invalid_type,expected:W.date,received:r.parsedType}),G}if(isNaN(t.data.getTime())){const r=this._getOrReturnCtx(t);return $(r,{code:M.invalid_date}),G}const i=new kt;let n;for(const r of this._def.checks)r.kind==="min"?t.data.getTime()<r.value&&(n=this._getOrReturnCtx(t,n),$(n,{code:M.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),i.dirty()):r.kind==="max"?t.data.getTime()>r.value&&(n=this._getOrReturnCtx(t,n),$(n,{code:M.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),i.dirty()):it.assertNever(r);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ds({...this._def,checks:[...this._def.checks,t]})}min(t,e){return this._addCheck({kind:"min",value:t.getTime(),message:Y.toString(e)})}max(t,e){return this._addCheck({kind:"max",value:t.getTime(),message:Y.toString(e)})}get minDate(){let t=null;for(const e of this._def.checks)e.kind==="min"&&(t===null||e.value>t)&&(t=e.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const e of this._def.checks)e.kind==="max"&&(t===null||e.value<t)&&(t=e.value);return t!=null?new Date(t):null}}ds.create=s=>new ds({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:X.ZodDate,...J(s)});class hn extends et{_parse(t){if(this._getType(t)!==W.symbol){const i=this._getOrReturnCtx(t);return $(i,{code:M.invalid_type,expected:W.symbol,received:i.parsedType}),G}return Rt(t.data)}}hn.create=s=>new hn({typeName:X.ZodSymbol,...J(s)});class Qs extends et{_parse(t){if(this._getType(t)!==W.undefined){const i=this._getOrReturnCtx(t);return $(i,{code:M.invalid_type,expected:W.undefined,received:i.parsedType}),G}return Rt(t.data)}}Qs.create=s=>new Qs({typeName:X.ZodUndefined,...J(s)});class Gs extends et{_parse(t){if(this._getType(t)!==W.null){const i=this._getOrReturnCtx(t);return $(i,{code:M.invalid_type,expected:W.null,received:i.parsedType}),G}return Rt(t.data)}}Gs.create=s=>new Gs({typeName:X.ZodNull,...J(s)});class un extends et{constructor(){super(...arguments),this._any=!0}_parse(t){return Rt(t.data)}}un.create=s=>new un({typeName:X.ZodAny,...J(s)});class Te extends et{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Rt(t.data)}}Te.create=s=>new Te({typeName:X.ZodUnknown,...J(s)});class ce extends et{_parse(t){const e=this._getOrReturnCtx(t);return $(e,{code:M.invalid_type,expected:W.never,received:e.parsedType}),G}}ce.create=s=>new ce({typeName:X.ZodNever,...J(s)});class dn extends et{_parse(t){if(this._getType(t)!==W.undefined){const i=this._getOrReturnCtx(t);return $(i,{code:M.invalid_type,expected:W.void,received:i.parsedType}),G}return Rt(t.data)}}dn.create=s=>new dn({typeName:X.ZodVoid,...J(s)});class Ft extends et{_parse(t){const{ctx:e,status:i}=this._processInputParams(t),n=this._def;if(e.parsedType!==W.array)return $(e,{code:M.invalid_type,expected:W.array,received:e.parsedType}),G;if(n.exactLength!==null){const o=e.data.length>n.exactLength.value,a=e.data.length<n.exactLength.value;(o||a)&&($(e,{code:o?M.too_big:M.too_small,minimum:a?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),i.dirty())}if(n.minLength!==null&&e.data.length<n.minLength.value&&($(e,{code:M.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),i.dirty()),n.maxLength!==null&&e.data.length>n.maxLength.value&&($(e,{code:M.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),i.dirty()),e.common.async)return Promise.all([...e.data].map((o,a)=>n.type._parseAsync(new $t(e,o,e.path,a)))).then(o=>kt.mergeArray(i,o));const r=[...e.data].map((o,a)=>n.type._parseSync(new $t(e,o,e.path,a)));return kt.mergeArray(i,r)}get element(){return this._def.type}min(t,e){return new Ft({...this._def,minLength:{value:t,message:Y.toString(e)}})}max(t,e){return new Ft({...this._def,maxLength:{value:t,message:Y.toString(e)}})}length(t,e){return new Ft({...this._def,exactLength:{value:t,message:Y.toString(e)}})}nonempty(t){return this.min(1,t)}}Ft.create=(s,t)=>new Ft({type:s,minLength:null,maxLength:null,exactLength:null,typeName:X.ZodArray,...J(t)});function Se(s){if(s instanceof ut){const t={};for(const e in s.shape){const i=s.shape[e];t[e]=Jt.create(Se(i))}return new ut({...s._def,shape:()=>t})}else return s instanceof Ft?new Ft({...s._def,type:Se(s.element)}):s instanceof Jt?Jt.create(Se(s.unwrap())):s instanceof me?me.create(Se(s.unwrap())):s instanceof te?te.create(s.items.map(t=>Se(t))):s}class ut extends et{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),e=it.objectKeys(t);return this._cached={shape:t,keys:e}}_parse(t){if(this._getType(t)!==W.object){const c=this._getOrReturnCtx(t);return $(c,{code:M.invalid_type,expected:W.object,received:c.parsedType}),G}const{status:i,ctx:n}=this._processInputParams(t),{shape:r,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ce&&this._def.unknownKeys==="strip"))for(const c in n.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const h=r[c],u=n.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new $t(n,u,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof ce){const c=this._def.unknownKeys;if(c==="passthrough")for(const h of a)l.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(c==="strict")a.length>0&&($(n,{code:M.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const h of a){const u=n.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new $t(n,u,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const c=[];for(const h of l){const u=await h.key,m=await h.value;c.push({key:u,value:m,alwaysSet:h.alwaysSet})}return c}).then(c=>kt.mergeObjectSync(i,c)):kt.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(t){return Y.errToObj,new ut({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(e,i)=>{var n,r,o,a;const l=(o=(r=(n=this._def).errorMap)===null||r===void 0?void 0:r.call(n,e,i).message)!==null&&o!==void 0?o:i.defaultError;return e.code==="unrecognized_keys"?{message:(a=Y.errToObj(t).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new ut({...this._def,unknownKeys:"strip"})}passthrough(){return new ut({...this._def,unknownKeys:"passthrough"})}extend(t){return new ut({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ut({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:X.ZodObject})}setKey(t,e){return this.augment({[t]:e})}catchall(t){return new ut({...this._def,catchall:t})}pick(t){const e={};return it.objectKeys(t).forEach(i=>{t[i]&&this.shape[i]&&(e[i]=this.shape[i])}),new ut({...this._def,shape:()=>e})}omit(t){const e={};return it.objectKeys(this.shape).forEach(i=>{t[i]||(e[i]=this.shape[i])}),new ut({...this._def,shape:()=>e})}deepPartial(){return Se(this)}partial(t){const e={};return it.objectKeys(this.shape).forEach(i=>{const n=this.shape[i];t&&!t[i]?e[i]=n:e[i]=n.optional()}),new ut({...this._def,shape:()=>e})}required(t){const e={};return it.objectKeys(this.shape).forEach(i=>{if(t&&!t[i])e[i]=this.shape[i];else{let r=this.shape[i];for(;r instanceof Jt;)r=r._def.innerType;e[i]=r}}),new ut({...this._def,shape:()=>e})}keyof(){return aa(it.objectKeys(this.shape))}}ut.create=(s,t)=>new ut({shape:()=>s,unknownKeys:"strip",catchall:ce.create(),typeName:X.ZodObject,...J(t)});ut.strictCreate=(s,t)=>new ut({shape:()=>s,unknownKeys:"strict",catchall:ce.create(),typeName:X.ZodObject,...J(t)});ut.lazycreate=(s,t)=>new ut({shape:s,unknownKeys:"strip",catchall:ce.create(),typeName:X.ZodObject,...J(t)});class Hs extends et{_parse(t){const{ctx:e}=this._processInputParams(t),i=this._def.options;function n(r){for(const a of r)if(a.result.status==="valid")return a.result;for(const a of r)if(a.result.status==="dirty")return e.common.issues.push(...a.ctx.common.issues),a.result;const o=r.map(a=>new Dt(a.ctx.common.issues));return $(e,{code:M.invalid_union,unionErrors:o}),G}if(e.common.async)return Promise.all(i.map(async r=>{const o={...e,common:{...e.common,issues:[]},parent:null};return{result:await r._parseAsync({data:e.data,path:e.path,parent:o}),ctx:o}})).then(n);{let r;const o=[];for(const l of i){const c={...e,common:{...e.common,issues:[]},parent:null},h=l._parseSync({data:e.data,path:e.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!r&&(r={result:h,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(r)return e.common.issues.push(...r.ctx.common.issues),r.result;const a=o.map(l=>new Dt(l));return $(e,{code:M.invalid_union,unionErrors:a}),G}}get options(){return this._def.options}}Hs.create=(s,t)=>new Hs({options:s,typeName:X.ZodUnion,...J(t)});const Xt=s=>s instanceof qs?Xt(s.schema):s instanceof ee?Xt(s.innerType()):s instanceof ti?[s.value]:s instanceof fe?s.options:s instanceof ei?it.objectValues(s.enum):s instanceof si?Xt(s._def.innerType):s instanceof Qs?[void 0]:s instanceof Gs?[null]:s instanceof Jt?[void 0,...Xt(s.unwrap())]:s instanceof me?[null,...Xt(s.unwrap())]:s instanceof la||s instanceof ni?Xt(s.unwrap()):s instanceof ii?Xt(s._def.innerType):[];class Bn extends et{_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==W.object)return $(e,{code:M.invalid_type,expected:W.object,received:e.parsedType}),G;const i=this.discriminator,n=e.data[i],r=this.optionsMap.get(n);return r?e.common.async?r._parseAsync({data:e.data,path:e.path,parent:e}):r._parseSync({data:e.data,path:e.path,parent:e}):($(e,{code:M.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),G)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,e,i){const n=new Map;for(const r of e){const o=Xt(r.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const a of o){if(n.has(a))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(a)}`);n.set(a,r)}}return new Bn({typeName:X.ZodDiscriminatedUnion,discriminator:t,options:e,optionsMap:n,...J(i)})}}function fn(s,t){const e=ue(s),i=ue(t);if(s===t)return{valid:!0,data:s};if(e===W.object&&i===W.object){const n=it.objectKeys(t),r=it.objectKeys(s).filter(a=>n.indexOf(a)!==-1),o={...s,...t};for(const a of r){const l=fn(s[a],t[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(e===W.array&&i===W.array){if(s.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<s.length;r++){const o=s[r],a=t[r],l=fn(o,a);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return e===W.date&&i===W.date&&+s==+t?{valid:!0,data:s}:{valid:!1}}class Ks extends et{_parse(t){const{status:e,ctx:i}=this._processInputParams(t),n=(r,o)=>{if(Sr(r)||Sr(o))return G;const a=fn(r.value,o.value);return a.valid?((Cr(r)||Cr(o))&&e.dirty(),{status:e.value,value:a.data}):($(i,{code:M.invalid_intersection_types}),G)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([r,o])=>n(r,o)):n(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Ks.create=(s,t,e)=>new Ks({left:s,right:t,typeName:X.ZodIntersection,...J(e)});class te extends et{_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==W.array)return $(i,{code:M.invalid_type,expected:W.array,received:i.parsedType}),G;if(i.data.length<this._def.items.length)return $(i,{code:M.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),G;!this._def.rest&&i.data.length>this._def.items.length&&($(i,{code:M.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),e.dirty());const r=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new $t(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(r).then(o=>kt.mergeArray(e,o)):kt.mergeArray(e,r)}get items(){return this._def.items}rest(t){return new te({...this._def,rest:t})}}te.create=(s,t)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new te({items:s,typeName:X.ZodTuple,rest:null,...J(t)})};class Js extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==W.object)return $(i,{code:M.invalid_type,expected:W.object,received:i.parsedType}),G;const n=[],r=this._def.keyType,o=this._def.valueType;for(const a in i.data)n.push({key:r._parse(new $t(i,a,i.path,a)),value:o._parse(new $t(i,i.data[a],i.path,a)),alwaysSet:a in i.data});return i.common.async?kt.mergeObjectAsync(e,n):kt.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(t,e,i){return e instanceof et?new Js({keyType:t,valueType:e,typeName:X.ZodRecord,...J(i)}):new Js({keyType:Gt.create(),valueType:t,typeName:X.ZodRecord,...J(e)})}}class mn extends et{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==W.map)return $(i,{code:M.invalid_type,expected:W.map,received:i.parsedType}),G;const n=this._def.keyType,r=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:n._parse(new $t(i,a,i.path,[c,"key"])),value:r._parse(new $t(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,h=await l.value;if(c.status==="aborted"||h.status==="aborted")return G;(c.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(c.value,h.value)}return{status:e.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,h=l.value;if(c.status==="aborted"||h.status==="aborted")return G;(c.status==="dirty"||h.status==="dirty")&&e.dirty(),a.set(c.value,h.value)}return{status:e.value,value:a}}}}mn.create=(s,t,e)=>new mn({valueType:t,keyType:s,typeName:X.ZodMap,...J(e)});class Pe extends et{_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.parsedType!==W.set)return $(i,{code:M.invalid_type,expected:W.set,received:i.parsedType}),G;const n=this._def;n.minSize!==null&&i.data.size<n.minSize.value&&($(i,{code:M.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),e.dirty()),n.maxSize!==null&&i.data.size>n.maxSize.value&&($(i,{code:M.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),e.dirty());const r=this._def.valueType;function o(l){const c=new Set;for(const h of l){if(h.status==="aborted")return G;h.status==="dirty"&&e.dirty(),c.add(h.value)}return{status:e.value,value:c}}const a=[...i.data.values()].map((l,c)=>r._parse(new $t(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(t,e){return new Pe({...this._def,minSize:{value:t,message:Y.toString(e)}})}max(t,e){return new Pe({...this._def,maxSize:{value:t,message:Y.toString(e)}})}size(t,e){return this.min(t,e).max(t,e)}nonempty(t){return this.min(1,t)}}Pe.create=(s,t)=>new Pe({valueType:s,minSize:null,maxSize:null,typeName:X.ZodSet,...J(t)});class ns extends et{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==W.function)return $(e,{code:M.invalid_type,expected:W.function,received:e.parsedType}),G;function i(a,l){return ln({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,an(),us].filter(c=>!!c),issueData:{code:M.invalid_arguments,argumentsError:l}})}function n(a,l){return ln({data:a,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,an(),us].filter(c=>!!c),issueData:{code:M.invalid_return_type,returnTypeError:l}})}const r={errorMap:e.common.contextualErrorMap},o=e.data;if(this._def.returns instanceof fs){const a=this;return Rt(async function(...l){const c=new Dt([]),h=await a._def.args.parseAsync(l,r).catch(g=>{throw c.addIssue(i(l,g)),c}),u=await Reflect.apply(o,this,h);return await a._def.returns._def.type.parseAsync(u,r).catch(g=>{throw c.addIssue(n(u,g)),c})})}else{const a=this;return Rt(function(...l){const c=a._def.args.safeParse(l,r);if(!c.success)throw new Dt([i(l,c.error)]);const h=Reflect.apply(o,this,c.data),u=a._def.returns.safeParse(h,r);if(!u.success)throw new Dt([n(h,u.error)]);return u.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ns({...this._def,args:te.create(t).rest(Te.create())})}returns(t){return new ns({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,e,i){return new ns({args:t||te.create([]).rest(Te.create()),returns:e||Te.create(),typeName:X.ZodFunction,...J(i)})}}class qs extends et{get schema(){return this._def.getter()}_parse(t){const{ctx:e}=this._processInputParams(t);return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}}qs.create=(s,t)=>new qs({getter:s,typeName:X.ZodLazy,...J(t)});class ti extends et{_parse(t){if(t.data!==this._def.value){const e=this._getOrReturnCtx(t);return $(e,{received:e.data,code:M.invalid_literal,expected:this._def.value}),G}return{status:"valid",value:t.data}}get value(){return this._def.value}}ti.create=(s,t)=>new ti({value:s,typeName:X.ZodLiteral,...J(t)});function aa(s,t){return new fe({values:s,typeName:X.ZodEnum,...J(t)})}class fe extends et{constructor(){super(...arguments),qe.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const e=this._getOrReturnCtx(t),i=this._def.values;return $(e,{expected:it.joinValues(i),received:e.parsedType,code:M.invalid_type}),G}if(Xs(this,qe)||na(this,qe,new Set(this._def.values)),!Xs(this,qe).has(t.data)){const e=this._getOrReturnCtx(t),i=this._def.values;return $(e,{received:e.data,code:M.invalid_enum_value,options:i}),G}return Rt(t.data)}get options(){return this._def.values}get enum(){const t={};for(const e of this._def.values)t[e]=e;return t}get Values(){const t={};for(const e of this._def.values)t[e]=e;return t}get Enum(){const t={};for(const e of this._def.values)t[e]=e;return t}extract(t,e=this._def){return fe.create(t,{...this._def,...e})}exclude(t,e=this._def){return fe.create(this.options.filter(i=>!t.includes(i)),{...this._def,...e})}}qe=new WeakMap;fe.create=aa;class ei extends et{constructor(){super(...arguments),ts.set(this,void 0)}_parse(t){const e=it.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==W.string&&i.parsedType!==W.number){const n=it.objectValues(e);return $(i,{expected:it.joinValues(n),received:i.parsedType,code:M.invalid_type}),G}if(Xs(this,ts)||na(this,ts,new Set(it.getValidEnumValues(this._def.values))),!Xs(this,ts).has(t.data)){const n=it.objectValues(e);return $(i,{received:i.data,code:M.invalid_enum_value,options:n}),G}return Rt(t.data)}get enum(){return this._def.values}}ts=new WeakMap;ei.create=(s,t)=>new ei({values:s,typeName:X.ZodNativeEnum,...J(t)});class fs extends et{unwrap(){return this._def.type}_parse(t){const{ctx:e}=this._processInputParams(t);if(e.parsedType!==W.promise&&e.common.async===!1)return $(e,{code:M.invalid_type,expected:W.promise,received:e.parsedType}),G;const i=e.parsedType===W.promise?e.data:Promise.resolve(e.data);return Rt(i.then(n=>this._def.type.parseAsync(n,{path:e.path,errorMap:e.common.contextualErrorMap})))}}fs.create=(s,t)=>new fs({type:s,typeName:X.ZodPromise,...J(t)});class ee extends et{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===X.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:e,ctx:i}=this._processInputParams(t),n=this._def.effect||null,r={addIssue:o=>{$(i,o),o.fatal?e.abort():e.dirty()},get path(){return i.path}};if(r.addIssue=r.addIssue.bind(r),n.type==="preprocess"){const o=n.transform(i.data,r);if(i.common.async)return Promise.resolve(o).then(async a=>{if(e.value==="aborted")return G;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?G:l.status==="dirty"||e.value==="dirty"?Je(l.value):l});{if(e.value==="aborted")return G;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?G:a.status==="dirty"||e.value==="dirty"?Je(a.value):a}}if(n.type==="refinement"){const o=a=>{const l=n.refinement(a,r);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?G:(a.status==="dirty"&&e.dirty(),o(a.value),{status:e.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?G:(a.status==="dirty"&&e.dirty(),o(a.value).then(()=>({status:e.value,value:a.value}))))}if(n.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Us(o))return o;const a=n.transform(o.value,r);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:e.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Us(o)?Promise.resolve(n.transform(o.value,r)).then(a=>({status:e.value,value:a})):o);it.assertNever(n)}}ee.create=(s,t,e)=>new ee({schema:s,typeName:X.ZodEffects,effect:t,...J(e)});ee.createWithPreprocess=(s,t,e)=>new ee({schema:t,effect:{type:"preprocess",transform:s},typeName:X.ZodEffects,...J(e)});class Jt extends et{_parse(t){return this._getType(t)===W.undefined?Rt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Jt.create=(s,t)=>new Jt({innerType:s,typeName:X.ZodOptional,...J(t)});class me extends et{_parse(t){return this._getType(t)===W.null?Rt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}me.create=(s,t)=>new me({innerType:s,typeName:X.ZodNullable,...J(t)});class si extends et{_parse(t){const{ctx:e}=this._processInputParams(t);let i=e.data;return e.parsedType===W.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}si.create=(s,t)=>new si({innerType:s,typeName:X.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...J(t)});class ii extends et{_parse(t){const{ctx:e}=this._processInputParams(t),i={...e,common:{...e.common,issues:[]}},n=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Zs(n)?n.then(r=>({status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Dt(i.common.issues)},input:i.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Dt(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}ii.create=(s,t)=>new ii({innerType:s,typeName:X.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...J(t)});class pn extends et{_parse(t){if(this._getType(t)!==W.nan){const i=this._getOrReturnCtx(t);return $(i,{code:M.invalid_type,expected:W.nan,received:i.parsedType}),G}return{status:"valid",value:t.data}}}pn.create=s=>new pn({typeName:X.ZodNaN,...J(s)});class la extends et{_parse(t){const{ctx:e}=this._processInputParams(t),i=e.data;return this._def.type._parse({data:i,path:e.path,parent:e})}unwrap(){return this._def.type}}class vi extends et{_parse(t){const{status:e,ctx:i}=this._processInputParams(t);if(i.common.async)return(async()=>{const r=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?G:r.status==="dirty"?(e.dirty(),Je(r.value)):this._def.out._parseAsync({data:r.value,path:i.path,parent:i})})();{const n=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return n.status==="aborted"?G:n.status==="dirty"?(e.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:i.path,parent:i})}}static create(t,e){return new vi({in:t,out:e,typeName:X.ZodPipeline})}}class ni extends et{_parse(t){const e=this._def.innerType._parse(t),i=n=>(Us(n)&&(n.value=Object.freeze(n.value)),n);return Zs(e)?e.then(n=>i(n)):i(e)}unwrap(){return this._def.innerType}}ni.create=(s,t)=>new ni({innerType:s,typeName:X.ZodReadonly,...J(t)});ut.lazycreate;var X;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(X||(X={}));const kr=Gt.create;Me.create;pn.create;Ae.create;cn.create;ds.create;hn.create;Qs.create;Gs.create;un.create;Te.create;ce.create;dn.create;Ft.create;const _h=ut.create;ut.strictCreate;Hs.create;Bn.create;Ks.create;te.create;Js.create;mn.create;Pe.create;ns.create;qs.create;ti.create;fe.create;ei.create;fs.create;ee.create;Jt.create;me.create;ee.createWithPreprocess;vi.create;function Sh(s,t){typeof s=="function"?s(t):s!=null&&(s.current=t)}function ca(...s){return t=>s.forEach(e=>Sh(e,t))}function Ot(...s){return d.useCallback(ca(...s),s)}var Oe=d.forwardRef((s,t)=>{const{children:e,...i}=s,n=d.Children.toArray(e),r=n.find(Eh);if(r){const o=r.props.children,a=n.map(l=>l===r?d.Children.count(o)>1?d.Children.only(null):d.isValidElement(o)?o.props.children:null:l);return f.jsx(gn,{...i,ref:t,children:d.isValidElement(o)?d.cloneElement(o,void 0,a):null})}return f.jsx(gn,{...i,ref:t,children:e})});Oe.displayName="Slot";var gn=d.forwardRef((s,t)=>{const{children:e,...i}=s;if(d.isValidElement(e)){const n=Th(e);return d.cloneElement(e,{...kh(i,e.props),ref:t?ca(t,n):n})}return d.Children.count(e)>1?d.Children.only(null):null});gn.displayName="SlotClone";var Ch=({children:s})=>f.jsx(f.Fragment,{children:s});function Eh(s){return d.isValidElement(s)&&s.type===Ch}function kh(s,t){const e={...t};for(const i in t){const n=s[i],r=t[i];/^on[A-Z]/.test(i)?n&&r?e[i]=(...a)=>{r(...a),n(...a)}:n&&(e[i]=n):i==="style"?e[i]={...n,...r}:i==="className"&&(e[i]=[n,r].filter(Boolean).join(" "))}return{...s,...e}}function Th(s){var i,n;let t=(i=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:i.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}function ha(s){var t,e,i="";if(typeof s=="string"||typeof s=="number")i+=s;else if(typeof s=="object")if(Array.isArray(s))for(t=0;t<s.length;t++)s[t]&&(e=ha(s[t]))&&(i&&(i+=" "),i+=e);else for(t in s)s[t]&&(i&&(i+=" "),i+=t);return i}function Nh(){for(var s,t,e=0,i="";e<arguments.length;)(s=arguments[e++])&&(t=ha(s))&&(i&&(i+=" "),i+=t);return i}const Tr=s=>typeof s=="boolean"?"".concat(s):s===0?"0":s,Nr=Nh,Wn=(s,t)=>e=>{var i;if((t==null?void 0:t.variants)==null)return Nr(s,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:n,defaultVariants:r}=t,o=Object.keys(n).map(c=>{const h=e==null?void 0:e[c],u=r==null?void 0:r[c];if(h===null)return null;const m=Tr(h)||Tr(u);return n[c][m]}),a=e&&Object.entries(e).reduce((c,h)=>{let[u,m]=h;return m===void 0||(c[u]=m),c},{}),l=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((c,h)=>{let{class:u,className:m,...g}=h;return Object.entries(g).every(y=>{let[w,b]=y;return Array.isArray(b)?b.includes({...r,...a}[w]):{...r,...a}[w]===b})?[...c,u,m]:c},[]);return Nr(s,o,l,e==null?void 0:e.class,e==null?void 0:e.className)};function ua(s){var t,e,i="";if(typeof s=="string"||typeof s=="number")i+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(e=ua(s[t]))&&(i&&(i+=" "),i+=e)}else for(e in s)s[e]&&(i&&(i+=" "),i+=e);return i}function Rh(){for(var s,t,e=0,i="",n=arguments.length;e<n;e++)(s=arguments[e])&&(t=ua(s))&&(i&&(i+=" "),i+=t);return i}const Yn="-",Mh=s=>{const t=Ph(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:i}=s;return{getClassGroupId:o=>{const a=o.split(Yn);return a[0]===""&&a.length!==1&&a.shift(),da(a,t)||Ah(o)},getConflictingClassGroupIds:(o,a)=>{const l=e[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},da=(s,t)=>{var o;if(s.length===0)return t.classGroupId;const e=s[0],i=t.nextPart.get(e),n=i?da(s.slice(1),i):void 0;if(n)return n;if(t.validators.length===0)return;const r=s.join(Yn);return(o=t.validators.find(({validator:a})=>a(r)))==null?void 0:o.classGroupId},Rr=/^\[(.+)\]$/,Ah=s=>{if(Rr.test(s)){const t=Rr.exec(s)[1],e=t==null?void 0:t.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},Ph=s=>{const{theme:t,prefix:e}=s,i={nextPart:new Map,validators:[]};return Ih(Object.entries(s.classGroups),e).forEach(([r,o])=>{vn(o,i,r,t)}),i},vn=(s,t,e,i)=>{s.forEach(n=>{if(typeof n=="string"){const r=n===""?t:Mr(t,n);r.classGroupId=e;return}if(typeof n=="function"){if(Oh(n)){vn(n(i),t,e,i);return}t.validators.push({validator:n,classGroupId:e});return}Object.entries(n).forEach(([r,o])=>{vn(o,Mr(t,r),e,i)})})},Mr=(s,t)=>{let e=s;return t.split(Yn).forEach(i=>{e.nextPart.has(i)||e.nextPart.set(i,{nextPart:new Map,validators:[]}),e=e.nextPart.get(i)}),e},Oh=s=>s.isThemeGetter,Ih=(s,t)=>t?s.map(([e,i])=>{const n=i.map(r=>typeof r=="string"?t+r:typeof r=="object"?Object.fromEntries(Object.entries(r).map(([o,a])=>[t+o,a])):r);return[e,n]}):s,Dh=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,i=new Map;const n=(r,o)=>{e.set(r,o),t++,t>s&&(t=0,i=e,e=new Map)};return{get(r){let o=e.get(r);if(o!==void 0)return o;if((o=i.get(r))!==void 0)return n(r,o),o},set(r,o){e.has(r)?e.set(r,o):n(r,o)}}},fa="!",Lh=s=>{const{separator:t,experimentalParseClassName:e}=s,i=t.length===1,n=t[0],r=t.length,o=a=>{const l=[];let c=0,h=0,u;for(let b=0;b<a.length;b++){let S=a[b];if(c===0){if(S===n&&(i||a.slice(b,b+r)===t)){l.push(a.slice(h,b)),h=b+r;continue}if(S==="/"){u=b;continue}}S==="["?c++:S==="]"&&c--}const m=l.length===0?a:a.substring(h),g=m.startsWith(fa),y=g?m.substring(1):m,w=u&&u>h?u-h:void 0;return{modifiers:l,hasImportantModifier:g,baseClassName:y,maybePostfixModifierPosition:w}};return e?a=>e({className:a,parseClassName:o}):o},jh=s=>{if(s.length<=1)return s;const t=[];let e=[];return s.forEach(i=>{i[0]==="["?(t.push(...e.sort(),i),e=[]):e.push(i)}),t.push(...e.sort()),t},Vh=s=>({cache:Dh(s.cacheSize),parseClassName:Lh(s),...Mh(s)}),zh=/\s+/,Fh=(s,t)=>{const{parseClassName:e,getClassGroupId:i,getConflictingClassGroupIds:n}=t,r=[],o=s.trim().split(zh);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:h,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:g}=e(c);let y=!!g,w=i(y?m.substring(0,g):m);if(!w){if(!y){a=c+(a.length>0?" "+a:a);continue}if(w=i(m),!w){a=c+(a.length>0?" "+a:a);continue}y=!1}const b=jh(h).join(":"),S=u?b+fa:b,_=S+w;if(r.includes(_))continue;r.push(_);const N=n(w,y);for(let k=0;k<N.length;++k){const P=N[k];r.push(S+P)}a=c+(a.length>0?" "+a:a)}return a};function $h(){let s=0,t,e,i="";for(;s<arguments.length;)(t=arguments[s++])&&(e=ma(t))&&(i&&(i+=" "),i+=e);return i}const ma=s=>{if(typeof s=="string")return s;let t,e="";for(let i=0;i<s.length;i++)s[i]&&(t=ma(s[i]))&&(e&&(e+=" "),e+=t);return e};function Bh(s,...t){let e,i,n,r=o;function o(l){const c=t.reduce((h,u)=>u(h),s());return e=Vh(c),i=e.cache.get,n=e.cache.set,r=a,a(l)}function a(l){const c=i(l);if(c)return c;const h=Fh(l,e);return n(l,h),h}return function(){return r($h.apply(null,arguments))}}const at=s=>{const t=e=>e[s]||[];return t.isThemeGetter=!0,t},pa=/^\[(?:([a-z-]+):)?(.+)\]$/i,Wh=/^\d+\/\d+$/,Yh=new Set(["px","full","screen"]),Uh=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Zh=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Xh=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Qh=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gh=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zt=s=>Ne(s)||Yh.has(s)||Wh.test(s),ne=s=>ze(s,"length",iu),Ne=s=>!!s&&!Number.isNaN(Number(s)),Vi=s=>ze(s,"number",Ne),Qe=s=>!!s&&Number.isInteger(Number(s)),Hh=s=>s.endsWith("%")&&Ne(s.slice(0,-1)),q=s=>pa.test(s),re=s=>Uh.test(s),Kh=new Set(["length","size","percentage"]),Jh=s=>ze(s,Kh,ga),qh=s=>ze(s,"position",ga),tu=new Set(["image","url"]),eu=s=>ze(s,tu,ru),su=s=>ze(s,"",nu),Ge=()=>!0,ze=(s,t,e)=>{const i=pa.exec(s);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):e(i[2]):!1},iu=s=>Zh.test(s)&&!Xh.test(s),ga=()=>!1,nu=s=>Qh.test(s),ru=s=>Gh.test(s),ou=()=>{const s=at("colors"),t=at("spacing"),e=at("blur"),i=at("brightness"),n=at("borderColor"),r=at("borderRadius"),o=at("borderSpacing"),a=at("borderWidth"),l=at("contrast"),c=at("grayscale"),h=at("hueRotate"),u=at("invert"),m=at("gap"),g=at("gradientColorStops"),y=at("gradientColorStopPositions"),w=at("inset"),b=at("margin"),S=at("opacity"),_=at("padding"),N=at("saturate"),k=at("scale"),P=at("sepia"),E=at("skew"),z=at("space"),O=at("translate"),j=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],Z=()=>["auto",q,t],T=()=>[q,t],U=()=>["",Zt,ne],B=()=>["auto",Ne,q],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],tt=()=>["solid","dashed","dotted","double","none"],nt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ht=()=>["start","end","center","between","around","evenly","stretch"],ct=()=>["","0",q],vt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],yt=()=>[Ne,q];return{cacheSize:500,separator:":",theme:{colors:[Ge],spacing:[Zt,ne],blur:["none","",re,q],brightness:yt(),borderColor:[s],borderRadius:["none","","full",re,q],borderSpacing:T(),borderWidth:U(),contrast:yt(),grayscale:ct(),hueRotate:yt(),invert:ct(),gap:T(),gradientColorStops:[s],gradientColorStopPositions:[Hh,ne],inset:Z(),margin:Z(),opacity:yt(),padding:T(),saturate:yt(),scale:yt(),sepia:ct(),skew:yt(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",q]}],container:["container"],columns:[{columns:[re]}],"break-after":[{"break-after":vt()}],"break-before":[{"break-before":vt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),q]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qe,q]}],basis:[{basis:Z()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",q]}],grow:[{grow:ct()}],shrink:[{shrink:ct()}],order:[{order:["first","last","none",Qe,q]}],"grid-cols":[{"grid-cols":[Ge]}],"col-start-end":[{col:["auto",{span:["full",Qe,q]},q]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Ge]}],"row-start-end":[{row:["auto",{span:[Qe,q]},q]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",q]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",q]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...ht()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ht(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ht(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[_]}],px:[{px:[_]}],py:[{py:[_]}],ps:[{ps:[_]}],pe:[{pe:[_]}],pt:[{pt:[_]}],pr:[{pr:[_]}],pb:[{pb:[_]}],pl:[{pl:[_]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[z]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[z]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",q,t]}],"min-w":[{"min-w":[q,t,"min","max","fit"]}],"max-w":[{"max-w":[q,t,"none","full","min","max","fit","prose",{screen:[re]},re]}],h:[{h:[q,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[q,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[q,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[q,t,"auto","min","max","fit"]}],"font-size":[{text:["base",re,ne]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vi]}],"font-family":[{font:[Ge]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",q]}],"line-clamp":[{"line-clamp":["none",Ne,Vi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zt,q]}],"list-image":[{"list-image":["none",q]}],"list-style-type":[{list:["none","disc","decimal",q]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...tt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zt,ne]}],"underline-offset":[{"underline-offset":["auto",Zt,q]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),qh]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Jh]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eu]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[r]}],"rounded-s":[{"rounded-s":[r]}],"rounded-e":[{"rounded-e":[r]}],"rounded-t":[{"rounded-t":[r]}],"rounded-r":[{"rounded-r":[r]}],"rounded-b":[{"rounded-b":[r]}],"rounded-l":[{"rounded-l":[r]}],"rounded-ss":[{"rounded-ss":[r]}],"rounded-se":[{"rounded-se":[r]}],"rounded-ee":[{"rounded-ee":[r]}],"rounded-es":[{"rounded-es":[r]}],"rounded-tl":[{"rounded-tl":[r]}],"rounded-tr":[{"rounded-tr":[r]}],"rounded-br":[{"rounded-br":[r]}],"rounded-bl":[{"rounded-bl":[r]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...tt(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:tt()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...tt()]}],"outline-offset":[{"outline-offset":[Zt,q]}],"outline-w":[{outline:[Zt,ne]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[Zt,ne]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",re,su]}],"shadow-color":[{shadow:[Ge]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...nt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":nt()}],filter:[{filter:["","none"]}],blur:[{blur:[e]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",re,q]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[u]}],saturate:[{saturate:[N]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[e]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",q]}],duration:[{duration:yt()}],ease:[{ease:["linear","in","out","in-out",q]}],delay:[{delay:yt()}],animate:[{animate:["none","spin","ping","pulse","bounce",q]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Qe,q]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",q]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",q]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",q]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[Zt,ne,Vi]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},au=Bh(ou);function lt(...s){return au(Rh(s))}const lu=Wn("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),At=d.forwardRef(({className:s,variant:t,size:e,asChild:i=!1,...n},r)=>{const o=i?Oe:"button";return f.jsx(o,{className:lt(lu({variant:t,size:e,className:s})),ref:r,...n})});At.displayName="Button";const ri=d.forwardRef(({className:s,type:t,...e},i)=>f.jsx("input",{type:t,className:lt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:i,...e}));ri.displayName="Input";const rs=d.forwardRef(({className:s,...t},e)=>f.jsx("div",{ref:e,className:lt("rounded-xl border bg-card text-card-foreground shadow",s),...t}));rs.displayName="Card";const va=d.forwardRef(({className:s,...t},e)=>f.jsx("div",{ref:e,className:lt("flex flex-col space-y-1.5 p-6",s),...t}));va.displayName="CardHeader";const ya=d.forwardRef(({className:s,...t},e)=>f.jsx("h3",{ref:e,className:lt("font-semibold leading-none tracking-tight",s),...t}));ya.displayName="CardTitle";const ba=d.forwardRef(({className:s,...t},e)=>f.jsx("p",{ref:e,className:lt("text-sm text-muted-foreground",s),...t}));ba.displayName="CardDescription";const wa=d.forwardRef(({className:s,...t},e)=>f.jsx("div",{ref:e,className:lt("p-6 pt-0",s),...t}));wa.displayName="CardContent";const xa=d.forwardRef(({className:s,...t},e)=>f.jsx("div",{ref:e,className:lt("flex items-center p-6 pt-0",s),...t}));xa.displayName="CardFooter";var cu=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],St=cu.reduce((s,t)=>{const e=d.forwardRef((i,n)=>{const{asChild:r,...o}=i,a=r?Oe:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(a,{...o,ref:n})});return e.displayName=`Primitive.${t}`,{...s,[t]:e}},{});function _a(s,t){s&&Dn.flushSync(()=>s.dispatchEvent(t))}var hu="Label",Sa=d.forwardRef((s,t)=>f.jsx(St.label,{...s,ref:t,onMouseDown:e=>{var n;e.target.closest("button, input, select, textarea")||((n=s.onMouseDown)==null||n.call(s,e),!e.defaultPrevented&&e.detail>1&&e.preventDefault())}}));Sa.displayName=hu;var Ca=Sa;const uu=Wn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ea=d.forwardRef(({className:s,...t},e)=>f.jsx(Ca,{ref:e,className:lt(uu(),s),...t}));Ea.displayName=Ca.displayName;const du=Vc,ka=d.createContext({}),Ar=({...s})=>f.jsx(ka.Provider,{value:{name:s.name},children:f.jsx(Bc,{...s})}),yi=()=>{const s=d.useContext(ka),t=d.useContext(Ta),{getFieldState:e,formState:i}=gi(),n=e(s.name,i);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:r}=t;return{id:r,name:s.name,formItemId:`${r}-form-item`,formDescriptionId:`${r}-form-item-description`,formMessageId:`${r}-form-item-message`,...n}},Ta=d.createContext({}),yn=d.forwardRef(({className:s,...t},e)=>{const i=d.useId();return f.jsx(Ta.Provider,{value:{id:i},children:f.jsx("div",{ref:e,className:lt("space-y-2",s),...t})})});yn.displayName="FormItem";const bn=d.forwardRef(({className:s,...t},e)=>{const{error:i,formItemId:n}=yi();return f.jsx(Ea,{ref:e,className:lt(i&&"text-destructive",s),htmlFor:n,...t})});bn.displayName="FormLabel";const wn=d.forwardRef(({...s},t)=>{const{error:e,formItemId:i,formDescriptionId:n,formMessageId:r}=yi();return f.jsx(Oe,{ref:t,id:i,"aria-describedby":e?`${n} ${r}`:`${n}`,"aria-invalid":!!e,...s})});wn.displayName="FormControl";const fu=d.forwardRef(({className:s,...t},e)=>{const{formDescriptionId:i}=yi();return f.jsx("p",{ref:e,id:i,className:lt("text-[0.8rem] text-muted-foreground",s),...t})});fu.displayName="FormDescription";const xn=d.forwardRef(({className:s,children:t,...e},i)=>{const{error:n,formMessageId:r}=yi(),o=n?String(n==null?void 0:n.message):t;return o?f.jsx("p",{ref:i,id:r,className:lt("text-[0.8rem] font-medium text-destructive",s),...e,children:o}):null});xn.displayName="FormMessage";const mu="https://gwkirrnjlrcwaejjlokn.supabase.co",pu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd3a2lycm5qbHJjd2Flampsb2tuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDcyMDMzMzQsImV4cCI6MjA2Mjc3OTMzNH0.yzLOtjHvM38Q63Qyca6sFK_tM01Nh1HaLNiQ5tMhyKM",Ee=mc(mu,pu),Na=d.createContext(void 0);function gu({children:s}){const[t,e]=d.useState({user:null,session:null,isLoading:!0,error:null});d.useEffect(()=>{Ee.auth.getSession().then(({data:{session:a}})=>{e(l=>({...l,session:a,user:(a==null?void 0:a.user)??null,isLoading:!1}))});const{data:{subscription:o}}=Ee.auth.onAuthStateChange((a,l)=>{e(c=>({...c,session:l,user:(l==null?void 0:l.user)??null,isLoading:!1}))});return()=>{o.unsubscribe()}},[]);const r={...t,login:async({email:o,password:a})=>{try{const{error:l}=await Ee.auth.signInWithPassword({email:o,password:a});return l?(e(c=>({...c,error:l.message})),{error:l}):{error:null}}catch(l){return e(c=>({...c,error:l.message})),{error:l}}},logout:async()=>{try{await Ee.auth.signOut(),e(o=>({...o,user:null,session:null}))}catch(o){e(a=>({...a,error:o.message}))}}};return f.jsx(Na.Provider,{value:r,children:s})}function bi(){const s=d.useContext(Na);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s}function Ra({size:s=32,className:t="",showText:e=!1}){return f.jsxs("div",{className:`flex items-center gap-2 ${t}`,children:[f.jsx("div",{className:"relative",children:f.jsx(bc,{size:s,className:"text-primary"})}),e&&f.jsx("span",{className:"font-bold text-lg text-primary select-none",children:"Screener AI"})]})}const vu=1,yu=1e6;let zi=0;function bu(){return zi=(zi+1)%Number.MAX_SAFE_INTEGER,zi.toString()}const Fi=new Map,Pr=s=>{if(Fi.has(s))return;const t=setTimeout(()=>{Fi.delete(s),os({type:"REMOVE_TOAST",toastId:s})},yu);Fi.set(s,t)},wu=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,vu)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:e}=t;return e?Pr(e):s.toasts.forEach(i=>{Pr(i.id)}),{...s,toasts:s.toasts.map(i=>i.id===e||e===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(e=>e.id!==t.toastId)}}},Ds=[];let Ls={toasts:[]};function os(s){Ls=wu(Ls,s),Ds.forEach(t=>{t(Ls)})}function xu({...s}){const t=bu(),e=n=>os({type:"UPDATE_TOAST",toast:{...n,id:t}}),i=()=>os({type:"DISMISS_TOAST",toastId:t});return os({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:n=>{n||i()}}}),{id:t,dismiss:i,update:e}}function Un(){const[s,t]=d.useState(Ls);return d.useEffect(()=>(Ds.push(t),()=>{const e=Ds.indexOf(t);e>-1&&Ds.splice(e,1)}),[s]),{...s,toast:xu,dismiss:e=>os({type:"DISMISS_TOAST",toastId:e})}}const _u=_h({email:kr().email("유효한 이메일 주소를 입력해주세요."),password:kr().min(6,"비밀번호는 최소 6자 이상이어야 합니다.")});function Su(){const{login:s,error:t}=bi(),{toast:e}=Un(),[i,n]=d.useState(!1),[r,o]=d.useState(!1);d.useEffect(()=>{window.amplitude.track("login-view-screener-poc")},[]);const a=th({resolver:nh(_u),defaultValues:{email:"",password:""}}),l=async c=>{n(!0);try{const{error:h}=await s({email:c.email,password:c.password});h&&e({variant:"destructive",title:"로그인 실패",description:h.message||"이메일 또는 비밀번호를 확인해주세요."})}catch{e({variant:"destructive",title:"로그인 실패",description:"서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요."})}finally{n(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:f.jsx("div",{className:"w-full max-w-md px-4",children:f.jsxs(rs,{children:[f.jsxs(va,{className:"space-y-2 items-center text-center",children:[f.jsx(Ra,{size:48,className:"mb-2"}),f.jsx(ya,{className:"text-2xl font-bold",children:"Screener AI by Newsystock"}),f.jsx(ba,{children:"계정에 로그인하여 주식 분석 AI를 이용해보세요."})]}),f.jsx(wa,{children:f.jsx(du,{...a,children:f.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-4",children:[f.jsx(Ar,{control:a.control,name:"email",render:({field:c})=>f.jsxs(yn,{children:[f.jsx(bn,{children:"이메일"}),f.jsx(wn,{children:f.jsx(ri,{placeholder:"name@example.com",type:"email",autoComplete:"email",...c})}),f.jsx(xn,{})]})}),f.jsx(Ar,{control:a.control,name:"password",render:({field:c})=>f.jsxs(yn,{children:[f.jsx(bn,{children:"비밀번호"}),f.jsxs("div",{className:"relative",children:[f.jsx(wn,{children:f.jsx(ri,{placeholder:"비밀번호를 입력하세요",type:r?"text":"password",autoComplete:"current-password",...c})}),f.jsx(At,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3",onClick:()=>o(!r),children:r?f.jsx(wc,{className:"h-4 w-4"}):f.jsx(xc,{className:"h-4 w-4"})})]}),f.jsx(xn,{})]})}),t&&f.jsx("div",{className:"text-destructive text-sm mt-2",children:t}),f.jsx(At,{type:"submit",className:"w-full",disabled:i,children:i?"로그인 중...":"로그인"})]})})}),f.jsx(xa,{className:"flex flex-col",children:f.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"로그인하면 Newsystock의 이용약관 및 개인정보처리방침에 동의하게 됩니다."})})]})})})}var ms=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{};function Cu(s,t){return d.useReducer((e,i)=>t[e][i]??e,s)}var Fe=s=>{const{present:t,children:e}=s,i=Eu(t),n=typeof e=="function"?e({present:i.isPresent}):d.Children.only(e),r=Ot(i.ref,ku(n));return typeof e=="function"||i.isPresent?d.cloneElement(n,{ref:r}):null};Fe.displayName="Presence";function Eu(s){const[t,e]=d.useState(),i=d.useRef({}),n=d.useRef(s),r=d.useRef("none"),o=s?"mounted":"unmounted",[a,l]=Cu(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const c=Cs(i.current);r.current=a==="mounted"?c:"none"},[a]),ms(()=>{const c=i.current,h=n.current;if(h!==s){const m=r.current,g=Cs(c);s?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),n.current=s}},[s,l]),ms(()=>{if(t){let c;const h=t.ownerDocument.defaultView??window,u=g=>{const w=Cs(i.current).includes(g.animationName);if(g.target===t&&w&&(l("ANIMATION_END"),!n.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",c=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=g=>{g.target===t&&(r.current=Cs(i.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{h.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:d.useCallback(c=>{c&&(i.current=getComputedStyle(c)),e(c)},[])}}function Cs(s){return(s==null?void 0:s.animationName)||"none"}function ku(s){var i,n;let t=(i=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:i.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}function Ma(s,t=[]){let e=[];function i(r,o){const a=d.createContext(o),l=e.length;e=[...e,o];const c=u=>{var S;const{scope:m,children:g,...y}=u,w=((S=m==null?void 0:m[s])==null?void 0:S[l])||a,b=d.useMemo(()=>y,Object.values(y));return f.jsx(w.Provider,{value:b,children:g})};c.displayName=r+"Provider";function h(u,m){var w;const g=((w=m==null?void 0:m[s])==null?void 0:w[l])||a,y=d.useContext(g);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${r}\``)}return[c,h]}const n=()=>{const r=e.map(o=>d.createContext(o));return function(a){const l=(a==null?void 0:a[s])||r;return d.useMemo(()=>({[`__scope${s}`]:{...a,[s]:l}}),[a,l])}};return n.scopeName=s,[i,Tu(n,...t)]}function Tu(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const i=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(r)[`__scope${c}`];return{...a,...u}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return e.scopeName=t.scopeName,e}function _t(s){const t=d.useRef(s);return d.useEffect(()=>{t.current=s}),d.useMemo(()=>(...e)=>{var i;return(i=t.current)==null?void 0:i.call(t,...e)},[])}var Nu=d.createContext(void 0);function Ru(s){const t=d.useContext(Nu);return s||t||"ltr"}function Mu(s,[t,e]){return Math.min(e,Math.max(t,s))}function mt(s,t,{checkForDefaultPrevented:e=!0}={}){return function(n){if(s==null||s(n),e===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Au(s,t){return d.useReducer((e,i)=>t[e][i]??e,s)}var Zn="ScrollArea",[Aa,Vp]=Ma(Zn),[Pu,Lt]=Aa(Zn),Pa=d.forwardRef((s,t)=>{const{__scopeScrollArea:e,type:i="hover",dir:n,scrollHideDelay:r=600,...o}=s,[a,l]=d.useState(null),[c,h]=d.useState(null),[u,m]=d.useState(null),[g,y]=d.useState(null),[w,b]=d.useState(null),[S,_]=d.useState(0),[N,k]=d.useState(0),[P,E]=d.useState(!1),[z,O]=d.useState(!1),j=Ot(t,Z=>l(Z)),F=Ru(n);return f.jsx(Pu,{scope:e,type:i,dir:F,scrollHideDelay:r,scrollArea:a,viewport:c,onViewportChange:h,content:u,onContentChange:m,scrollbarX:g,onScrollbarXChange:y,scrollbarXEnabled:P,onScrollbarXEnabledChange:E,scrollbarY:w,onScrollbarYChange:b,scrollbarYEnabled:z,onScrollbarYEnabledChange:O,onCornerWidthChange:_,onCornerHeightChange:k,children:f.jsx(St.div,{dir:F,...o,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":N+"px",...s.style}})})});Pa.displayName=Zn;var Oa="ScrollAreaViewport",Ia=d.forwardRef((s,t)=>{const{__scopeScrollArea:e,children:i,asChild:n,nonce:r,...o}=s,a=Lt(Oa,e),l=d.useRef(null),c=Ot(t,l,a.onViewportChange);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:`
[data-radix-scroll-area-viewport] {
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;
}
[data-radix-scroll-area-viewport]::-webkit-scrollbar {
  display: none;
}
:where([data-radix-scroll-area-viewport]) {
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
:where([data-radix-scroll-area-content]) {
  flex-grow: 1;
}
`},nonce:r}),f.jsx(St.div,{"data-radix-scroll-area-viewport":"",...o,asChild:n,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...s.style},children:Bu({asChild:n,children:i},h=>f.jsx("div",{"data-radix-scroll-area-content":"",ref:a.onContentChange,style:{minWidth:a.scrollbarXEnabled?"fit-content":void 0},children:h}))})]})});Ia.displayName=Oa;var Bt="ScrollAreaScrollbar",Xn=d.forwardRef((s,t)=>{const{forceMount:e,...i}=s,n=Lt(Bt,s.__scopeScrollArea),{onScrollbarXEnabledChange:r,onScrollbarYEnabledChange:o}=n,a=s.orientation==="horizontal";return d.useEffect(()=>(a?r(!0):o(!0),()=>{a?r(!1):o(!1)}),[a,r,o]),n.type==="hover"?f.jsx(Ou,{...i,ref:t,forceMount:e}):n.type==="scroll"?f.jsx(Iu,{...i,ref:t,forceMount:e}):n.type==="auto"?f.jsx(Da,{...i,ref:t,forceMount:e}):n.type==="always"?f.jsx(Qn,{...i,ref:t}):null});Xn.displayName=Bt;var Ou=d.forwardRef((s,t)=>{const{forceMount:e,...i}=s,n=Lt(Bt,s.__scopeScrollArea),[r,o]=d.useState(!1);return d.useEffect(()=>{const a=n.scrollArea;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},h=()=>{l=window.setTimeout(()=>o(!1),n.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",h),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",h)}}},[n.scrollArea,n.scrollHideDelay]),f.jsx(Fe,{present:e||r,children:f.jsx(Da,{"data-state":r?"visible":"hidden",...i,ref:t})})}),Iu=d.forwardRef((s,t)=>{const{forceMount:e,...i}=s,n=Lt(Bt,s.__scopeScrollArea),r=s.orientation==="horizontal",o=xi(()=>l("SCROLL_END"),100),[a,l]=Au("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(a==="idle"){const c=window.setTimeout(()=>l("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(c)}},[a,n.scrollHideDelay,l]),d.useEffect(()=>{const c=n.viewport,h=r?"scrollLeft":"scrollTop";if(c){let u=c[h];const m=()=>{const g=c[h];u!==g&&(l("SCROLL"),o()),u=g};return c.addEventListener("scroll",m),()=>c.removeEventListener("scroll",m)}},[n.viewport,r,l,o]),f.jsx(Fe,{present:e||a!=="hidden",children:f.jsx(Qn,{"data-state":a==="hidden"?"hidden":"visible",...i,ref:t,onPointerEnter:mt(s.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:mt(s.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Da=d.forwardRef((s,t)=>{const e=Lt(Bt,s.__scopeScrollArea),{forceMount:i,...n}=s,[r,o]=d.useState(!1),a=s.orientation==="horizontal",l=xi(()=>{if(e.viewport){const c=e.viewport.offsetWidth<e.viewport.scrollWidth,h=e.viewport.offsetHeight<e.viewport.scrollHeight;o(a?c:h)}},10);return Ie(e.viewport,l),Ie(e.content,l),f.jsx(Fe,{present:i||r,children:f.jsx(Qn,{"data-state":r?"visible":"hidden",...n,ref:t})})}),Qn=d.forwardRef((s,t)=>{const{orientation:e="vertical",...i}=s,n=Lt(Bt,s.__scopeScrollArea),r=d.useRef(null),o=d.useRef(0),[a,l]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=Fa(a.viewport,a.content),h={...i,sizes:a,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:m=>r.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function u(m,g){return Fu(m,o.current,a,g)}return e==="horizontal"?f.jsx(Du,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&r.current){const m=n.viewport.scrollLeft,g=Or(m,a,n.dir);r.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollLeft=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollLeft=u(m,n.dir))}}):e==="vertical"?f.jsx(Lu,{...h,ref:t,onThumbPositionChange:()=>{if(n.viewport&&r.current){const m=n.viewport.scrollTop,g=Or(m,a);r.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{n.viewport&&(n.viewport.scrollTop=m)},onDragScroll:m=>{n.viewport&&(n.viewport.scrollTop=u(m))}}):null}),Du=d.forwardRef((s,t)=>{const{sizes:e,onSizesChange:i,...n}=s,r=Lt(Bt,s.__scopeScrollArea),[o,a]=d.useState(),l=d.useRef(null),c=Ot(t,l,r.onScrollbarXChange);return d.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),f.jsx(ja,{"data-orientation":"horizontal",...n,ref:c,sizes:e,style:{bottom:0,left:r.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:r.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":wi(e)+"px",...s.style},onThumbPointerDown:h=>s.onThumbPointerDown(h.x),onDragScroll:h=>s.onDragScroll(h.x),onWheelScroll:(h,u)=>{if(r.viewport){const m=r.viewport.scrollLeft+h.deltaX;s.onWheelScroll(m),Ba(m,u)&&h.preventDefault()}},onResize:()=>{l.current&&r.viewport&&o&&i({content:r.viewport.scrollWidth,viewport:r.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:ai(o.paddingLeft),paddingEnd:ai(o.paddingRight)}})}})}),Lu=d.forwardRef((s,t)=>{const{sizes:e,onSizesChange:i,...n}=s,r=Lt(Bt,s.__scopeScrollArea),[o,a]=d.useState(),l=d.useRef(null),c=Ot(t,l,r.onScrollbarYChange);return d.useEffect(()=>{l.current&&a(getComputedStyle(l.current))},[l]),f.jsx(ja,{"data-orientation":"vertical",...n,ref:c,sizes:e,style:{top:0,right:r.dir==="ltr"?0:void 0,left:r.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":wi(e)+"px",...s.style},onThumbPointerDown:h=>s.onThumbPointerDown(h.y),onDragScroll:h=>s.onDragScroll(h.y),onWheelScroll:(h,u)=>{if(r.viewport){const m=r.viewport.scrollTop+h.deltaY;s.onWheelScroll(m),Ba(m,u)&&h.preventDefault()}},onResize:()=>{l.current&&r.viewport&&o&&i({content:r.viewport.scrollHeight,viewport:r.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:ai(o.paddingTop),paddingEnd:ai(o.paddingBottom)}})}})}),[ju,La]=Aa(Bt),ja=d.forwardRef((s,t)=>{const{__scopeScrollArea:e,sizes:i,hasThumb:n,onThumbChange:r,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:h,onResize:u,...m}=s,g=Lt(Bt,e),[y,w]=d.useState(null),b=Ot(t,j=>w(j)),S=d.useRef(null),_=d.useRef(""),N=g.viewport,k=i.content-i.viewport,P=_t(h),E=_t(l),z=xi(u,10);function O(j){if(S.current){const F=j.clientX-S.current.left,Z=j.clientY-S.current.top;c({x:F,y:Z})}}return d.useEffect(()=>{const j=F=>{const Z=F.target;(y==null?void 0:y.contains(Z))&&P(F,k)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[N,y,k,P]),d.useEffect(E,[i,E]),Ie(y,z),Ie(g.content,z),f.jsx(ju,{scope:e,scrollbar:y,hasThumb:n,onThumbChange:_t(r),onThumbPointerUp:_t(o),onThumbPositionChange:E,onThumbPointerDown:_t(a),children:f.jsx(St.div,{...m,ref:b,style:{position:"absolute",...m.style},onPointerDown:mt(s.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),S.current=y.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),O(j))}),onPointerMove:mt(s.onPointerMove,O),onPointerUp:mt(s.onPointerUp,j=>{const F=j.target;F.hasPointerCapture(j.pointerId)&&F.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),S.current=null})})})}),oi="ScrollAreaThumb",Va=d.forwardRef((s,t)=>{const{forceMount:e,...i}=s,n=La(oi,s.__scopeScrollArea);return f.jsx(Fe,{present:e||n.hasThumb,children:f.jsx(Vu,{ref:t,...i})})}),Vu=d.forwardRef((s,t)=>{const{__scopeScrollArea:e,style:i,...n}=s,r=Lt(oi,e),o=La(oi,e),{onThumbPositionChange:a}=o,l=Ot(t,u=>o.onThumbChange(u)),c=d.useRef(),h=xi(()=>{c.current&&(c.current(),c.current=void 0)},100);return d.useEffect(()=>{const u=r.viewport;if(u){const m=()=>{if(h(),!c.current){const g=$u(u,a);c.current=g,a()}};return a(),u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[r.viewport,h,a]),f.jsx(St.div,{"data-state":o.hasThumb?"visible":"hidden",...n,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:mt(s.onPointerDownCapture,u=>{const g=u.target.getBoundingClientRect(),y=u.clientX-g.left,w=u.clientY-g.top;o.onThumbPointerDown({x:y,y:w})}),onPointerUp:mt(s.onPointerUp,o.onThumbPointerUp)})});Va.displayName=oi;var Gn="ScrollAreaCorner",za=d.forwardRef((s,t)=>{const e=Lt(Gn,s.__scopeScrollArea),i=!!(e.scrollbarX&&e.scrollbarY);return e.type!=="scroll"&&i?f.jsx(zu,{...s,ref:t}):null});za.displayName=Gn;var zu=d.forwardRef((s,t)=>{const{__scopeScrollArea:e,...i}=s,n=Lt(Gn,e),[r,o]=d.useState(0),[a,l]=d.useState(0),c=!!(r&&a);return Ie(n.scrollbarX,()=>{var u;const h=((u=n.scrollbarX)==null?void 0:u.offsetHeight)||0;n.onCornerHeightChange(h),l(h)}),Ie(n.scrollbarY,()=>{var u;const h=((u=n.scrollbarY)==null?void 0:u.offsetWidth)||0;n.onCornerWidthChange(h),o(h)}),c?f.jsx(St.div,{...i,ref:t,style:{width:r,height:a,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...s.style}}):null});function ai(s){return s?parseInt(s,10):0}function Fa(s,t){const e=s/t;return isNaN(e)?0:e}function wi(s){const t=Fa(s.viewport,s.content),e=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=(s.scrollbar.size-e)*t;return Math.max(i,18)}function Fu(s,t,e,i="ltr"){const n=wi(e),r=n/2,o=t||r,a=n-o,l=e.scrollbar.paddingStart+o,c=e.scrollbar.size-e.scrollbar.paddingEnd-a,h=e.content-e.viewport,u=i==="ltr"?[0,h]:[h*-1,0];return $a([l,c],u)(s)}function Or(s,t,e="ltr"){const i=wi(t),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=t.scrollbar.size-n,o=t.content-t.viewport,a=r-i,l=e==="ltr"?[0,o]:[o*-1,0],c=Mu(s,l);return $a([0,o],[0,a])(c)}function $a(s,t){return e=>{if(s[0]===s[1]||t[0]===t[1])return t[0];const i=(t[1]-t[0])/(s[1]-s[0]);return t[0]+i*(e-s[0])}}function Ba(s,t){return s>0&&s<t}var $u=(s,t=()=>{})=>{let e={left:s.scrollLeft,top:s.scrollTop},i=0;return function n(){const r={left:s.scrollLeft,top:s.scrollTop},o=e.left!==r.left,a=e.top!==r.top;(o||a)&&t(),e=r,i=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(i)};function xi(s,t){const e=_t(s),i=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(i.current),[]),d.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(e,t)},[e,t])}function Ie(s,t){const e=_t(t);ms(()=>{let i=0;if(s){const n=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(e)});return n.observe(s),()=>{window.cancelAnimationFrame(i),n.unobserve(s)}}},[s,e])}function Bu(s,t){const{asChild:e,children:i}=s;if(!e)return typeof t=="function"?t(i):t;const n=d.Children.only(i);return d.cloneElement(n,{children:typeof t=="function"?t(n.props.children):t})}var Wa=Pa,Wu=Ia,Yu=za;const Ya=d.forwardRef(({className:s,children:t,...e},i)=>f.jsxs(Wa,{ref:i,className:lt("relative overflow-hidden",s),...e,children:[f.jsx(Wu,{className:"h-full w-full rounded-[inherit]",children:t}),f.jsx(Ua,{}),f.jsx(Yu,{})]}));Ya.displayName=Wa.displayName;const Ua=d.forwardRef(({className:s,orientation:t="vertical",...e},i)=>f.jsx(Xn,{ref:i,orientation:t,className:lt("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...e,children:f.jsx(Va,{className:"relative flex-1 rounded-full bg-border"})}));Ua.displayName=Xn.displayName;function qt(s,t,{checkForDefaultPrevented:e=!0}={}){return function(n){if(s==null||s(n),e===!1||!n.defaultPrevented)return t==null?void 0:t(n)}}function Hn(s,t=[]){let e=[];function i(r,o){const a=d.createContext(o),l=e.length;e=[...e,o];const c=u=>{var S;const{scope:m,children:g,...y}=u,w=((S=m==null?void 0:m[s])==null?void 0:S[l])||a,b=d.useMemo(()=>y,Object.values(y));return f.jsx(w.Provider,{value:b,children:g})};c.displayName=r+"Provider";function h(u,m){var w;const g=((w=m==null?void 0:m[s])==null?void 0:w[l])||a,y=d.useContext(g);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${r}\``)}return[c,h]}const n=()=>{const r=e.map(o=>d.createContext(o));return function(a){const l=(a==null?void 0:a[s])||r;return d.useMemo(()=>({[`__scope${s}`]:{...a,[s]:l}}),[a,l])}};return n.scopeName=s,[i,Uu(n,...t)]}function Uu(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const i=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(r)[`__scope${c}`];return{...a,...u}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return e.scopeName=t.scopeName,e}function Ir(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function Za(...s){return t=>{let e=!1;const i=s.map(n=>{const r=Ir(n,t);return!e&&typeof r=="function"&&(e=!0),r});if(e)return()=>{for(let n=0;n<i.length;n++){const r=i[n];typeof r=="function"?r():Ir(s[n],null)}}}}function li(...s){return d.useCallback(Za(...s),s)}function _n(s){const t=Zu(s),e=d.forwardRef((i,n)=>{const{children:r,...o}=i,a=d.Children.toArray(r),l=a.find(Qu);if(l){const c=l.props.children,h=a.map(u=>u===l?d.Children.count(c)>1?d.Children.only(null):d.isValidElement(c)?c.props.children:null:u);return f.jsx(t,{...o,ref:n,children:d.isValidElement(c)?d.cloneElement(c,void 0,h):null})}return f.jsx(t,{...o,ref:n,children:r})});return e.displayName=`${s}.Slot`,e}function Zu(s){const t=d.forwardRef((e,i)=>{const{children:n,...r}=e;if(d.isValidElement(n)){const o=Hu(n),a=Gu(r,n.props);return n.type!==d.Fragment&&(a.ref=i?Za(i,o):o),d.cloneElement(n,a)}return d.Children.count(n)>1?d.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var Xu=Symbol("radix.slottable");function Qu(s){return d.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===Xu}function Gu(s,t){const e={...t};for(const i in t){const n=s[i],r=t[i];/^on[A-Z]/.test(i)?n&&r?e[i]=(...a)=>{const l=r(...a);return n(...a),l}:n&&(e[i]=n):i==="style"?e[i]={...n,...r}:i==="className"&&(e[i]=[n,r].filter(Boolean).join(" "))}return{...s,...e}}function Hu(s){var i,n;let t=(i=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:i.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}function Ku(s){const t=s+"CollectionProvider",[e,i]=Hn(t),[n,r]=e(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:b,children:S}=w,_=K.useRef(null),N=K.useRef(new Map).current;return f.jsx(n,{scope:b,itemMap:N,collectionRef:_,children:S})};o.displayName=t;const a=s+"CollectionSlot",l=_n(a),c=K.forwardRef((w,b)=>{const{scope:S,children:_}=w,N=r(a,S),k=li(b,N.collectionRef);return f.jsx(l,{ref:k,children:_})});c.displayName=a;const h=s+"CollectionItemSlot",u="data-radix-collection-item",m=_n(h),g=K.forwardRef((w,b)=>{const{scope:S,children:_,...N}=w,k=K.useRef(null),P=li(b,k),E=r(h,S);return K.useEffect(()=>(E.itemMap.set(k,{ref:k,...N}),()=>void E.itemMap.delete(k))),f.jsx(m,{[u]:"",ref:P,children:_})});g.displayName=h;function y(w){const b=r(s+"CollectionConsumer",w);return K.useCallback(()=>{const _=b.collectionRef.current;if(!_)return[];const N=Array.from(_.querySelectorAll(`[${u}]`));return Array.from(b.itemMap.values()).sort((E,z)=>N.indexOf(E.ref.current)-N.indexOf(z.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},y,i]}var ci=globalThis!=null&&globalThis.document?d.useLayoutEffect:()=>{},Ju=Lo[" useId ".trim().toString()]||(()=>{}),qu=0;function Xa(s){const[t,e]=d.useState(Ju());return ci(()=>{s||e(i=>i??String(qu++))},[s]),s||(t?`radix-${t}`:"")}var td=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$e=td.reduce((s,t)=>{const e=_n(`Primitive.${t}`),i=d.forwardRef((n,r)=>{const{asChild:o,...a}=n,l=o?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...a,ref:r})});return i.displayName=`Primitive.${t}`,{...s,[t]:i}},{});function ed(s){const t=d.useRef(s);return d.useEffect(()=>{t.current=s}),d.useMemo(()=>(...e)=>{var i;return(i=t.current)==null?void 0:i.call(t,...e)},[])}var sd=Lo[" useInsertionEffect ".trim().toString()]||ci;function Qa({prop:s,defaultProp:t,onChange:e=()=>{},caller:i}){const[n,r,o]=id({defaultProp:t,onChange:e}),a=s!==void 0,l=a?s:n;{const h=d.useRef(s!==void 0);d.useEffect(()=>{const u=h.current;u!==a&&console.warn(`${i} is changing from ${u?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=a},[a,i])}const c=d.useCallback(h=>{var u;if(a){const m=nd(h)?h(s):h;m!==s&&((u=o.current)==null||u.call(o,m))}else r(h)},[a,s,r,o]);return[l,c]}function id({defaultProp:s,onChange:t}){const[e,i]=d.useState(s),n=d.useRef(e),r=d.useRef(t);return sd(()=>{r.current=t},[t]),d.useEffect(()=>{var o;n.current!==e&&((o=r.current)==null||o.call(r,e),n.current=e)},[e,n]),[e,i,r]}function nd(s){return typeof s=="function"}var rd=d.createContext(void 0);function Ga(s){const t=d.useContext(rd);return s||t||"ltr"}var $i="rovingFocusGroup.onEntryFocus",od={bubbles:!1,cancelable:!0},vs="RovingFocusGroup",[Sn,Ha,ad]=Ku(vs),[ld,Ka]=Hn(vs,[ad]),[cd,hd]=ld(vs),Ja=d.forwardRef((s,t)=>f.jsx(Sn.Provider,{scope:s.__scopeRovingFocusGroup,children:f.jsx(Sn.Slot,{scope:s.__scopeRovingFocusGroup,children:f.jsx(ud,{...s,ref:t})})}));Ja.displayName=vs;var ud=d.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,orientation:i,loop:n=!1,dir:r,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:h=!1,...u}=s,m=d.useRef(null),g=li(t,m),y=Ga(r),[w,b]=Qa({prop:o,defaultProp:a??null,onChange:l,caller:vs}),[S,_]=d.useState(!1),N=ed(c),k=Ha(e),P=d.useRef(!1),[E,z]=d.useState(0);return d.useEffect(()=>{const O=m.current;if(O)return O.addEventListener($i,N),()=>O.removeEventListener($i,N)},[N]),f.jsx(cd,{scope:e,orientation:i,dir:y,loop:n,currentTabStopId:w,onItemFocus:d.useCallback(O=>b(O),[b]),onItemShiftTab:d.useCallback(()=>_(!0),[]),onFocusableItemAdd:d.useCallback(()=>z(O=>O+1),[]),onFocusableItemRemove:d.useCallback(()=>z(O=>O-1),[]),children:f.jsx($e.div,{tabIndex:S||E===0?-1:0,"data-orientation":i,...u,ref:g,style:{outline:"none",...s.style},onMouseDown:qt(s.onMouseDown,()=>{P.current=!0}),onFocus:qt(s.onFocus,O=>{const j=!P.current;if(O.target===O.currentTarget&&j&&!S){const F=new CustomEvent($i,od);if(O.currentTarget.dispatchEvent(F),!F.defaultPrevented){const Z=k().filter(tt=>tt.focusable),T=Z.find(tt=>tt.active),U=Z.find(tt=>tt.id===w),H=[T,U,...Z].filter(Boolean).map(tt=>tt.ref.current);el(H,h)}}P.current=!1}),onBlur:qt(s.onBlur,()=>_(!1))})})}),qa="RovingFocusGroupItem",tl=d.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:e,focusable:i=!0,active:n=!1,tabStopId:r,children:o,...a}=s,l=Xa(),c=r||l,h=hd(qa,e),u=h.currentTabStopId===c,m=Ha(e),{onFocusableItemAdd:g,onFocusableItemRemove:y,currentTabStopId:w}=h;return d.useEffect(()=>{if(i)return g(),()=>y()},[i,g,y]),f.jsx(Sn.ItemSlot,{scope:e,id:c,focusable:i,active:n,children:f.jsx($e.span,{tabIndex:u?0:-1,"data-orientation":h.orientation,...a,ref:t,onMouseDown:qt(s.onMouseDown,b=>{i?h.onItemFocus(c):b.preventDefault()}),onFocus:qt(s.onFocus,()=>h.onItemFocus(c)),onKeyDown:qt(s.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const S=md(b,h.orientation,h.dir);if(S!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let N=m().filter(k=>k.focusable).map(k=>k.ref.current);if(S==="last")N.reverse();else if(S==="prev"||S==="next"){S==="prev"&&N.reverse();const k=N.indexOf(b.currentTarget);N=h.loop?pd(N,k+1):N.slice(k+1)}setTimeout(()=>el(N))}}),children:typeof o=="function"?o({isCurrentTabStop:u,hasTabStop:w!=null}):o})})});tl.displayName=qa;var dd={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fd(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function md(s,t,e){const i=fd(s.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return dd[i]}function el(s,t=!1){const e=document.activeElement;for(const i of s)if(i===e||(i.focus({preventScroll:t}),document.activeElement!==e))return}function pd(s,t){return s.map((e,i)=>s[(t+i)%s.length])}var gd=Ja,vd=tl;function yd(s,t){return d.useReducer((e,i)=>t[e][i]??e,s)}var sl=s=>{const{present:t,children:e}=s,i=bd(t),n=typeof e=="function"?e({present:i.isPresent}):d.Children.only(e),r=li(i.ref,wd(n));return typeof e=="function"||i.isPresent?d.cloneElement(n,{ref:r}):null};sl.displayName="Presence";function bd(s){const[t,e]=d.useState(),i=d.useRef(null),n=d.useRef(s),r=d.useRef("none"),o=s?"mounted":"unmounted",[a,l]=yd(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const c=Es(i.current);r.current=a==="mounted"?c:"none"},[a]),ci(()=>{const c=i.current,h=n.current;if(h!==s){const m=r.current,g=Es(c);s?l("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),n.current=s}},[s,l]),ci(()=>{if(t){let c;const h=t.ownerDocument.defaultView??window,u=g=>{const w=Es(i.current).includes(g.animationName);if(g.target===t&&w&&(l("ANIMATION_END"),!n.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",c=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},m=g=>{g.target===t&&(r.current=Es(i.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{h.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:d.useCallback(c=>{i.current=c?getComputedStyle(c):null,e(c)},[])}}function Es(s){return(s==null?void 0:s.animationName)||"none"}function wd(s){var i,n;let t=(i=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:i.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?s.props.ref:s.props.ref||s.ref)}var _i="Tabs",[xd,zp]=Hn(_i,[Ka]),il=Ka(),[_d,Kn]=xd(_i),nl=d.forwardRef((s,t)=>{const{__scopeTabs:e,value:i,onValueChange:n,defaultValue:r,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=s,h=Ga(a),[u,m]=Qa({prop:i,onChange:n,defaultProp:r??"",caller:_i});return f.jsx(_d,{scope:e,baseId:Xa(),value:u,onValueChange:m,orientation:o,dir:h,activationMode:l,children:f.jsx($e.div,{dir:h,"data-orientation":o,...c,ref:t})})});nl.displayName=_i;var rl="TabsList",ol=d.forwardRef((s,t)=>{const{__scopeTabs:e,loop:i=!0,...n}=s,r=Kn(rl,e),o=il(e);return f.jsx(gd,{asChild:!0,...o,orientation:r.orientation,dir:r.dir,loop:i,children:f.jsx($e.div,{role:"tablist","aria-orientation":r.orientation,...n,ref:t})})});ol.displayName=rl;var al="TabsTrigger",ll=d.forwardRef((s,t)=>{const{__scopeTabs:e,value:i,disabled:n=!1,...r}=s,o=Kn(al,e),a=il(e),l=ul(o.baseId,i),c=dl(o.baseId,i),h=i===o.value;return f.jsx(vd,{asChild:!0,...a,focusable:!n,active:h,children:f.jsx($e.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":c,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:l,...r,ref:t,onMouseDown:qt(s.onMouseDown,u=>{!n&&u.button===0&&u.ctrlKey===!1?o.onValueChange(i):u.preventDefault()}),onKeyDown:qt(s.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&o.onValueChange(i)}),onFocus:qt(s.onFocus,()=>{const u=o.activationMode!=="manual";!h&&!n&&u&&o.onValueChange(i)})})})});ll.displayName=al;var cl="TabsContent",hl=d.forwardRef((s,t)=>{const{__scopeTabs:e,value:i,forceMount:n,children:r,...o}=s,a=Kn(cl,e),l=ul(a.baseId,i),c=dl(a.baseId,i),h=i===a.value,u=d.useRef(h);return d.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),f.jsx(sl,{present:n||h,children:({present:m})=>f.jsx($e.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:c,tabIndex:0,...o,ref:t,style:{...s.style,animationDuration:u.current?"0s":void 0},children:m&&r})})});hl.displayName=cl;function ul(s,t){return`${s}-trigger-${t}`}function dl(s,t){return`${s}-content-${t}`}var Sd=nl,fl=ol,ml=ll,pl=hl;const Cd=Sd,gl=d.forwardRef(({className:s,...t},e)=>f.jsx(fl,{ref:e,className:lt("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...t}));gl.displayName=fl.displayName;const Cn=d.forwardRef(({className:s,...t},e)=>f.jsx(ml,{ref:e,className:lt("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...t}));Cn.displayName=ml.displayName;const Ed=d.forwardRef(({className:s,...t},e)=>f.jsx(pl,{ref:e,className:lt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));Ed.displayName=pl.displayName;function ot(s){var t=s.width,e=s.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(e<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:e}}function de(s,t){return s.width===t.width&&s.height===t.height}var kd=function(){function s(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(n){return n!==i})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},s}();function Td(s){return new kd(s)}var Nd=function(){function s(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=ot({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=e??function(r){return r},this._allowResizeObserver=(n=i==null?void 0:i.allowResizeObserver)!==null&&n!==void 0?n:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var t,e;if(this._canvasElement===null)throw new Error("Object is disposed");(t=this._canvasElementResizeObserver)===null||t===void 0||t.disconnect(),this._canvasElementResizeObserver=null,(e=this._devicePixelRatioObservable)===null||e===void 0||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return ot({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=ot(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(t){var e=this.bitmapSize;de(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},s.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=ot(this._transformBitmapSize(t,this._canvasElementClientSize)),n=de(this.bitmapSize,i)?null:i;e===null&&n===null||e!==null&&n!==null&&de(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},s.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(n){return n.call(i,t,e)})},s.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}Md().then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var t=this;if(this._canvasElement!==null){var e=Dr(this._canvasElement);if(e===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=Td(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var t,e;if(this._canvasElement!==null){var i=Dr(this._canvasElement);if(i!==null){var n=(e=(t=this._devicePixelRatioObservable)===null||t===void 0?void 0:t.value)!==null&&e!==void 0?e:i.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?Ad(r[0],n):ot({width:this._canvasElementClientSize.width*n,height:this._canvasElementClientSize.height*n});this._suggestNewBitmapSize(o)}}},s.prototype._initResizeObserver=function(){var t=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(o){return o.target===t._canvasElement});if(!(!i||!i.devicePixelContentBoxSize||!i.devicePixelContentBoxSize[0])){var n=i.devicePixelContentBoxSize[0],r=ot({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s}();function Rd(s,t){if(t.type==="device-pixel-content-box")return new Nd(s,t.transform,t.options);throw new Error("Unsupported binding target")}function Dr(s){return s.ownerDocument.defaultView}function Md(){return new Promise(function(s){var t=new ResizeObserver(function(e){s(e.every(function(i){return"devicePixelContentBoxSize"in i})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function Ad(s,t){return ot({width:Math.round(s.left*t+s.width*t)-Math.round(s.left*t),height:Math.round(s.top*t+s.height*t)-Math.round(s.top*t)})}var Pd=function(){function s(t,e,i){if(e.width===0||e.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,i.width===0||i.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return s.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s}();function pe(s,t){var e=s.canvasElementClientSize;if(e.width===0||e.height===0)return null;var i=s.bitmapSize;if(i.width===0||i.height===0)return null;var n=s.canvasElement.getContext("2d",t);return n===null?null:new Pd(n,e,i)}/*!
 * @license
 * TradingView Lightweight Charts™ v5.0.7
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const vl={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Lr,jr;function De(s,t){const e={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[t];s.setLineDash(e)}function yl(s,t,e,i){s.beginPath();const n=s.lineWidth%2?.5:0;s.moveTo(e,t+n),s.lineTo(i,t+n),s.stroke()}function xt(s,t){if(!s)throw new Error("Assertion failed"+(t?": "+t:""))}function Mt(s){if(s===void 0)throw new Error("Value is undefined");return s}function A(s){if(s===null)throw new Error("Value is null");return s}function le(s){return A(Mt(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})(Lr||(Lr={})),function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"}(jr||(jr={}));class ft{constructor(){this.t=[]}i(t,e,i){const n={h:t,l:e,o:i===!0};this.t.push(n)}_(t){const e=this.t.findIndex(i=>t===i.h);e>-1&&this.t.splice(e,1)}u(t){this.t=this.t.filter(e=>e.l!==t)}p(t,e,i){const n=[...this.t];this.t=this.t.filter(r=>!r.o),n.forEach(r=>r.h(t,e,i))}v(){return this.t.length>0}m(){this.t=[]}}function Pt(s,...t){for(const e of t)for(const i in e)e[i]!==void 0&&Object.prototype.hasOwnProperty.call(e,i)&&!["__proto__","constructor","prototype"].includes(i)&&(typeof e[i]!="object"||s[i]===void 0||Array.isArray(e[i])?s[i]=e[i]:Pt(s[i],e[i]));return s}function Le(s){return typeof s=="number"&&isFinite(s)}function ps(s){return typeof s=="number"&&s%1==0}function ys(s){return typeof s=="string"}function ks(s){return typeof s=="boolean"}function Ht(s){const t=s;if(!t||typeof t!="object")return t;let e,i,n;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(n=t[i],e[i]=n&&typeof n=="object"?Ht(n):n);return e}function Od(s){return s!==null}function En(s){return s===null?void 0:s}const bl="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function hi(s,t,e){return t===void 0&&(t=bl),`${e=e!==void 0?`${e} `:""}${s}px ${t}`}class Id{constructor(t){this.M={S:1,C:5,k:NaN,P:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=t}N(){const t=this.M,e=this.W(),i=this.F();return t.k===e&&t.T===i||(t.k=e,t.T=i,t.P=hi(e,i),t.A=2.5/12*e,t.V=t.A,t.I=e/12*t.C,t.B=e/12*t.C,t.L=0),t.R=this.H(),t.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}W(){return this.O.N().layout.fontSize}F(){return this.O.N().layout.fontFamily}}function Bi(s){return s<0?0:s>255?255:Math.round(s)||0}function Vr(s){return .199*s[0]+.687*s[1]+.114*s[2]}class Dd{constructor(t,e){this.q=new Map,this.Y=t,e&&(this.q=e)}j(t,e){if(t==="transparent")return t;const i=this.K(t),n=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*n})`}X(t){const e=this.K(t);return{Z:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,G:Vr(e)>160?"black":"white"}}J(t){return Vr(this.K(t))}tt(t,e,i){const[n,r,o,a]=this.K(t),[l,c,h,u]=this.K(e),m=[Bi(n+i*(l-n)),Bi(r+i*(c-r)),Bi(o+i*(h-o)),(g=a+i*(u-a),g<=0||g>1?Math.min(Math.max(g,0),1):Math.round(1e4*g)/1e4)];var g;return`rgba(${m[0]}, ${m[1]}, ${m[2]}, ${m[3]})`}K(t){const e=this.q.get(t);if(e)return e;const i=function(o){const a=document.createElement("div");a.style.display="none",document.body.appendChild(a),a.style.color=o;const l=window.getComputedStyle(a).color;return document.body.removeChild(a),l}(t),n=i.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.Y.length)for(const o of this.Y){const a=o(t);if(a)return this.q.set(t,a),a}throw new Error(`Failed to parse color: ${t}`)}const r=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(t,r),r}}class Ld{constructor(){this.it=[]}st(t){this.it=t}nt(t,e,i){this.it.forEach(n=>{n.nt(t,e,i)})}}class Be{nt(t,e,i){t.useBitmapCoordinateSpace(n=>this.et(n,e,i))}}class jd extends Be{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(this.rt===null||this.rt.lt===null)return;const n=this.rt.lt,r=this.rt,o=Math.max(1,Math.floor(e))%2/2,a=l=>{t.beginPath();for(let c=n.to-1;c>=n.from;--c){const h=r.ot[c],u=Math.round(h._t*e)+o,m=h.ut*i,g=l*i+o;t.moveTo(u,m),t.arc(u,m,g,0,2*Math.PI)}t.fill()};r.ct>0&&(t.fillStyle=r.dt,a(r.ft+r.ct)),t.fillStyle=r.vt,a(r.ft)}}function Vd(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const zd={from:0,to:1};class Fd{constructor(t,e,i){this.Mt=new Ld,this.bt=[],this.St=[],this.xt=!0,this.O=t,this.Ct=e,this.yt=i,this.Mt.st(this.bt)}kt(t){this.Pt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}Pt(){const t=this.yt.Dt();t.length!==this.bt.length&&(this.St=t.map(Vd),this.bt=this.St.map(e=>{const i=new jd;return i.ht(e),i}),this.Mt.st(this.bt))}Rt(){const t=this.Ct.N().mode===2||!this.Ct.Vt(),e=this.yt.It(),i=this.Ct.Bt(),n=this.O.At();this.Pt(),e.forEach((r,o)=>{const a=this.St[o],l=r.Et(i),c=r.zt();!t&&l!==null&&r.Vt()&&c!==null?(a.vt=l.Lt,a.ft=l.ft,a.ct=l.Ot,a.ot[0].gt=l.gt,a.ot[0].ut=r.Wt().Nt(l.gt,c.Ft),a.dt=l.Ht??this.O.Ut(a.ot[0].ut/r.Wt().$t()),a.ot[0].wt=i,a.ot[0]._t=n.qt(i),a.lt=zd):a.lt=null})}}class $d extends Be{constructor(t){super(),this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Yt===null)return;const r=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!r&&!o)return;const a=Math.round(this.Yt._t*i),l=Math.round(this.Yt.ut*n);t.lineCap="butt",r&&a>=0&&(t.lineWidth=Math.floor(this.Yt.jt.ct*i),t.strokeStyle=this.Yt.jt.R,t.fillStyle=this.Yt.jt.R,De(t,this.Yt.jt.Xt),function(c,h,u,m){c.beginPath();const g=c.lineWidth%2?.5:0;c.moveTo(h+g,u),c.lineTo(h+g,m),c.stroke()}(t,a,0,e.height)),o&&l>=0&&(t.lineWidth=Math.floor(this.Yt.Kt.ct*n),t.strokeStyle=this.Yt.Kt.R,t.fillStyle=this.Yt.Kt.R,De(t,this.Yt.Kt.Xt),yl(t,l,0,e.width))}}class Bd{constructor(t,e){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new $d(this.Zt),this.Jt=t,this.yt=e}kt(){this.xt=!0}Tt(t){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const t=this.Jt.Vt(),e=this.yt.Qt().N().crosshair,i=this.Zt;if(e.mode===2)return i.Kt.Vt=!1,void(i.jt.Vt=!1);i.Kt.Vt=t&&this.Jt.ti(this.yt),i.jt.Vt=t&&this.Jt.ii(),i.Kt.ct=e.horzLine.width,i.Kt.Xt=e.horzLine.style,i.Kt.R=e.horzLine.color,i.jt.ct=e.vertLine.width,i.jt.Xt=e.vertLine.style,i.jt.R=e.vertLine.color,i._t=this.Jt.si(),i.ut=this.Jt.ni()}}function Si(s,t,e,i,n,r){s.save(),s.globalCompositeOperation="copy",s.fillStyle=r,s.fillRect(t,e,i,n),s.restore()}function zr(s,t,e,i,n,r){s.beginPath(),s.roundRect?s.roundRect(t,e,i,n,r):(s.lineTo(t+i-r[1],e),r[1]!==0&&s.arcTo(t+i,e,t+i,e+r[1],r[1]),s.lineTo(t+i,e+n-r[2]),r[2]!==0&&s.arcTo(t+i,e+n,t+i-r[2],e+n,r[2]),s.lineTo(t+r[3],e+n),r[3]!==0&&s.arcTo(t,e+n,t,e+n-r[3],r[3]),s.lineTo(t,e+r[0]),r[0]!==0&&s.arcTo(t,e,t+r[0],e,r[0]))}function Fr(s,t,e,i,n,r,o=0,a=[0,0,0,0],l=""){if(s.save(),!o||!l||l===r)return zr(s,t,e,i,n,a),s.fillStyle=r,s.fill(),void s.restore();const c=o/2;var h;zr(s,t+c,e+c,i-o,n-o,(h=-c,a.map(u=>u===0?u:u+h))),r!=="transparent"&&(s.fillStyle=r,s.fill()),l!=="transparent"&&(s.lineWidth=o,s.strokeStyle=l,s.closePath(),s.stroke()),s.restore()}function wl(s,t,e,i,n,r,o){s.save(),s.globalCompositeOperation="copy";const a=s.createLinearGradient(0,0,0,n);a.addColorStop(0,r),a.addColorStop(1,o),s.fillStyle=a,s.fillRect(t,e,i,n),s.restore()}class $r{constructor(t,e){this.ht(t,e)}ht(t,e){this.Yt=t,this.ei=e}$t(t,e){return this.Yt.Vt?t.k+t.A+t.V:0}nt(t,e,i,n){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const r=this.Yt.R,o=this.ei.Z,a=t.useBitmapCoordinateSpace(l=>{const c=l.context;c.font=e.P;const h=this.hi(l,e,i,n),u=h.ai;return h.li?Fr(c,u.oi,u._i,u.ui,u.ci,o,u.di,[u.ft,0,0,u.ft],o):Fr(c,u.fi,u._i,u.ui,u.ci,o,u.di,[0,u.ft,u.ft,0],o),this.Yt.pi&&(c.fillStyle=r,c.fillRect(u.fi,u.mi,u.wi-u.fi,u.gi)),this.Yt.Mi&&(c.fillStyle=e.D,c.fillRect(h.li?u.bi-u.di:0,u._i,u.di,u.Si-u._i)),h});t.useMediaCoordinateSpace(({context:l})=>{const c=a.xi;l.font=e.P,l.textAlign=a.li?"right":"left",l.textBaseline="middle",l.fillStyle=r,l.fillText(this.Yt.ri,c.Ci,(c._i+c.Si)/2+c.yi)})}hi(t,e,i,n){const{context:r,bitmapSize:o,mediaSize:a,horizontalPixelRatio:l,verticalPixelRatio:c}=t,h=this.Yt.pi||!this.Yt.ki?e.C:0,u=this.Yt.Pi?e.S:0,m=e.A+this.ei.Ti,g=e.V+this.ei.Ri,y=e.I,w=e.B,b=this.Yt.ri,S=e.k,_=i.Di(r,b),N=Math.ceil(i.Vi(r,b)),k=S+m+g,P=e.S+y+w+N+h,E=Math.max(1,Math.floor(c));let z=Math.round(k*c);z%2!=E%2&&(z+=1);const O=u>0?Math.max(1,Math.floor(u*l)):0,j=Math.round(P*l),F=Math.round(h*l),Z=this.ei.Ii??this.ei.Bi,T=Math.round(Z*c)-Math.floor(.5*c),U=Math.floor(T+E/2-z/2),B=U+z,H=n==="right",tt=H?a.width-u:u,nt=H?o.width-O:O;let ht,ct,vt;return H?(ht=nt-j,ct=nt-F,vt=tt-h-y-u):(ht=nt+j,ct=nt+F,vt=tt+h+y),{li:H,ai:{_i:U,mi:T,Si:B,ui:j,ci:z,ft:2*l,di:O,oi:ht,fi:nt,wi:ct,gi:E,bi:o.width},xi:{_i:U/c,Si:B/c,Ci:vt,yi:_}}}}class Ci{constructor(t){this.Ai={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ei={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,Pi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,Pi:!0},this.xt=!0,this.Li=new(t||$r)(this.Ei,this.Ai),this.Oi=new(t||$r)(this.zi,this.Ai)}ri(){return this.Ni(),this.Ei.ri}Bi(){return this.Ni(),this.Ai.Bi}kt(){this.xt=!0}$t(t,e=!1){return Math.max(this.Li.$t(t,e),this.Oi.$t(t,e))}Wi(){return this.Ai.Ii||0}Fi(t){this.Ai.Ii=t}Hi(){return this.Ni(),this.Ei.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ei.Vt}Tt(t){return this.Ni(),this.Ei.pi=this.Ei.pi&&t.N().ticksVisible,this.zi.pi=this.zi.pi&&t.N().ticksVisible,this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ei,this.Ai),this.Oi.ht(this.zi,this.Ai),this.Oi}Ni(){this.xt&&(this.Ei.pi=!0,this.zi.pi=!1,this.qi(this.Ei,this.zi,this.Ai))}}class Wd extends Ci{constructor(t,e,i){super(),this.Jt=t,this.Yi=e,this.ji=i}qi(t,e,i){if(t.Vt=!1,this.Jt.N().mode===2)return;const n=this.Jt.N().horzLine;if(!n.labelVisible)return;const r=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||r===null)return;const o=this.Yi.Xi().X(n.labelBackgroundColor);i.Z=o.Z,t.R=o.G;const a=2/12*this.Yi.k();i.Ti=a,i.Ri=a;const l=this.ji(this.Yi);i.Bi=l.Bi,t.ri=this.Yi.Zi(l.gt,r),t.Vt=!0}}const Yd=/[1-9]/g;class xl{constructor(){this.Yt=null}ht(t){this.Yt=t}nt(t,e){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const i=t.useMediaCoordinateSpace(({context:m})=>(m.font=e.P,Math.round(e.Gi.Vi(m,A(this.Yt).ri,Yd))));if(i<=0)return;const n=e.Ji,r=i+2*n,o=r/2,a=this.Yt.Qi;let l=this.Yt.Bi,c=Math.floor(l-o)+.5;c<0?(l+=Math.abs(0-c),c=Math.floor(l-o)+.5):c+r>a&&(l-=Math.abs(a-(c+r)),c=Math.floor(l-o)+.5);const h=c+r,u=Math.ceil(0+e.S+e.C+e.A+e.k+e.V);t.useBitmapCoordinateSpace(({context:m,horizontalPixelRatio:g,verticalPixelRatio:y})=>{const w=A(this.Yt);m.fillStyle=w.Z;const b=Math.round(c*g),S=Math.round(0*y),_=Math.round(h*g),N=Math.round(u*y),k=Math.round(2*g);if(m.beginPath(),m.moveTo(b,S),m.lineTo(b,N-k),m.arcTo(b,N,b+k,N,k),m.lineTo(_-k,N),m.arcTo(_,N,_,N-k,k),m.lineTo(_,S),m.fill(),w.pi){const P=Math.round(w.Bi*g),E=S,z=Math.round((E+e.C)*y);m.fillStyle=w.R;const O=Math.max(1,Math.floor(g)),j=Math.floor(.5*g);m.fillRect(P-j,E,O,z-E)}}),t.useMediaCoordinateSpace(({context:m})=>{const g=A(this.Yt),y=0+e.S+e.C+e.A+e.k/2;m.font=e.P,m.textAlign="left",m.textBaseline="middle",m.fillStyle=g.R;const w=e.Gi.Di(m,"Apr0");m.translate(c+n,y+w),m.fillText(g.ri,0,0)})}}class Ud{constructor(t,e,i){this.xt=!0,this.Gt=new xl,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=t,this.ts=e,this.ji=i}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const t=this.Zt;if(t.Vt=!1,this.Ct.N().mode===2)return;const e=this.Ct.N().vertLine;if(!e.labelVisible)return;const i=this.ts.At();if(i.Ki())return;t.Qi=i.Qi();const n=this.ji();if(n===null)return;t.Bi=n.Bi;const r=i.ss(this.Ct.Bt());t.ri=i.ns(A(r)),t.Vt=!0;const o=this.ts.Xi().X(e.labelBackgroundColor);t.Z=o.Z,t.R=o.G,t.pi=i.N().ticksVisible}}class _l{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(t){this.rs=t}Wt(){return this.es}_s(t){this.es=t}us(t){return[]}cs(){return[]}Vt(){return!0}}var Br;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet",s[s.Hidden=2]="Hidden",s[s.MagnetOHLC=3]="MagnetOHLC"})(Br||(Br={}));class Zd extends _l{constructor(t,e){super(),this.yt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=t,this.ys=e,this.ks=((n,r)=>o=>{const a=r(),l=n();if(o===A(this.yt).Ps())return{gt:l,Bi:a};{const c=A(o.zt());return{gt:o.Ts(a,c),Bi:a}}})(()=>this.ds,()=>this.Ss);const i=((n,r)=>()=>{const o=this.ts.At().Rs(n()),a=r();return o&&Number.isFinite(a)?{wt:o,Bi:a}:null})(()=>this.fs,()=>this.si());this.Ds=new Ud(this,t,i)}N(){return this.ys}Vs(t,e){this.xs=t,this.Cs=e}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}As(){return this.Cs}Es(t,e,i){this.ws||(this.ws=!0),this.ps=!0,this.zs(t,e,i)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.yt=null,this.Is(),this.Ns()}Ws(t){let e=this.gs.get(t);e||(e=new Bd(this,t),this.gs.set(t,e));let i=this.Ms.get(t);return i||(i=new Fd(this.ts,this,t),this.Ms.set(t,i)),[e,i]}ti(t){return t===this.yt&&this.ys.horzLine.visible}ii(){return this.ys.vertLine.visible}Fs(t,e){this.ps&&this.yt===t||this.vs.clear();const i=[];return this.yt===t&&i.push(this.Hs(this.vs,e,this.ks)),i}cs(){return this.ps?[this.Ds]:[]}Us(){return this.yt}Ns(){this.ts.$s().forEach(t=>{var e,i;(e=this.gs.get(t))==null||e.kt(),(i=this.Ms.get(t))==null||i.kt()}),this.vs.forEach(t=>t.kt()),this.Ds.kt()}qs(t){return t&&!t.Ps().Ki()?t.Ps():null}zs(t,e,i){this.Ys(t,e,i)&&this.Ns()}Ys(t,e,i){const n=this.bs,r=this.Ss,o=this.ds,a=this.fs,l=this.yt,c=this.qs(i);this.fs=t,this.bs=isNaN(t)?NaN:this.ts.At().qt(t),this.yt=i;const h=c!==null?c.zt():null;return c!==null&&h!==null?(this.ds=e,this.Ss=c.Nt(e,h)):(this.ds=NaN,this.Ss=NaN),n!==this.bs||r!==this.Ss||a!==this.fs||o!==this.ds||l!==this.yt}Os(){const t=this.ts.js().map(i=>i.Xs().Ks()).filter(Od),e=t.length===0?null:Math.max(...t);this.fs=e!==null?e:NaN}Hs(t,e,i){let n=t.get(e);return n===void 0&&(n=new Wd(this,e,i),t.set(e,n)),n}}function Ei(s){return s==="left"||s==="right"}class wt{constructor(t){this.Zs=new Map,this.Gs=[],this.Js=t}Qs(t,e){const i=function(n,r){return n===void 0?r:{tn:Math.max(n.tn,r.tn),sn:n.sn||r.sn}}(this.Zs.get(t),e);this.Zs.set(t,i)}nn(){return this.Js}en(t){const e=this.Zs.get(t);return e===void 0?{tn:this.Js}:{tn:Math.max(this.Js,e.tn),sn:e.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(t){this.hn(),this.Gs=[{an:1,Ft:t}]}_n(t){this.un(),this.Gs.push({an:5,Ft:t})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(t){this.hn(),this.Gs.push({an:2,Ft:t})}fn(t){this.hn(),this.Gs.push({an:3,Ft:t})}pn(){return this.Gs}vn(t){for(const e of t.Gs)this.mn(e);this.Js=Math.max(this.Js,t.Js),t.Zs.forEach((e,i)=>{this.Qs(i,e)})}static wn(){return new wt(2)}static gn(){return new wt(3)}mn(t){switch(t.an){case 0:this.rn();break;case 1:this.ln(t.Ft);break;case 2:this.dn(t.Ft);break;case 3:this.fn(t.Ft);break;case 4:this.cn();break;case 5:this._n(t.Ft);break;case 6:this.un()}}un(){const t=this.Gs.findIndex(e=>e.an===5);t!==-1&&this.Gs.splice(t,1)}}const Wr=".";function Kt(s,t){if(!Le(s))return"n/a";if(!ps(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return t===0?s.toString():("0000000000000000"+s.toString()).slice(-t)}class ki{constructor(t,e){if(e||(e=1),Le(t)&&ps(t)||(t=100),t<0)throw new TypeError("invalid base");this.Yi=t,this.Mn=e,this.bn()}format(t){const e=t<0?"−":"";return t=Math.abs(t),e+this.Sn(t)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let t=this.Yi;for(;t>1;)t/=10,this.xn++}}Sn(t){const e=this.Yi/this.Mn;let i=Math.floor(t),n="";const r=this.xn!==void 0?this.xn:NaN;if(e>1){let o=+(Math.round(t*e)-i*e).toFixed(this.xn);o>=e&&(o-=e,i+=1),n=Wr+Kt(+o.toFixed(this.xn)*this.Mn,r)}else i=Math.round(i*e)/e,r>0&&(n=Wr+Kt(0,r));return i.toFixed(0)+n}}class Sl extends ki{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class Xd{constructor(t){this.Cn=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.yn(t):t<999995?e+this.yn(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.yn(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.yn(t/1e9)+"B")}yn(t){let e;const i=Math.pow(10,this.Cn);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Cn).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,(n,r)=>r)}}const Qd=/[2-9]/g;class ui{constructor(t=50){this.kn=0,this.Pn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=t}In(){this.kn=0,this.Dn.clear(),this.Pn=1,this.Tn=1,this.Rn={}}Vi(t,e,i){return this.Bn(t,e,i).width}Di(t,e,i){const n=this.Bn(t,e,i);return((n.actualBoundingBoxAscent||0)-(n.actualBoundingBoxDescent||0))/2}Bn(t,e,i){const n=i||Qd,r=String(e).replace(n,"0");if(this.Dn.has(r))return Mt(this.Dn.get(r)).An;if(this.kn===this.Vn){const a=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(a),this.Tn++,this.kn--}t.save(),t.textBaseline="middle";const o=t.measureText(r);return t.restore(),o.width===0&&e.length||(this.Dn.set(r,{An:o,En:this.Pn}),this.Rn[this.Pn]=r,this.kn++,this.Pn++),o}}class Gd{constructor(t){this.zn=null,this.M=null,this.Ln="right",this.On=t}Nn(t,e,i){this.zn=t,this.M=e,this.Ln=i}nt(t){this.M!==null&&this.zn!==null&&this.zn.nt(t,this.M,this.On,this.Ln)}}class Cl{constructor(t,e,i){this.Wn=t,this.On=new ui(50),this.Fn=e,this.O=i,this.W=-1,this.Gt=new Gd(this.On)}Tt(){const t=this.O.Hn(this.Fn);if(t===null)return null;const e=t.Un(this.Fn)?t.$n():this.Fn.Wt();if(e===null)return null;const i=t.qn(e);if(i==="overlay")return null;const n=this.O.Yn();return n.k!==this.W&&(this.W=n.k,this.On.In()),this.Gt.Nn(this.Wn.$i(),n,i),this.Gt}}class Hd extends Be{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}jn(t,e){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:i,ct:n,Kn:r}=this.Yt;return e>=i-n-7&&e<=i+n+7?{Xn:this.Yt,Kn:r}:null}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Yt===null||this.Yt.Vt===!1)return;const r=Math.round(this.Yt.ut*n);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.Yt.R,t.lineWidth=Math.floor(this.Yt.ct*i),De(t,this.Yt.Xt),yl(t,r,0,e.width))}}class Jn{constructor(t){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new Hd,this.xt=!0,this.Jn=t,this.Qn=t.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class Kd extends Jn{constructor(t){super(t)}te(){this.Zn.Vt=!1;const t=this.Jn.Wt(),e=t.ie().ie;if(e!==2&&e!==3)return;const i=this.Jn.N();if(!i.baseLineVisible||!this.Jn.Vt())return;const n=this.Jn.zt();n!==null&&(this.Zn.Vt=!0,this.Zn.ut=t.Nt(n.Ft,n.Ft),this.Zn.R=i.baseLineColor,this.Zn.ct=i.baseLineWidth,this.Zn.Xt=i.baseLineStyle)}}class Jd extends Be{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}se(){return this.Yt}et({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const n=this.Yt;if(n===null)return;const r=Math.max(1,Math.floor(e)),o=r%2/2,a=Math.round(n.ne.x*e)+o,l=n.ne.y*i;t.fillStyle=n.ee,t.beginPath();const c=Math.max(2,1.5*n.re)*e;t.arc(a,l,c,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.he,t.beginPath(),t.arc(a,l,n.ft*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=n.ae,t.beginPath(),t.arc(a,l,n.ft*e+r/2,0,2*Math.PI,!1),t.stroke()}}const qd=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class tf{constructor(t){this.Gt=new Jd,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=t}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const t=performance.now(),e=this.we-t;if(e>0)return void(e<650&&(this.we+=2600));this.me=t,this.we=t+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const t=this.ge.Qt().At(),e=t.ye(),i=this.ge.zt();if(e===null||i===null)return;const n=this.ge.ke(!0);if(n.Pe||!e.Te(n.Re))return;const r={x:t.qt(n.Re),y:this.ge.Wt().Nt(n.gt,i.Ft)},o=n.R,a=this.ge.N().lineWidth,l=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:a,he:l.he,ae:l.ae,ft:l.ft,ne:r})}Ce(){const t=this.Gt.se();if(t!==null){const e=this.De(this.Ve(),t.ee);t.he=e.he,t.ae=e.ae,t.ft=e.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(t,e,i,n){const r=i+(n-i)*e;return this.ge.Qt().Xi().j(t,r)}De(t,e){const i=t%2600/2600;let n;for(const c of qd)if(i>=c.le&&i<=c.oe){n=c;break}xt(n!==void 0,"Last price animation internal logic error");const r=(i-n.le)/(n.oe-n.le);return{he:this.Ie(e,r,n.ce,n.de),ae:this.Ie(e,r,n.fe,n.pe),ft:(o=r,a=n._e,l=n.ue,a+(l-a)*o)};var o,a,l}}class ef extends Jn{constructor(t){super(t)}te(){const t=this.Zn;t.Vt=!1;const e=this.Jn.N();if(!e.priceLineVisible||!this.Jn.Vt())return;const i=this.Jn.ke(e.priceLineSource===0);i.Pe||(t.Vt=!0,t.ut=i.Bi,t.R=this.Jn.Be(i.R),t.ct=e.priceLineWidth,t.Xt=e.priceLineStyle)}}class sf extends Ci{constructor(t){super(),this.Jt=t}qi(t,e,i){t.Vt=!1,e.Vt=!1;const n=this.Jt;if(!n.Vt())return;const r=n.N(),o=r.lastValueVisible,a=n.Ae()!=="",l=r.seriesLastValueMode===0,c=n.ke(!1);if(c.Pe)return;o&&(t.ri=this.Ee(c,o,l),t.Vt=t.ri.length!==0),(a||l)&&(e.ri=this.ze(c,o,a,l),e.Vt=e.ri.length>0);const h=n.Be(c.R),u=this.Jt.Qt().Xi().X(h);i.Z=u.Z,i.Bi=c.Bi,e.Ht=n.Qt().Ut(c.Bi/n.Wt().$t()),t.Ht=h,t.R=u.G,e.R=u.G}ze(t,e,i,n){let r="";const o=this.Jt.Ae();return i&&o.length!==0&&(r+=`${o} `),e&&n&&(r+=this.Jt.Wt().Le()?t.Oe:t.Ne),r.trim()}Ee(t,e,i){return e?i?this.Jt.Wt().Le()?t.Ne:t.Oe:t.ri:""}}function Yr(s,t,e,i){const n=Number.isFinite(t),r=Number.isFinite(e);return n&&r?s(t,e):n||r?n?t:e:i}class Et{constructor(t,e){this.We=t,this.Fe=e}He(t){return t!==null&&this.We===t.We&&this.Fe===t.Fe}Ue(){return new Et(this.We,this.Fe)}$e(){return this.We}qe(){return this.Fe}Ye(){return this.Fe-this.We}Ki(){return this.Fe===this.We||Number.isNaN(this.Fe)||Number.isNaN(this.We)}vn(t){return t===null?this:new Et(Yr(Math.min,this.$e(),t.$e(),-1/0),Yr(Math.max,this.qe(),t.qe(),1/0))}je(t){if(!Le(t)||this.Fe-this.We===0)return;const e=.5*(this.Fe+this.We);let i=this.Fe-e,n=this.We-e;i*=t,n*=t,this.Fe=e+i,this.We=e+n}Ke(t){Le(t)&&(this.Fe+=t,this.We+=t)}Xe(){return{minValue:this.We,maxValue:this.Fe}}static Ze(t){return t===null?null:new Et(t.minValue,t.maxValue)}}class di{constructor(t,e){this.Ge=t,this.Je=e||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(t){return t===null?null:new di(Et.Ze(t.priceRange),t.margins)}}class nf extends Jn{constructor(t,e){super(t),this.ir=e}te(){const t=this.Zn;t.Vt=!1;const e=this.ir.N();if(!this.Jn.Vt()||!e.lineVisible)return;const i=this.ir.sr();i!==null&&(t.Vt=!0,t.ut=i,t.R=e.color,t.ct=e.lineWidth,t.Xt=e.lineStyle,t.Kn=this.ir.N().id)}}class rf extends Ci{constructor(t,e){super(),this.ge=t,this.ir=e}qi(t,e,i){t.Vt=!1,e.Vt=!1;const n=this.ir.N(),r=n.axisLabelVisible,o=n.title!=="",a=this.ge;if(!r||!a.Vt())return;const l=this.ir.sr();if(l===null)return;o&&(e.ri=n.title,e.Vt=!0),e.Ht=a.Qt().Ut(l/a.Wt().$t()),t.ri=this.nr(n.price),t.Vt=!0;const c=this.ge.Qt().Xi().X(n.axisLabelColor||n.color);i.Z=c.Z;const h=n.axisLabelTextColor||c.G;t.R=h,e.R=h,i.Bi=l}nr(t){const e=this.ge.zt();return e===null?"":this.ge.Wt().Zi(t,e.Ft)}}class of{constructor(t,e){this.ge=t,this.ys=e,this.er=new nf(t,this),this.Wn=new rf(t,this),this.rr=new Cl(this.Wn,t,t.Qt())}hr(t){Pt(this.ys,t),this.kt(),this.ge.Qt().ar()}N(){return this.ys}lr(){return this.er}_r(){return this.rr}ur(){return this.Wn}kt(){this.er.kt(),this.Wn.kt()}sr(){const t=this.ge,e=t.Wt();if(t.Qt().At().Ki()||e.Ki())return null;const i=t.zt();return i===null?null:e.Nt(this.ys.price,i.Ft)}}class af extends _l{constructor(t){super(),this.ts=t}Qt(){return this.ts}}const lf={Bar:(s,t,e,i)=>{const n=t.upColor,r=t.downColor,o=A(s(e,i)),a=le(o.Ft[0])<=le(o.Ft[3]);return{cr:o.R??(a?n:r)}},Candlestick:(s,t,e,i)=>{const n=t.upColor,r=t.downColor,o=t.borderUpColor,a=t.borderDownColor,l=t.wickUpColor,c=t.wickDownColor,h=A(s(e,i)),u=le(h.Ft[0])<=le(h.Ft[3]);return{cr:h.R??(u?n:r),dr:h.Ht??(u?o:a),pr:h.vr??(u?l:c)}},Custom:(s,t,e,i)=>({cr:A(s(e,i)).R??t.color}),Area:(s,t,e,i)=>{const n=A(s(e,i));return{cr:n.vt??t.lineColor,vt:n.vt??t.lineColor,mr:n.mr??t.topColor,wr:n.wr??t.bottomColor}},Baseline:(s,t,e,i)=>{const n=A(s(e,i));return{cr:n.Ft[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,gr:n.gr??t.topLineColor,Mr:n.Mr??t.bottomLineColor,br:n.br??t.topFillColor1,Sr:n.Sr??t.topFillColor2,Cr:n.Cr??t.bottomFillColor1,yr:n.yr??t.bottomFillColor2}},Line:(s,t,e,i)=>{const n=A(s(e,i));return{cr:n.R??t.color,vt:n.R??t.color}},Histogram:(s,t,e,i)=>({cr:A(s(e,i)).R??t.color})};class cf{constructor(t){this.kr=(e,i)=>i!==void 0?i.Ft:this.ge.Xs().Pr(e),this.ge=t,this.Tr=lf[t.Rr()]}Dr(t,e){return this.Tr(this.kr,this.ge.N(),t,e)}}function El(s,t,e,i,n=0,r=t.length){let o=r-n;for(;0<o;){const a=o>>1,l=n+a;i(t[l],e)===s?(n=l+1,o-=a+1):o=a}return n}const je=El.bind(null,!0),kl=El.bind(null,!1);var Ur;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(Ur||(Ur={}));const oe=30;class hf{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Ar=[]}Er(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(t){return this.Nr(t,0)!==null}Pr(t){return this.Wr(t)}Wr(t,e=0){const i=this.Nr(t,e);return i===null?null:{...this.Fr(i),Re:this.Or(i)}}Hr(){return this.Vr}Ur(t,e,i){if(this.Ki())return null;let n=null;for(const r of i)n=Ts(n,this.$r(t,e,r));return n}ht(t){this.Br.clear(),this.Ir.clear(),this.Vr=t,this.Ar=t.map(e=>e.Re)}qr(){return this.Ar}Or(t){return this.Vr[t].Re}Fr(t){return this.Vr[t]}Nr(t,e){const i=this.Yr(t);if(i===null&&e!==0)switch(e){case-1:return this.jr(t);case 1:return this.Kr(t);default:throw new TypeError("Unknown search mode")}return i}jr(t){let e=this.Xr(t);return e>0&&(e-=1),e!==this.Vr.length&&this.Or(e)<t?e:null}Kr(t){const e=this.Zr(t);return e!==this.Vr.length&&t<this.Or(e)?e:null}Yr(t){const e=this.Xr(t);return e===this.Vr.length||t<this.Vr[e].Re?null:e}Xr(t){return je(this.Vr,t,(e,i)=>e.Re<i)}Zr(t){return kl(this.Vr,t,(e,i)=>e.Re>i)}Gr(t,e,i){let n=null;for(let r=t;r<e;r++){const o=this.Vr[r].Ft[i];Number.isNaN(o)||(n===null?n={Jr:o,Qr:o}:(o<n.Jr&&(n.Jr=o),o>n.Qr&&(n.Qr=o)))}return n}$r(t,e,i){if(this.Ki())return null;let n=null;const r=A(this.Lr()),o=A(this.Ks()),a=Math.max(t,r),l=Math.min(e,o),c=Math.ceil(a/oe)*oe,h=Math.max(c,Math.floor(l/oe)*oe);{const m=this.Xr(a),g=this.Zr(Math.min(l,c,e));n=Ts(n,this.Gr(m,g,i))}let u=this.Ir.get(i);u===void 0&&(u=new Map,this.Ir.set(i,u));for(let m=Math.max(c+1,a);m<h;m+=oe){const g=Math.floor(m/oe);let y=u.get(g);if(y===void 0){const w=this.Xr(g*oe),b=this.Zr((g+1)*oe-1);y=this.Gr(w,b,i),u.set(g,y)}n=Ts(n,y)}{const m=this.Xr(h),g=this.Zr(l);n=Ts(n,this.Gr(m,g,i))}return n}}function Ts(s,t){return s===null?t:t===null?s:{Jr:Math.min(s.Jr,t.Jr),Qr:Math.max(s.Qr,t.Qr)}}class uf{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t)}ih(t,e,i){var n,r;(r=(n=this.th).drawBackground)==null||r.call(n,t)}}class df{constructor(t){this.Dn=null,this.sh=t}Tt(){var i;const t=this.sh.renderer();if(t===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===t)return this.Dn.eh;const e=new uf(t);return this.Dn={nh:t,eh:e},e}rh(){var t,e;return((e=(t=this.sh).zOrder)==null?void 0:e.call(t))??"normal"}}class Tl{constructor(t){this.hh=null,this.ah=t}oh(){return this.ah}Ns(){var t,e;(e=(t=this.ah).updateAllViews)==null||e.call(t)}Ws(){var i,n,r;const t=((n=(i=this.ah).paneViews)==null?void 0:n.call(i))??[];if(((r=this.hh)==null?void 0:r.nh)===t)return this.hh.eh;const e=t.map(o=>new df(o));return this.hh={nh:t,eh:e},e}jn(t,e){var i,n;return((n=(i=this.ah).hitTest)==null?void 0:n.call(i,t,e))??null}}let ff=class extends Tl{us(){return[]}};class mf{constructor(t){this.th=t}nt(t,e,i){this.th.draw(t)}ih(t,e,i){var n,r;(r=(n=this.th).drawBackground)==null||r.call(n,t)}}class Zr{constructor(t){this.Dn=null,this.sh=t}Tt(){var i;const t=this.sh.renderer();if(t===null)return null;if(((i=this.Dn)==null?void 0:i.nh)===t)return this.Dn.eh;const e=new mf(t);return this.Dn={nh:t,eh:e},e}rh(){var t,e;return((e=(t=this.sh).zOrder)==null?void 0:e.call(t))??"normal"}}function Nl(s){var t,e,i;return{ri:s.text(),Bi:s.coordinate(),Ii:(t=s.fixedCoordinate)==null?void 0:t.call(s),R:s.textColor(),Z:s.backColor(),Vt:((e=s.visible)==null?void 0:e.call(s))??!0,pi:((i=s.tickVisible)==null?void 0:i.call(s))??!0}}class pf{constructor(t,e){this.Gt=new xl,this._h=t,this.uh=e}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...Nl(this._h)}),this.Gt}}class gf extends Ci{constructor(t,e){super(),this._h=t,this.Yi=e}qi(t,e,i){const n=Nl(this._h);i.Z=n.Z,t.R=n.R;const r=2/12*this.Yi.k();i.Ti=r,i.Ri=r,i.Bi=n.Bi,i.Ii=n.Ii,t.ri=n.ri,t.Vt=n.Vt,t.pi=n.pi}}class vf extends Tl{constructor(t,e){super(t),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=e}cs(){var n,r,o;const t=((r=(n=this.ah).timeAxisViews)==null?void 0:r.call(n))??[];if(((o=this.dh)==null?void 0:o.nh)===t)return this.dh.eh;const e=this.ge.Qt().At(),i=t.map(a=>new pf(a,e));return this.dh={nh:t,eh:i},i}Fs(){var n,r,o;const t=((r=(n=this.ah).priceAxisViews)==null?void 0:r.call(n))??[];if(((o=this.fh)==null?void 0:o.nh)===t)return this.fh.eh;const e=this.ge.Wt(),i=t.map(a=>new gf(a,e));return this.fh={nh:t,eh:i},i}wh(){var i,n,r;const t=((n=(i=this.ah).priceAxisPaneViews)==null?void 0:n.call(i))??[];if(((r=this.ph)==null?void 0:r.nh)===t)return this.ph.eh;const e=t.map(o=>new Zr(o));return this.ph={nh:t,eh:e},e}gh(){var i,n,r;const t=((n=(i=this.ah).timeAxisPaneViews)==null?void 0:n.call(i))??[];if(((r=this.mh)==null?void 0:r.nh)===t)return this.mh.eh;const e=t.map(o=>new Zr(o));return this.mh={nh:t,eh:e},e}Mh(t,e){var i,n;return((n=(i=this.ah).autoscaleInfo)==null?void 0:n.call(i,t,e))??null}}function Wi(s,t,e,i){s.forEach(n=>{t(n).forEach(r=>{r.rh()===e&&i.push(r)})})}function Yi(s){return s.Ws()}function yf(s){return s.wh()}function bf(s){return s.gh()}const wf=["Area","Line","Baseline"];class Ti extends af{constructor(t,e,i,n,r){super(t),this.Yt=new hf,this.er=new ef(this),this.bh=[],this.Sh=new Kd(this),this.xh=null,this.Ch=null,this.yh=null,this.kh=[],this.ys=i,this.Ph=e;const o=new sf(this);this.vs=[o],this.rr=new Cl(o,this,t),wf.includes(this.Ph)&&(this.xh=new tf(this)),this.Th(),this.sh=n(this,this.Qt(),r)}m(){this.yh!==null&&clearTimeout(this.yh)}Be(t){return this.ys.priceLineColor||t}ke(t){const e={Pe:!0},i=this.Wt();if(this.Qt().At().Ki()||i.Ki()||this.Yt.Ki())return e;const n=this.Qt().At().ye(),r=this.zt();if(n===null||r===null)return e;let o,a;if(t){const u=this.Yt.Er();if(u===null)return e;o=u,a=u.Re}else{const u=this.Yt.Wr(n.bi(),-1);if(u===null||(o=this.Yt.Pr(u.Re),o===null))return e;a=u.Re}const l=o.Ft[3],c=this.Rh().Dr(a,{Ft:o}),h=i.Nt(l,r.Ft);return{Pe:!1,gt:l,ri:i.Zi(l,r.Ft),Oe:i.Dh(l),Ne:i.Vh(l,r.Ft),R:c.cr,Bi:h,Re:a}}Rh(){return this.Ch!==null||(this.Ch=new cf(this)),this.Ch}N(){return this.ys}hr(t){const e=t.priceScaleId;e!==void 0&&e!==this.ys.priceScaleId&&this.Qt().Ih(this,e),Pt(this.ys,t),t.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Ah(this),this.Qt().Eh(),this.sh.kt("options")}ht(t,e){this.Yt.ht(t),this.sh.kt("data"),this.xh!==null&&(e&&e.zh?this.xh.be():t.length===0&&this.xh.Me());const i=this.Qt().Hn(this);this.Qt().Lh(i),this.Qt().Ah(this),this.Qt().Eh(),this.Qt().ar()}Oh(t){const e=new of(this,t);return this.bh.push(e),this.Qt().Ah(this),e}Nh(t){const e=this.bh.indexOf(t);e!==-1&&this.bh.splice(e,1),this.Qt().Ah(this)}Wh(){return this.bh}Rr(){return this.Ph}zt(){const t=this.Fh();return t===null?null:{Ft:t.Ft[3],Hh:t.wt}}Fh(){const t=this.Qt().At().ye();if(t===null)return null;const e=t.Uh();return this.Yt.Wr(e,1)}Xs(){return this.Yt}$h(t){const e=this.Yt.Pr(t);return e===null?null:this.Ph==="Bar"||this.Ph==="Candlestick"||this.Ph==="Custom"?{qh:e.Ft[0],Yh:e.Ft[1],jh:e.Ft[2],Kh:e.Ft[3]}:e.Ft[3]}Xh(t){const e=[];Wi(this.kh,Yi,"top",e);const i=this.xh;return i!==null&&i.Vt()&&(this.yh===null&&i.xe()&&(this.yh=setTimeout(()=>{this.yh=null,this.Qt().Zh()},0)),i.Se(),e.unshift(i)),e}Ws(){const t=[];this.Gh()||t.push(this.Sh),t.push(this.sh,this.er);const e=this.bh.map(i=>i.lr());return t.push(...e),Wi(this.kh,Yi,"normal",t),t}Jh(){return this.Qh(Yi,"bottom")}ta(t){return this.Qh(yf,t)}ia(t){return this.Qh(bf,t)}sa(t,e){return this.kh.map(i=>i.jn(t,e)).filter(i=>i!==null)}us(){return[this.rr,...this.bh.map(t=>t._r())]}Fs(t,e){if(e!==this.es&&!this.Gh())return[];const i=[...this.vs];for(const n of this.bh)i.push(n.ur());return this.kh.forEach(n=>{i.push(...n.Fs())}),i}cs(){const t=[];return this.kh.forEach(e=>{t.push(...e.cs())}),t}Mh(t,e){if(this.ys.autoscaleInfoProvider!==void 0){const i=this.ys.autoscaleInfoProvider(()=>{const n=this.na(t,e);return n===null?null:n.Xe()});return di.Ze(i)}return this.na(t,e)}ea(){return this.ys.priceFormat.minMove}ra(){return this.ha}Ns(){var t;this.sh.kt();for(const e of this.vs)e.kt();for(const e of this.bh)e.kt();this.er.kt(),this.Sh.kt(),(t=this.xh)==null||t.kt(),this.kh.forEach(e=>e.Ns())}Wt(){return A(super.Wt())}Et(t){if(!((this.Ph==="Line"||this.Ph==="Area"||this.Ph==="Baseline")&&this.ys.crosshairMarkerVisible))return null;const e=this.Yt.Pr(t);return e===null?null:{gt:e.Ft[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(t)}}Ae(){return this.ys.title}Vt(){return this.ys.visible}ua(t){this.kh.push(new vf(t,this))}ca(t){this.kh=this.kh.filter(e=>e.oh()!==t)}da(){if(this.Ph==="Custom")return t=>this.sh.fa(t)}pa(){if(this.Ph==="Custom")return t=>this.sh.va(t)}ma(){return this.Yt.qr()}Gh(){return!Ei(this.Wt().wa())}na(t,e){if(!ps(t)||!ps(e)||this.Yt.Ki())return null;const i=this.Ph==="Line"||this.Ph==="Area"||this.Ph==="Baseline"||this.Ph==="Histogram"?[3]:[2,1],n=this.Yt.Ur(t,e,i);let r=n!==null?new Et(n.Jr,n.Qr):null,o=null;if(this.Rr()==="Histogram"){const a=this.ys.base,l=new Et(a,a);r=r!==null?r.vn(l):l}return this.kh.forEach(a=>{const l=a.Mh(t,e);if(l!=null&&l.priceRange){const c=new Et(l.priceRange.minValue,l.priceRange.maxValue);r=r!==null?r.vn(c):c}l!=null&&l.margins&&(o=l.margins)}),new di(r,o)}aa(){switch(this.Ph){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerRadius}return 0}la(){switch(this.Ph){case"Line":case"Area":case"Baseline":{const t=this.ys.crosshairMarkerBorderColor;if(t.length!==0)return t}}return null}oa(){switch(this.Ph){case"Line":case"Area":case"Baseline":return this.ys.crosshairMarkerBorderWidth}return 0}_a(t){switch(this.Ph){case"Line":case"Area":case"Baseline":{const e=this.ys.crosshairMarkerBackgroundColor;if(e.length!==0)return e}}return this.Rh().Dr(t).cr}Th(){switch(this.ys.priceFormat.type){case"custom":this.ha={format:this.ys.priceFormat.formatter};break;case"volume":this.ha=new Xd(this.ys.priceFormat.precision);break;case"percent":this.ha=new Sl(this.ys.priceFormat.precision);break;default:{const t=Math.pow(10,this.ys.priceFormat.precision);this.ha=new ki(t,this.ys.priceFormat.minMove*t)}}this.es!==null&&this.es.ga()}Qh(t,e){const i=[];return Wi(this.kh,t,e,i),i}}const xf=[3],_f=[0,1,2,3];class Sf{constructor(t){this.ys=t}Ma(t,e,i){let n=t;if(this.ys.mode===0)return n;const r=i.Ps(),o=r.zt();if(o===null)return n;const a=r.Nt(t,o),l=i.ba().filter(h=>h instanceof Ti).reduce((h,u)=>{if(i.Un(u)||!u.Vt())return h;const m=u.Wt(),g=u.Xs();if(m.Ki()||!g.Te(e))return h;const y=g.Pr(e);if(y===null)return h;const w=le(u.zt()),b=this.ys.mode===3?_f:xf;return h.concat(b.map(S=>m.Nt(y.Ft[S],w.Ft)))},[]);if(l.length===0)return n;l.sort((h,u)=>Math.abs(h-a)-Math.abs(u-a));const c=l[0];return n=r.Ts(c,o),n}}function as(s,t,e){return Math.min(Math.max(s,t),e)}function Ns(s,t,e){return t-s<=e}class Cf extends Be{constructor(){super(...arguments),this.Yt=null}ht(t){this.Yt=t}et({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(this.Yt===null)return;const r=Math.max(1,Math.floor(i));t.lineWidth=r,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(t,()=>{const o=A(this.Yt);if(o.Sa){t.strokeStyle=o.xa,De(t,o.Ca),t.beginPath();for(const a of o.ya){const l=Math.round(a.ka*i);t.moveTo(l,-r),t.lineTo(l,e.height+r)}t.stroke()}if(o.Pa){t.strokeStyle=o.Ta,De(t,o.Ra),t.beginPath();for(const a of o.Da){const l=Math.round(a.ka*n);t.moveTo(-r,l),t.lineTo(e.width+r,l)}t.stroke()}})}}class Ef{constructor(t){this.Gt=new Cf,this.xt=!0,this.yt=t}kt(){this.xt=!0}Tt(){if(this.xt){const t=this.yt.Qt().N().grid,e={Pa:t.horzLines.visible,Sa:t.vertLines.visible,Ta:t.horzLines.color,xa:t.vertLines.color,Ra:t.horzLines.style,Ca:t.vertLines.style,Da:this.yt.Ps().Va(),ya:(this.yt.Qt().At().Va()||[]).map(i=>({ka:i.coord}))};this.Gt.ht(e),this.xt=!1}return this.Gt}}class kf{constructor(t){this.sh=new Ef(t)}lr(){return this.sh}}const Ui={Ia:4,Ba:1e-4};function ke(s,t){const e=100*(s-t)/t;return t<0?-e:e}function Tf(s,t){const e=ke(s.$e(),t),i=ke(s.qe(),t);return new Et(e,i)}function ls(s,t){const e=100*(s-t)/t+100;return t<0?-e:e}function Nf(s,t){const e=ls(s.$e(),t),i=ls(s.qe(),t);return new Et(e,i)}function fi(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.log10(e+t.Ba)+t.Ia;return s<0?-i:i}function cs(s,t){const e=Math.abs(s);if(e<1e-15)return 0;const i=Math.pow(10,e-t.Ia)-t.Ba;return s<0?-i:i}function He(s,t){if(s===null)return null;const e=fi(s.$e(),t),i=fi(s.qe(),t);return new Et(e,i)}function es(s,t){if(s===null)return null;const e=cs(s.$e(),t),i=cs(s.qe(),t);return new Et(e,i)}function Zi(s){if(s===null)return Ui;const t=Math.abs(s.qe()-s.$e());if(t>=1||t<1e-15)return Ui;const e=Math.ceil(Math.abs(Math.log10(t))),i=Ui.Ia+e;return{Ia:i,Ba:1/Math.pow(10,i)}}class Xi{constructor(t,e){if(this.Aa=t,this.Ea=e,function(i){if(i<0)return!1;for(let n=i;n>1;n/=10)if(n%10!=0)return!1;return!0}(this.Aa))this.za=[2,2.5,2];else{this.za=[];for(let i=this.Aa;i!==1;){if(i%2==0)this.za.push(2),i/=2;else{if(i%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),i/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(t,e,i){const n=this.Aa===0?0:1/this.Aa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),o=0,a=this.Ea[0];for(;;){const u=Ns(r,n,1e-14)&&r>n+1e-14,m=Ns(r,i*a,1e-14),g=Ns(r,1,1e-14);if(!(u&&m&&g))break;r/=a,a=this.Ea[++o%this.Ea.length]}if(r<=n+1e-14&&(r=n),r=Math.max(1,r),this.za.length>0&&(l=r,c=1,h=1e-14,Math.abs(l-c)<h))for(o=0,a=this.za[0];Ns(r,i*a,1e-14)&&r>n+1e-14;)r/=a,a=this.za[++o%this.za.length];var l,c,h;return r}}class Xr{constructor(t,e,i,n){this.Oa=[],this.Yi=t,this.Aa=e,this.Na=i,this.Wa=n}La(t,e){if(t<e)throw new Error("high < low");const i=this.Yi.$t(),n=(t-e)*this.Fa()/i,r=new Xi(this.Aa,[2,2.5,2]),o=new Xi(this.Aa,[2,2,2.5]),a=new Xi(this.Aa,[2.5,2,2]),l=[];return l.push(r.La(t,e,n),o.La(t,e,n),a.La(t,e,n)),function(c){if(c.length<1)throw Error("array is empty");let h=c[0];for(let u=1;u<c.length;++u)c[u]<h&&(h=c[u]);return h}(l)}Ha(){const t=this.Yi,e=t.zt();if(e===null)return void(this.Oa=[]);const i=t.$t(),n=this.Na(i-1,e),r=this.Na(0,e),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=o,l=i-1-o,c=Math.max(n,r),h=Math.min(n,r);if(c===h)return void(this.Oa=[]);const u=this.La(c,h);if(this.$a(e,u,c,h,a,l),t.qa()&&this.Ya(u,h,c)){const m=this.Yi.ja();this.Ka(e,u,a,l,m,2*m)}}Va(){return this.Oa}Ua(){return this.Yi.k()}Fa(){return Math.ceil(2.5*this.Ua())}$a(t,e,i,n,r,o){const a=this.Oa,l=this.Yi;let c=i%e;c+=c<0?e:0;const h=i>=n?1:-1;let u=null,m=0;for(let g=i-c;g>n;g-=e){const y=this.Wa(g,t,!0);u!==null&&Math.abs(y-u)<this.Fa()||y<r||y>o||(m<a.length?(a[m].ka=y,a[m].Xa=l.Za(g)):a.push({ka:y,Xa:l.Za(g)}),m++,u=y,l.Ga()&&(e=this.La(g*h,n)))}a.length=m}Ka(t,e,i,n,r,o){const a=this.Oa,l=this.Ja(t,i,r,o),c=this.Ja(t,n,-o,-r),h=this.Wa(0,t,!0)-this.Wa(e,t,!0);a.length>0&&a[0].ka-l.ka<h/2&&a.shift(),a.length>0&&c.ka-a[a.length-1].ka<h/2&&a.pop(),a.unshift(l),a.push(c)}Ja(t,e,i,n){const r=(i+n)/2,o=this.Na(e+i,t),a=this.Na(e+n,t),l=Math.min(o,a),c=Math.max(o,a),h=Math.max(.1,this.La(c,l)),u=this.Na(e+r,t),m=u-u%h,g=this.Wa(m,t,!0);return{Xa:this.Yi.Za(m),ka:g}}Ya(t,e,i){let n=le(this.Yi.Qe());return this.Yi.Ga()&&(n=es(n,this.Yi.Qa())),n.$e()-e<t&&i-n.qe()<t}}function Rl(s){return s.slice().sort((t,e)=>A(t.hs())-A(e.hs()))}var Qr;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})(Qr||(Qr={}));const Gr=new Sl,Hr=new ki(100,1);class Rf{constructor(t,e,i,n,r){this.tl=0,this.il=null,this.Ge=null,this.sl=null,this.nl={el:!1,rl:null},this.hl=!1,this.al=0,this.ll=0,this.ol=new ft,this._l=new ft,this.ul=[],this.cl=null,this.dl=null,this.fl=null,this.pl=null,this.vl=null,this.ha=Hr,this.ml=Zi(null),this.wl=t,this.ys=e,this.gl=i,this.Ml=n,this.bl=r,this.Sl=new Xr(this,100,this.xl.bind(this),this.Cl.bind(this))}wa(){return this.wl}N(){return this.ys}hr(t){if(Pt(this.ys,t),this.ga(),t.mode!==void 0&&this.yl({ie:t.mode}),t.scaleMargins!==void 0){const e=Mt(t.scaleMargins.top),i=Mt(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.kl(),this.fl=null}}Pl(){return this.ys.autoScale}Tl(){return this.hl}Ga(){return this.ys.mode===1}Le(){return this.ys.mode===2}Rl(){return this.ys.mode===3}Qa(){return this.ml}ie(){return{sn:this.ys.autoScale,Dl:this.ys.invertScale,ie:this.ys.mode}}yl(t){const e=this.ie();let i=null;t.sn!==void 0&&(this.ys.autoScale=t.sn),t.ie!==void 0&&(this.ys.mode=t.ie,t.ie!==2&&t.ie!==3||(this.ys.autoScale=!0),this.nl.el=!1),e.ie===1&&t.ie!==e.ie&&(function(r,o){if(r===null)return!1;const a=cs(r.$e(),o),l=cs(r.qe(),o);return isFinite(a)&&isFinite(l)}(this.Ge,this.ml)?(i=es(this.Ge,this.ml),i!==null&&this.Vl(i)):this.ys.autoScale=!0),t.ie===1&&t.ie!==e.ie&&(i=He(this.Ge,this.ml),i!==null&&this.Vl(i));const n=e.ie!==this.ys.mode;n&&(e.ie===2||this.Le())&&this.ga(),n&&(e.ie===3||this.Rl())&&this.ga(),t.Dl!==void 0&&e.Dl!==t.Dl&&(this.ys.invertScale=t.Dl,this.Il()),this._l.p(e,this.ie())}Bl(){return this._l}k(){return this.gl.fontSize}$t(){return this.tl}Al(t){this.tl!==t&&(this.tl=t,this.kl(),this.fl=null)}El(){if(this.il)return this.il;const t=this.$t()-this.zl()-this.Ll();return this.il=t,t}Qe(){return this.Ol(),this.Ge}Vl(t,e){const i=this.Ge;(e||i===null&&t!==null||i!==null&&!i.He(t))&&(this.fl=null,this.Ge=t)}Nl(t){this.Vl(t),this.Wl(t!==null)}Ki(){return this.Ol(),this.tl===0||!this.Ge||this.Ge.Ki()}Fl(t){return this.Dl()?t:this.$t()-1-t}Nt(t,e){return this.Le()?t=ke(t,e):this.Rl()&&(t=ls(t,e)),this.Cl(t,e)}Hl(t,e,i){this.Ol();const n=this.Ll(),r=A(this.Qe()),o=r.$e(),a=r.qe(),l=this.El()-1,c=this.Dl(),h=l/(a-o),u=i===void 0?0:i.from,m=i===void 0?t.length:i.to,g=this.Ul();for(let y=u;y<m;y++){const w=t[y],b=w.gt;if(isNaN(b))continue;let S=b;g!==null&&(S=g(w.gt,e));const _=n+h*(S-o),N=c?_:this.tl-1-_;w.ut=N}}$l(t,e,i){this.Ol();const n=this.Ll(),r=A(this.Qe()),o=r.$e(),a=r.qe(),l=this.El()-1,c=this.Dl(),h=l/(a-o),u=i===void 0?0:i.from,m=i===void 0?t.length:i.to,g=this.Ul();for(let y=u;y<m;y++){const w=t[y];let b=w.qh,S=w.Yh,_=w.jh,N=w.Kh;g!==null&&(b=g(w.qh,e),S=g(w.Yh,e),_=g(w.jh,e),N=g(w.Kh,e));let k=n+h*(b-o),P=c?k:this.tl-1-k;w.ql=P,k=n+h*(S-o),P=c?k:this.tl-1-k,w.Yl=P,k=n+h*(_-o),P=c?k:this.tl-1-k,w.jl=P,k=n+h*(N-o),P=c?k:this.tl-1-k,w.Kl=P}}Ts(t,e){const i=this.xl(t,e);return this.Xl(i,e)}Xl(t,e){let i=t;return this.Le()?i=function(n,r){return r<0&&(n=-n),n/100*r+r}(i,e):this.Rl()&&(i=function(n,r){return n-=100,r<0&&(n=-n),n/100*r+r}(i,e)),i}ba(){return this.ul}Dt(){return this.dl||(this.dl=Rl(this.ul)),this.dl}Zl(t){this.ul.indexOf(t)===-1&&(this.ul.push(t),this.ga(),this.Gl())}Jl(t){const e=this.ul.indexOf(t);if(e===-1)throw new Error("source is not attached to scale");this.ul.splice(e,1),this.ul.length===0&&(this.yl({sn:!0}),this.Vl(null)),this.ga(),this.Gl()}zt(){let t=null;for(const e of this.ul){const i=e.zt();i!==null&&(t===null||i.Hh<t.Hh)&&(t=i)}return t===null?null:t.Ft}Dl(){return this.ys.invertScale}Va(){const t=this.zt()===null;if(this.fl!==null&&(t||this.fl.Ql===t))return this.fl.Va;this.Sl.Ha();const e=this.Sl.Va();return this.fl={Va:e,Ql:t},this.ol.p(),e}io(){return this.ol}so(t){this.Le()||this.Rl()||this.pl===null&&this.sl===null&&(this.Ki()||(this.pl=this.tl-t,this.sl=A(this.Qe()).Ue()))}no(t){if(this.Le()||this.Rl()||this.pl===null)return;this.yl({sn:!1}),(t=this.tl-t)<0&&(t=0);let e=(this.pl+.2*(this.tl-1))/(t+.2*(this.tl-1));const i=A(this.sl).Ue();e=Math.max(e,.1),i.je(e),this.Vl(i)}eo(){this.Le()||this.Rl()||(this.pl=null,this.sl=null)}ro(t){this.Pl()||this.vl===null&&this.sl===null&&(this.Ki()||(this.vl=t,this.sl=A(this.Qe()).Ue()))}ho(t){if(this.Pl()||this.vl===null)return;const e=A(this.Qe()).Ye()/(this.El()-1);let i=t-this.vl;this.Dl()&&(i*=-1);const n=i*e,r=A(this.sl).Ue();r.Ke(n),this.Vl(r,!0),this.fl=null}ao(){this.Pl()||this.vl!==null&&(this.vl=null,this.sl=null)}ra(){return this.ha||this.ga(),this.ha}Zi(t,e){switch(this.ys.mode){case 2:return this.lo(ke(t,e));case 3:return this.ra().format(ls(t,e));default:return this.nr(t)}}Za(t){switch(this.ys.mode){case 2:return this.lo(t);case 3:return this.ra().format(t);default:return this.nr(t)}}Dh(t){return this.nr(t,A(this.cl).ra())}Vh(t,e){return t=ke(t,e),this.lo(t,Gr)}oo(){return this.ul}_o(t){this.nl={rl:t,el:!1}}Ns(){this.ul.forEach(t=>t.Ns())}qa(){return this.ys.ensureEdgeTickMarksVisible&&this.Pl()}ja(){return this.k()/2}ga(){this.fl=null;let t=1/0;this.cl=null;for(const i of this.ul)i.hs()<t&&(t=i.hs(),this.cl=i);let e=100;this.cl!==null&&(e=Math.round(1/this.cl.ea())),this.ha=Hr,this.Le()?(this.ha=Gr,e=100):this.Rl()?(this.ha=new ki(100,1),e=100):this.cl!==null&&(this.ha=this.cl.ra()),this.Sl=new Xr(this,e,this.xl.bind(this),this.Cl.bind(this)),this.Sl.Ha()}Gl(){this.dl=null}Xi(){return this.bl}Wl(t){this.hl=t}zl(){return this.Dl()?this.ys.scaleMargins.bottom*this.$t()+this.ll:this.ys.scaleMargins.top*this.$t()+this.al}Ll(){return this.Dl()?this.ys.scaleMargins.top*this.$t()+this.al:this.ys.scaleMargins.bottom*this.$t()+this.ll}Ol(){this.nl.el||(this.nl.el=!0,this.uo())}kl(){this.il=null}Cl(t,e){if(this.Ol(),this.Ki())return 0;t=this.Ga()&&t?fi(t,this.ml):t;const i=A(this.Qe()),n=this.Ll()+(this.El()-1)*(t-i.$e())/i.Ye();return this.Fl(n)}xl(t,e){if(this.Ol(),this.Ki())return 0;const i=this.Fl(t),n=A(this.Qe()),r=n.$e()+n.Ye()*((i-this.Ll())/(this.El()-1));return this.Ga()?cs(r,this.ml):r}Il(){this.fl=null,this.Sl.Ha()}uo(){if(this.Tl()&&!this.Pl())return;const t=this.nl.rl;if(t===null)return;let e=null;const i=this.oo();let n=0,r=0;for(const l of i){if(!l.Vt())continue;const c=l.zt();if(c===null)continue;const h=l.Mh(t.Uh(),t.bi());let u=h&&h.Qe();if(u!==null){switch(this.ys.mode){case 1:u=He(u,this.ml);break;case 2:u=Tf(u,c.Ft);break;case 3:u=Nf(u,c.Ft)}if(e=e===null?u:e.vn(A(u)),h!==null){const m=h.tr();m!==null&&(n=Math.max(n,m.above),r=Math.max(r,m.below))}}}if(this.qa()&&(n=Math.max(n,this.ja()),r=Math.max(r,this.ja())),n===this.al&&r===this.ll||(this.al=n,this.ll=r,this.fl=null,this.kl()),e!==null){if(e.$e()===e.qe()){const l=this.cl,c=5*(l===null||this.Le()||this.Rl()?1:l.ea());this.Ga()&&(e=es(e,this.ml)),e=new Et(e.$e()-c,e.qe()+c),this.Ga()&&(e=He(e,this.ml))}if(this.Ga()){const l=es(e,this.ml),c=Zi(l);if(o=c,a=this.ml,o.Ia!==a.Ia||o.Ba!==a.Ba){const h=this.sl!==null?es(this.sl,this.ml):null;this.ml=c,e=He(l,c),h!==null&&(this.sl=He(h,c))}}this.Vl(e)}else this.Ge===null&&(this.Vl(new Et(-.5,.5)),this.ml=Zi(null));var o,a}Ul(){return this.Le()?ke:this.Rl()?ls:this.Ga()?t=>fi(t,this.ml):null}co(t,e,i){return e===void 0?(i===void 0&&(i=this.ra()),i.format(t)):e(t)}nr(t,e){return this.co(t,this.Ml.priceFormatter,e)}lo(t,e){return this.co(t,this.Ml.percentageFormatter,e)}}function Kr(s){return s instanceof Ti}class Jr{constructor(t,e){this.ul=[],this.do=new Map,this.tl=0,this.fo=0,this.po=1e3,this.dl=null,this.vo=new ft,this.kh=[],this.uh=t,this.ts=e,this.mo=new kf(this);const i=e.N();this.wo=this.Mo("left",i.leftPriceScale),this.bo=this.Mo("right",i.rightPriceScale),this.wo.Bl().i(this.So.bind(this,this.wo),this),this.bo.Bl().i(this.So.bind(this,this.bo),this),this.xo(i)}xo(t){if(t.leftPriceScale&&this.wo.hr(t.leftPriceScale),t.rightPriceScale&&this.bo.hr(t.rightPriceScale),t.localization&&(this.wo.ga(),this.bo.ga()),t.overlayPriceScales){const e=Array.from(this.do.values());for(const i of e){const n=A(i[0].Wt());n.hr(t.overlayPriceScales),t.localization&&n.ga()}}}Co(t){switch(t){case"left":return this.wo;case"right":return this.bo}return this.do.has(t)?Mt(this.do.get(t))[0].Wt():null}m(){this.Qt().yo().u(this),this.wo.Bl().u(this),this.bo.Bl().u(this),this.ul.forEach(t=>{t.m&&t.m()}),this.kh=this.kh.filter(t=>{const e=t.oh();return e.detached&&e.detached(),!1}),this.vo.p()}ko(){return this.po}Po(t){this.po=t}Qt(){return this.ts}Qi(){return this.fo}$t(){return this.tl}To(t){this.fo=t,this.Ro()}Al(t){this.tl=t,this.wo.Al(t),this.bo.Al(t),this.ul.forEach(e=>{if(this.Un(e)){const i=e.Wt();i!==null&&i.Al(t)}}),this.Ro()}Do(){return this.ul.filter(Kr)}ba(){return this.ul}Un(t){const e=t.Wt();return e===null||this.wo!==e&&this.bo!==e}Zl(t,e,i){this.Vo(t,e,i?t.hs():this.ul.length)}Jl(t,e){const i=this.ul.indexOf(t);xt(i!==-1,"removeDataSource: invalid data source"),this.ul.splice(i,1),e||this.ul.forEach((o,a)=>o.ls(a));const n=A(t.Wt()).wa();if(this.do.has(n)){const o=Mt(this.do.get(n)),a=o.indexOf(t);a!==-1&&(o.splice(a,1),o.length===0&&this.do.delete(n))}const r=t.Wt();r&&r.ba().indexOf(t)>=0&&(r.Jl(t),this.Io(r)),this.dl=null}qn(t){return t===this.wo?"left":t===this.bo?"right":"overlay"}Bo(){return this.wo}Ao(){return this.bo}Eo(t,e){t.so(e)}zo(t,e){t.no(e),this.Ro()}Lo(t){t.eo()}Oo(t,e){t.ro(e)}No(t,e){t.ho(e),this.Ro()}Wo(t){t.ao()}Ro(){this.ul.forEach(t=>{t.Ns()})}Ps(){let t=null;return this.ts.N().rightPriceScale.visible&&this.bo.ba().length!==0?t=this.bo:this.ts.N().leftPriceScale.visible&&this.wo.ba().length!==0?t=this.wo:this.ul.length!==0&&(t=this.ul[0].Wt()),t===null&&(t=this.bo),t}$n(){let t=null;return this.ts.N().rightPriceScale.visible?t=this.bo:this.ts.N().leftPriceScale.visible&&(t=this.wo),t}Io(t){t!==null&&t.Pl()&&this.Fo(t)}Ho(t){const e=this.uh.ye();t.yl({sn:!0}),e!==null&&t._o(e),this.Ro()}Uo(){this.Fo(this.wo),this.Fo(this.bo)}$o(){this.Io(this.wo),this.Io(this.bo),this.ul.forEach(t=>{this.Un(t)&&this.Io(t.Wt())}),this.Ro(),this.ts.ar()}Dt(){return this.dl===null&&(this.dl=Rl(this.ul)),this.dl}qo(t,e){e=as(e,0,this.ul.length-1);const i=this.ul.indexOf(t);xt(i!==-1,"setSeriesOrder: invalid data source"),this.ul.splice(i,1),this.ul.splice(e,0,t),this.ul.forEach((n,r)=>n.ls(r)),this.dl=null;for(const n of[this.wo,this.bo])n.Gl(),n.ga();this.ts.ar()}It(){return this.Dt().filter(Kr)}Yo(){return this.vo}jo(){return this.mo}ua(t){this.kh.push(new ff(t))}ca(t){this.kh=this.kh.filter(e=>e.oh()!==t),t.detached&&t.detached(),this.ts.ar()}Ko(){return this.kh}sa(t,e){return this.kh.map(i=>i.jn(t,e)).filter(i=>i!==null)}Fo(t){const e=t.oo();if(e&&e.length>0&&!this.uh.Ki()){const i=this.uh.ye();i!==null&&t._o(i)}t.Ns()}Vo(t,e,i){let n=this.Co(e);if(n===null&&(n=this.Mo(e,this.ts.N().overlayPriceScales)),this.ul.splice(i,0,t),!Ei(e)){const r=this.do.get(e)||[];r.push(t),this.do.set(e,r)}t.ls(i),n.Zl(t),t._s(n),this.Io(n),this.dl=null}So(t,e,i){e.ie!==i.ie&&this.Fo(t)}Mo(t,e){const i={visible:!0,autoScale:!0,...Ht(e)},n=new Rf(t,i,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return n.Al(this.$t()),n}}function Rs(s){return{Xo:s.Xo,Zo:{Kn:s.Go.externalId},Jo:s.Go.cursorStyle}}function Mf(s,t,e,i){for(const n of s){const r=n.Tt(i);if(r!==null&&r.jn){const o=r.jn(t,e);if(o!==null)return{Qo:n,Zo:o}}}return null}function Af(s){return s.Ws!==void 0}function Ml(s,t,e){const i=[s,...s.Dt()],n=function(r,o,a){var m;let l,c;for(const g of r){const y=((m=g.sa)==null?void 0:m.call(g,o,a))??[];for(const w of y)h=w.zOrder,u=l==null?void 0:l.zOrder,(!u||h==="top"&&u!=="top"||h==="normal"&&u==="bottom")&&(l=w,c=g)}var h,u;return l&&c?{Go:l,Xo:c}:null}(i,t,e);if((n==null?void 0:n.Go.zOrder)==="top")return Rs(n);for(const r of i){if(n&&n.Xo===r&&n.Go.zOrder!=="bottom"&&!n.Go.isBackground)return Rs(n);if(Af(r)){const o=Mf(r.Ws(s),t,e,s);if(o!==null)return{Xo:r,Qo:o.Qo,Zo:o.Zo}}if(n&&n.Xo===r&&n.Go.zOrder!=="bottom"&&n.Go.isBackground)return Rs(n)}return n!=null&&n.Go?Rs(n):null}class Pf{constructor(t,e,i=50){this.kn=0,this.Pn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.t_=t,this.i_=e,this.Vn=i}s_(t){const e=t.time,i=this.i_.cacheKey(e),n=this.Dn.get(i);if(n!==void 0)return n.n_;if(this.kn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Mt(o)),this.Tn++,this.kn--}const r=this.t_(t);return this.Dn.set(i,{n_:r,En:this.Pn}),this.Rn.set(this.Pn,i),this.kn++,this.Pn++,r}}class hs{constructor(t,e){xt(t<=e,"right should be >= left"),this.e_=t,this.r_=e}Uh(){return this.e_}bi(){return this.r_}h_(){return this.r_-this.e_+1}Te(t){return this.e_<=t&&t<=this.r_}He(t){return this.e_===t.Uh()&&this.r_===t.bi()}}function qr(s,t){return s===null||t===null?s===t:s.He(t)}class Of{constructor(){this.a_=new Map,this.Dn=null,this.l_=!1}o_(t){this.l_=t,this.Dn=null}__(t,e){this.u_(e),this.Dn=null;for(let i=e;i<t.length;++i){const n=t[i];let r=this.a_.get(n.timeWeight);r===void 0&&(r=[],this.a_.set(n.timeWeight,r)),r.push({index:i,time:n.time,weight:n.timeWeight,originalTime:n.originalTime})}}c_(t,e,i,n,r){const o=Math.ceil(e/t);return this.Dn!==null&&this.Dn.d_===o&&r===this.Dn.f_&&i===this.Dn.p_||(this.Dn={f_:r,p_:i,Va:this.v_(o,i,n),d_:o}),this.Dn.Va}u_(t){if(t===0)return void this.a_.clear();const e=[];this.a_.forEach((i,n)=>{t<=i[0].index?e.push(n):i.splice(je(i,t,r=>r.index<t),1/0)});for(const i of e)this.a_.delete(i)}v_(t,e,i){let n=[];const r=o=>!e||i.has(o.index);for(const o of Array.from(this.a_.keys()).sort((a,l)=>l-a)){if(!this.a_.get(o))continue;const a=n;n=[];const l=a.length;let c=0;const h=Mt(this.a_.get(o)),u=h.length;let m=1/0,g=-1/0;for(let y=0;y<u;y++){const w=h[y],b=w.index;for(;c<l;){const S=a[c],_=S.index;if(!(_<b&&r(S))){m=_;break}c++,n.push(S),g=_,m=1/0}if(m-b>=t&&b-g>=t&&r(w))n.push(w),g=b;else if(this.l_)return a}for(;c<l;c++)r(a[c])&&n.push(a[c])}return n}}class Re{constructor(t){this.m_=t}w_(){return this.m_===null?null:new hs(Math.floor(this.m_.Uh()),Math.ceil(this.m_.bi()))}g_(){return this.m_}static M_(){return new Re(null)}}function If(s,t){return s.weight>t.weight?s:t}class Df{constructor(t,e,i,n){this.fo=0,this.b_=null,this.S_=[],this.vl=null,this.pl=null,this.x_=new Of,this.C_=new Map,this.y_=Re.M_(),this.k_=!0,this.P_=new ft,this.T_=new ft,this.R_=new ft,this.D_=null,this.V_=null,this.I_=new Map,this.B_=-1,this.A_=[],this.ys=e,this.Ml=i,this.E_=e.rightOffset,this.z_=e.barSpacing,this.ts=t,this.i_=n,this.L_(),this.x_.o_(e.uniformDistribution),this.O_()}N(){return this.ys}N_(t){Pt(this.Ml,t),this.W_(),this.L_()}hr(t,e){Pt(this.ys,t),this.ys.fixLeftEdge&&this.F_(),this.ys.fixRightEdge&&this.H_(),t.barSpacing!==void 0&&this.ts.dn(t.barSpacing),t.rightOffset!==void 0&&this.ts.fn(t.rightOffset),t.minBarSpacing===void 0&&t.maxBarSpacing===void 0||this.ts.dn(t.barSpacing??this.z_),t.ignoreWhitespaceIndices!==void 0&&t.ignoreWhitespaceIndices!==this.ys.ignoreWhitespaceIndices&&this.O_(),this.W_(),this.L_(),this.R_.p()}Rs(t){var e;return((e=this.S_[t])==null?void 0:e.time)??null}ss(t){return this.S_[t]??null}U_(t,e){if(this.S_.length<1)return null;if(this.i_.key(t)>this.i_.key(this.S_[this.S_.length-1].time))return e?this.S_.length-1:null;const i=je(this.S_,this.i_.key(t),(n,r)=>this.i_.key(n.time)<r);return this.i_.key(t)<this.i_.key(this.S_[i].time)?e?i:null:i}Ki(){return this.fo===0||this.S_.length===0||this.b_===null}q_(){return this.S_.length>0}ye(){return this.Y_(),this.y_.w_()}j_(){return this.Y_(),this.y_.g_()}K_(){const t=this.ye();if(t===null)return null;const e={from:t.Uh(),to:t.bi()};return this.X_(e)}X_(t){const e=Math.round(t.from),i=Math.round(t.to),n=A(this.Z_()),r=A(this.G_());return{from:A(this.ss(Math.max(n,e))),to:A(this.ss(Math.min(r,i)))}}J_(t){return{from:A(this.U_(t.from,!0)),to:A(this.U_(t.to,!0))}}Qi(){return this.fo}To(t){if(!isFinite(t)||t<=0||this.fo===t)return;const e=this.j_(),i=this.fo;if(this.fo=t,this.k_=!0,this.ys.lockVisibleTimeRangeOnResize&&i!==0){const n=this.z_*t/i;this.z_=n}if(this.ys.fixLeftEdge&&e!==null&&e.Uh()<=0){const n=i-t;this.E_-=Math.round(n/this.z_)+1,this.k_=!0}this.Q_(),this.tu()}qt(t){if(this.Ki()||!ps(t))return 0;const e=this.iu()+this.E_-t;return this.fo-(e+.5)*this.z_-1}su(t,e){const i=this.iu(),n=e===void 0?0:e.from,r=e===void 0?t.length:e.to;for(let o=n;o<r;o++){const a=t[o].wt,l=i+this.E_-a,c=this.fo-(l+.5)*this.z_-1;t[o]._t=c}}nu(t,e){const i=Math.ceil(this.eu(t));return e&&this.ys.ignoreWhitespaceIndices&&!this.ru(i)?this.hu(i):i}fn(t){this.k_=!0,this.E_=t,this.tu(),this.ts.au(),this.ts.ar()}lu(){return this.z_}dn(t){this.ou(t),this.tu(),this.ts.au(),this.ts.ar()}_u(){return this.E_}Va(){if(this.Ki())return null;if(this.V_!==null)return this.V_;const t=this.z_,e=5*(this.ts.N().layout.fontSize+4)/8*(this.ys.tickMarkMaxCharacterLength||8),i=Math.round(e/t),n=A(this.ye()),r=Math.max(n.Uh(),n.Uh()-i),o=Math.max(n.bi(),n.bi()-i),a=this.x_.c_(t,e,this.ys.ignoreWhitespaceIndices,this.I_,this.B_),l=this.Z_()+i,c=this.G_()-i,h=this.uu(),u=this.ys.fixLeftEdge||h,m=this.ys.fixRightEdge||h;let g=0;for(const y of a){if(!(r<=y.index&&y.index<=o))continue;let w;g<this.A_.length?(w=this.A_[g],w.coord=this.qt(y.index),w.label=this.cu(y),w.weight=y.weight):(w={needAlignCoordinate:!1,coord:this.qt(y.index),label:this.cu(y),weight:y.weight},this.A_.push(w)),this.z_>e/2&&!h?w.needAlignCoordinate=!1:w.needAlignCoordinate=u&&y.index<=l||m&&y.index>=c,g++}return this.A_.length=g,this.V_=this.A_,this.A_}du(){this.k_=!0,this.dn(this.ys.barSpacing),this.fn(this.ys.rightOffset)}fu(t){this.k_=!0,this.b_=t,this.tu(),this.F_()}pu(t,e){const i=this.eu(t),n=this.lu(),r=n+e*(n/10);this.dn(r),this.ys.rightBarStaysOnScroll||this.fn(this._u()+(i-this.eu(t)))}so(t){this.vl&&this.ao(),this.pl===null&&this.D_===null&&(this.Ki()||(this.pl=t,this.vu()))}no(t){if(this.D_===null)return;const e=as(this.fo-t,0,this.fo),i=as(this.fo-A(this.pl),0,this.fo);e!==0&&i!==0&&this.dn(this.D_.lu*e/i)}eo(){this.pl!==null&&(this.pl=null,this.mu())}ro(t){this.vl===null&&this.D_===null&&(this.Ki()||(this.vl=t,this.vu()))}ho(t){if(this.vl===null)return;const e=(this.vl-t)/this.lu();this.E_=A(this.D_)._u+e,this.k_=!0,this.tu()}ao(){this.vl!==null&&(this.vl=null,this.mu())}wu(){this.gu(this.ys.rightOffset)}gu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.E_,n=performance.now();this.ts._n({Mu:r=>(r-n)/e>=1,bu:r=>{const o=(r-n)/e;return o>=1?t:i+(t-i)*o}})}kt(t,e){this.k_=!0,this.S_=t,this.x_.__(t,e),this.tu()}Su(){return this.P_}xu(){return this.T_}Cu(){return this.R_}iu(){return this.b_||0}yu(t){const e=t.h_();this.ou(this.fo/e),this.E_=t.bi()-this.iu(),this.tu(),this.k_=!0,this.ts.au(),this.ts.ar()}ku(){const t=this.Z_(),e=this.G_();t!==null&&e!==null&&this.yu(new hs(t,e+this.ys.rightOffset))}Pu(t){const e=new hs(t.from,t.to);this.yu(e)}ns(t){return this.Ml.timeFormatter!==void 0?this.Ml.timeFormatter(t.originalTime):this.i_.formatHorzItem(t.time)}O_(){if(!this.ys.ignoreWhitespaceIndices)return;this.I_.clear();const t=this.ts.js();for(const e of t)for(const i of e.ma())this.I_.set(i,!0);this.B_++}uu(){const t=this.ts.N().handleScroll,e=this.ts.N().handleScale;return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Z_(){return this.S_.length===0?null:0}G_(){return this.S_.length===0?null:this.S_.length-1}Tu(t){return(this.fo-1-t)/this.z_}eu(t){const e=this.Tu(t),i=this.iu()+this.E_-e;return Math.round(1e6*i)/1e6}ou(t){const e=this.z_;this.z_=t,this.Q_(),e!==this.z_&&(this.k_=!0,this.Ru())}Y_(){if(!this.k_)return;if(this.k_=!1,this.Ki())return void this.Du(Re.M_());const t=this.iu(),e=this.fo/this.z_,i=this.E_+t,n=new hs(i-e+1,i);this.Du(new Re(n))}Q_(){const t=as(this.z_,this.Vu(),this.Iu());this.z_!==t&&(this.z_=t,this.k_=!0)}Iu(){return this.ys.maxBarSpacing>0?this.ys.maxBarSpacing:.5*this.fo}Vu(){return this.ys.fixLeftEdge&&this.ys.fixRightEdge&&this.S_.length!==0?this.fo/this.S_.length:this.ys.minBarSpacing}tu(){const t=this.Bu();t!==null&&this.E_<t&&(this.E_=t,this.k_=!0);const e=this.Au();this.E_>e&&(this.E_=e,this.k_=!0)}Bu(){const t=this.Z_(),e=this.b_;return t===null||e===null?null:t-e-1+(this.ys.fixLeftEdge?this.fo/this.z_:Math.min(2,this.S_.length))}Au(){return this.ys.fixRightEdge?0:this.fo/this.z_-Math.min(2,this.S_.length)}vu(){this.D_={lu:this.lu(),_u:this._u()}}mu(){this.D_=null}cu(t){let e=this.C_.get(t.weight);return e===void 0&&(e=new Pf(i=>this.Eu(i),this.i_),this.C_.set(t.weight,e)),e.s_(t)}Eu(t){return this.i_.formatTickmark(t,this.Ml)}Du(t){const e=this.y_;this.y_=t,qr(e.w_(),this.y_.w_())||this.P_.p(),qr(e.g_(),this.y_.g_())||this.T_.p(),this.Ru()}Ru(){this.V_=null}W_(){this.Ru(),this.C_.clear()}L_(){this.i_.updateFormatter(this.Ml)}F_(){if(!this.ys.fixLeftEdge)return;const t=this.Z_();if(t===null)return;const e=this.ye();if(e===null)return;const i=e.Uh()-t;if(i<0){const n=this.E_-i-1;this.fn(n)}this.Q_()}H_(){this.tu(),this.Q_()}ru(t){return!this.ys.ignoreWhitespaceIndices||this.I_.get(t)||!1}hu(t){const e=function*(n){const r=Math.round(n),o=r<n;let a=1;for(;;)o?(yield r+a,yield r-a):(yield r-a,yield r+a),a++}(t),i=this.G_();for(;i;){const n=e.next().value;if(this.I_.get(n))return n;if(n<0||n>i)break}return t}}var to,eo,so,io,no;(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(to||(to={}));class Lf{constructor(t,e,i){this.zu=[],this.Lu=[],this.fo=0,this.Ou=null,this.Nu=new ft,this.Wu=new ft,this.Fu=null,this.Hu=t,this.ys=e,this.i_=i,this.bl=new Dd(this.ys.layout.colorParsers),this.Uu=new Id(this),this.uh=new Df(this,e.timeScale,this.ys.localization,i),this.Ct=new Zd(this,e.crosshair),this.$u=new Sf(e.crosshair),this.qu(0),this.zu[0].Po(2e3),this.Yu=this.ju(0),this.Ku=this.ju(1)}Bh(){this.Xu(wt.gn())}ar(){this.Xu(wt.wn())}Zh(){this.Xu(new wt(1))}Ah(t){const e=this.Zu(t);this.Xu(e)}Gu(){return this.Ou}Ju(t){var i,n,r,o;if(((i=this.Ou)==null?void 0:i.Xo)===(t==null?void 0:t.Xo)&&((r=(n=this.Ou)==null?void 0:n.Zo)==null?void 0:r.Kn)===((o=t==null?void 0:t.Zo)==null?void 0:o.Kn))return;const e=this.Ou;this.Ou=t,e!==null&&this.Ah(e.Xo),t!==null&&t.Xo!==(e==null?void 0:e.Xo)&&this.Ah(t.Xo)}N(){return this.ys}hr(t){Pt(this.ys,t),this.zu.forEach(e=>e.xo(t)),t.timeScale!==void 0&&this.uh.hr(t.timeScale),t.localization!==void 0&&this.uh.N_(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Nu.p(),this.Yu=this.ju(0),this.Ku=this.ju(1),this.Bh()}Qu(t,e,i=0){const n=this.zu[i];if(n===void 0)return;if(t==="left")return Pt(this.ys,{leftPriceScale:e}),n.xo({leftPriceScale:e}),this.Nu.p(),void this.Bh();if(t==="right")return Pt(this.ys,{rightPriceScale:e}),n.xo({rightPriceScale:e}),this.Nu.p(),void this.Bh();const r=this.tc(t,i);r!==null&&(r.Wt.hr(e),this.Nu.p())}tc(t,e){const i=this.zu[e];if(i===void 0)return null;const n=i.Co(t);return n!==null?{Us:i,Wt:n}:null}At(){return this.uh}$s(){return this.zu}sc(){return this.Ct}nc(){return this.Wu}ec(t,e){t.Al(e),this.au()}To(t){this.fo=t,this.uh.To(this.fo),this.zu.forEach(e=>e.To(t)),this.au()}rc(t){this.zu.length!==1&&(xt(t>=0&&t<this.zu.length,"Invalid pane index"),this.zu.splice(t,1),this.Bh())}hc(t,e){if(this.zu.length<2)return;xt(t>=0&&t<this.zu.length,"Invalid pane index");const i=this.zu[t],n=this.zu.reduce((u,m)=>u+m.ko(),0),r=this.zu.reduce((u,m)=>u+m.$t(),0),o=r-30*(this.zu.length-1);e=Math.min(o,Math.max(30,e));const a=n/r,l=i.$t();i.Po(e*a);let c=e-l,h=this.zu.length-1;for(const u of this.zu)if(u!==i){const m=Math.min(o,Math.max(30,u.$t()-c/h));c-=u.$t()-m,h-=1;const g=m*a;u.Po(g)}this.Bh()}ac(t,e){xt(t>=0&&t<this.zu.length&&e>=0&&e<this.zu.length,"Invalid pane index");const i=this.zu[t],n=this.zu[e];this.zu[t]=n,this.zu[e]=i,this.Bh()}Eo(t,e,i){t.Eo(e,i)}zo(t,e,i){t.zo(e,i),this.Eh(),this.Xu(this.lc(t,2))}Lo(t,e){t.Lo(e),this.Xu(this.lc(t,2))}Oo(t,e,i){e.Pl()||t.Oo(e,i)}No(t,e,i){e.Pl()||(t.No(e,i),this.Eh(),this.Xu(this.lc(t,2)))}Wo(t,e){e.Pl()||(t.Wo(e),this.Xu(this.lc(t,2)))}Ho(t,e){t.Ho(e),this.Xu(this.lc(t,2))}oc(t){this.uh.so(t)}_c(t,e){const i=this.At();if(i.Ki()||e===0)return;const n=i.Qi();t=Math.max(1,Math.min(t,n)),i.pu(t,e),this.au()}uc(t){this.cc(0),this.dc(t),this.fc()}vc(t){this.uh.no(t),this.au()}mc(){this.uh.eo(),this.ar()}cc(t){this.uh.ro(t)}dc(t){this.uh.ho(t),this.au()}fc(){this.uh.ao(),this.ar()}js(){return this.Lu}wc(t,e,i,n,r){this.Ct.Vs(t,e);let o=NaN,a=this.uh.nu(t,!0);const l=this.uh.ye();l!==null&&(a=Math.min(Math.max(l.Uh(),a),l.bi()));const c=n.Ps(),h=c.zt();if(h!==null&&(o=c.Ts(e,h)),o=this.$u.Ma(o,a,n),this.Ct.Es(a,o,n),this.Zh(),!r){const u=Ml(n,t,e);this.Ju(u&&{Xo:u.Xo,Zo:u.Zo,Jo:u.Jo||null}),this.Wu.p(this.Ct.Bt(),{x:t,y:e},i)}}gc(t,e,i){const n=i.Ps(),r=n.zt(),o=n.Nt(t,A(r)),a=this.uh.U_(e,!0),l=this.uh.qt(A(a));this.wc(l,o,null,i,!0)}Mc(t){this.sc().Ls(),this.Zh(),t||this.Wu.p(null,null,null)}Eh(){const t=this.Ct.Us();if(t!==null){const e=this.Ct.Bs(),i=this.Ct.As();this.wc(e,i,null,t)}this.Ct.Ns()}bc(t,e,i){const n=this.uh.Rs(0);e!==void 0&&i!==void 0&&this.uh.kt(e,i);const r=this.uh.Rs(0),o=this.uh.iu(),a=this.uh.ye();if(a!==null&&n!==null&&r!==null){const l=a.Te(o),c=this.i_.key(n)>this.i_.key(r),h=t!==null&&t>o&&!c,u=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,m=l&&(i!==void 0||u)&&this.uh.N().shiftVisibleRangeOnNewBar;if(h&&!m){const g=t-o;this.uh.fn(this.uh._u()-g)}}this.uh.fu(t)}Lh(t){t!==null&&t.$o()}Hn(t){if(function(i){return i instanceof Jr}(t))return t;const e=this.zu.find(i=>i.Dt().includes(t));return e===void 0?null:e}au(){this.zu.forEach(t=>t.$o()),this.Eh()}m(){this.zu.forEach(t=>t.m()),this.zu.length=0,this.ys.localization.priceFormatter=void 0,this.ys.localization.percentageFormatter=void 0,this.ys.localization.timeFormatter=void 0}Sc(){return this.Uu}Yn(){return this.Uu.N()}yo(){return this.Nu}xc(t,e){const i=this.qu(e);this.Cc(t,i),this.Lu.push(t),this.Lu.length===1?this.Bh():this.ar()}yc(t){const e=this.Hn(t),i=this.Lu.indexOf(t);xt(i!==-1,"Series not found");const n=A(e);this.Lu.splice(i,1),n.Jl(t),t.m&&t.m(),this.uh.O_(),this.kc(n)}Ih(t,e){const i=A(this.Hn(t));i.Jl(t,!0),i.Zl(t,e,!0)}ku(){const t=wt.wn();t.rn(),this.Xu(t)}Pc(t){const e=wt.wn();e.ln(t),this.Xu(e)}cn(){const t=wt.wn();t.cn(),this.Xu(t)}dn(t){const e=wt.wn();e.dn(t),this.Xu(e)}fn(t){const e=wt.wn();e.fn(t),this.Xu(e)}_n(t){const e=wt.wn();e._n(t),this.Xu(e)}hn(){const t=wt.wn();t.hn(),this.Xu(t)}Tc(){return this.ys.rightPriceScale.visible?"right":"left"}Rc(t,e){if(xt(e>=0,"Index should be greater or equal to 0"),e===this.Dc(t))return;const i=A(this.Hn(t));i.Jl(t);const n=this.qu(e);this.Cc(t,n),i.ba().length===0&&this.kc(i)}Vc(){return this.Ku}$(){return this.Yu}Ut(t){const e=this.Ku,i=this.Yu;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),this.Fu===null||this.Fu.mr!==i||this.Fu.wr!==e)this.Fu={mr:i,wr:e,Ic:new Map};else{const r=this.Fu.Ic.get(t);if(r!==void 0)return r}const n=this.bl.tt(i,e,t/100);return this.Fu.Ic.set(t,n),n}Bc(t){return this.zu.indexOf(t)}Xi(){return this.bl}qu(t){if(xt(t>=0,"Index should be greater or equal to 0"),(t=Math.min(this.zu.length,t))<this.zu.length)return this.zu[t];const e=new Jr(this.uh,this);this.zu.push(e);const i=wt.gn();return i.Qs(t,{tn:0,sn:!0}),this.Xu(i),e}Dc(t){return this.zu.findIndex(e=>e.Do().includes(t))}lc(t,e){const i=new wt(e);if(t!==null){const n=this.zu.indexOf(t);i.Qs(n,{tn:e})}return i}Zu(t,e){return e===void 0&&(e=2),this.lc(this.Hn(t),e)}Xu(t){this.Hu&&this.Hu(t),this.zu.forEach(e=>e.jo().lr().kt())}Cc(t,e){const i=t.N().priceScaleId,n=i!==void 0?i:this.Tc();e.Zl(t,n),Ei(n)||t.hr(t.N())}ju(t){const e=this.ys.layout;return e.background.type==="gradient"?t===0?e.background.topColor:e.background.bottomColor:e.background.color}kc(t){t.ba().length===0&&this.zu.length>1&&(this.zu.splice(this.Bc(t),1),this.Bh())}}function kn(s){return!Le(s)&&!ys(s)}function Al(s){return Le(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(eo||(eo={})),function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"}(so||(so={})),function(s){s.Solid="solid",s.VerticalGradient="gradient"}(io||(io={})),function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"}(no||(no={}));const ro=s=>s.getUTCFullYear();function jf(s,t,e){return t.replace(/yyyy/g,(i=>Kt(ro(i),4))(s)).replace(/yy/g,(i=>Kt(ro(i)%100,2))(s)).replace(/MMMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"long"}))(s,e)).replace(/MMM/g,((i,n)=>new Date(i.getUTCFullYear(),i.getUTCMonth(),1).toLocaleString(n,{month:"short"}))(s,e)).replace(/MM/g,(i=>Kt((n=>n.getUTCMonth()+1)(i),2))(s)).replace(/dd/g,(i=>Kt((n=>n.getUTCDate())(i),2))(s))}class Pl{constructor(t="yyyy-MM-dd",e="default"){this.Ac=t,this.Ec=e}s_(t){return jf(t,this.Ac,this.Ec)}}class Vf{constructor(t){this.zc=t||"%h:%m:%s"}s_(t){return this.zc.replace("%h",Kt(t.getUTCHours(),2)).replace("%m",Kt(t.getUTCMinutes(),2)).replace("%s",Kt(t.getUTCSeconds(),2))}}const zf={Lc:"yyyy-MM-dd",Oc:"%h:%m:%s",Nc:" ",Wc:"default"};class Ff{constructor(t={}){const e={...zf,...t};this.Fc=new Pl(e.Lc,e.Wc),this.Hc=new Vf(e.Oc),this.Uc=e.Nc}s_(t){return`${this.Fc.s_(t)}${this.Uc}${this.Hc.s_(t)}`}}function Ms(s){return 60*s*60*1e3}function Qi(s){return 60*s*1e3}const As=[{$c:(oo=1,1e3*oo),qc:10},{$c:Qi(1),qc:20},{$c:Qi(5),qc:21},{$c:Qi(30),qc:22},{$c:Ms(1),qc:30},{$c:Ms(3),qc:31},{$c:Ms(6),qc:32},{$c:Ms(12),qc:33}];var oo;function ao(s,t){if(s.getUTCFullYear()!==t.getUTCFullYear())return 70;if(s.getUTCMonth()!==t.getUTCMonth())return 60;if(s.getUTCDate()!==t.getUTCDate())return 50;for(let e=As.length-1;e>=0;--e)if(Math.floor(t.getTime()/As[e].$c)!==Math.floor(s.getTime()/As[e].$c))return As[e].qc;return 0}function Gi(s){let t=s;if(ys(s)&&(t=qn(s)),!kn(t))throw new Error("time must be of type BusinessDay");const e=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Yc:Math.round(e.getTime()/1e3),jc:t}}function lo(s){if(!Al(s))throw new Error("time must be of type isUTCTimestamp");return{Yc:s}}function qn(s){const t=new Date(s);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function co(s){ys(s.time)&&(s.time=qn(s.time))}class ho{options(){return this.ys}setOptions(t){this.ys=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(e){e.forEach(co)}(t):co(t)}createConverterToInternalObj(t){return A(function(e){return e.length===0?null:kn(e[0].time)||ys(e[0].time)?Gi:lo}(t))}key(t){return typeof t=="object"&&"Yc"in t?t.Yc:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return e.jc===void 0?new Date(1e3*e.Yc).getTime():new Date(Date.UTC(e.jc.year,e.jc.month-1,e.jc.day)).getTime()}convertHorzItemToInternal(t){return Al(e=t)?lo(e):kn(e)?Gi(e):Gi(qn(e));var e}updateFormatter(t){if(!this.ys)return;const e=t.dateFormat;this.ys.timeScale.timeVisible?this.Kc=new Ff({Lc:e,Oc:this.ys.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Nc:"   ",Wc:t.locale}):this.Kc=new Pl(e,t.locale)}formatHorzItem(t){const e=t;return this.Kc.s_(new Date(1e3*e.Yc))}formatTickmark(t,e){const i=function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.ys.timeScale.timeVisible,this.ys.timeScale.secondsVisible),n=this.ys.timeScale;if(n.tickMarkFormatter!==void 0){const r=n.tickMarkFormatter(t.originalTime,i,e.locale);if(r!==null)return r}return function(r,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const c=r.jc===void 0?new Date(1e3*r.Yc):new Date(Date.UTC(r.jc.year,r.jc.month-1,r.jc.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(a,l)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(If,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){(function(i,n=0){if(i.length===0)return;let r=n===0?null:i[n-1].time.Yc,o=r!==null?new Date(1e3*r):null,a=0;for(let l=n;l<i.length;++l){const c=i[l],h=new Date(1e3*c.time.Yc);o!==null&&(c.timeWeight=ao(h,o)),a+=c.time.Yc-(r||c.time.Yc),r=c.time.Yc,o=h}if(n===0&&i.length>1){const l=Math.ceil(a/(i.length-1)),c=new Date(1e3*(i[0].time.Yc-l));i[0].timeWeight=ao(new Date(1e3*i[0].time.Yc),c)}})(t,e)}static Xc(t){return Pt({localization:{dateFormat:"dd MMM 'yy"}},t??{})}}const Ve=typeof window<"u";function uo(){return!!Ve&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Hi(){return!!Ve&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Tn(s){return s+s%2}function $f(s){Ve&&window.chrome!==void 0&&s.addEventListener("mousedown",t=>{if(t.button===1)return t.preventDefault(),!1})}class Ni{constructor(t,e,i){this.Zc=0,this.Gc=null,this.Jc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.Qc=0,this.td=null,this.sd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.nd=null,this.ed=!1,this.rd=null,this.hd=null,this.ad=!1,this.ld=!1,this.od=!1,this._d=null,this.ud=null,this.dd=null,this.fd=null,this.pd=null,this.vd=null,this.md=null,this.wd=0,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=0,this.xd=null,this.Cd=!Hi(),this.yd=n=>{this.kd(n)},this.Pd=n=>{if(this.Td(n)){const r=this.Rd(n);if(++this.Qc,this.td&&this.Qc>1){const{Dd:o}=this.Vd(Vt(n),this.sd);o<30&&!this.od&&this.Id(r,this.Ad.Bd),this.Ed()}}else{const r=this.Rd(n);if(++this.Zc,this.Gc&&this.Zc>1){const{Dd:o}=this.Vd(Vt(n),this.Jc);o<5&&!this.ld&&this.zd(r,this.Ad.Ld),this.Od()}}},this.Nd=t,this.Ad=e,this.ys=i,this.Wd()}m(){this._d!==null&&(this._d(),this._d=null),this.ud!==null&&(this.ud(),this.ud=null),this.fd!==null&&(this.fd(),this.fd=null),this.pd!==null&&(this.pd(),this.pd=null),this.vd!==null&&(this.vd(),this.vd=null),this.dd!==null&&(this.dd(),this.dd=null),this.Fd(),this.Od()}Hd(t){this.fd&&this.fd();const e=this.Ud.bind(this);if(this.fd=()=>{this.Nd.removeEventListener("mousemove",e)},this.Nd.addEventListener("mousemove",e),this.Td(t))return;const i=this.Rd(t);this.zd(i,this.Ad.$d),this.Cd=!0}Od(){this.Gc!==null&&clearTimeout(this.Gc),this.Zc=0,this.Gc=null,this.Jc={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Ed(){this.td!==null&&clearTimeout(this.td),this.Qc=0,this.td=null,this.sd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Ud(t){if(this.bd||this.hd!==null||this.Td(t))return;const e=this.Rd(t);this.zd(e,this.Ad.qd),this.Cd=!0}Yd(t){const e=Ki(t.changedTouches,A(this.xd));if(e===null||(this.Sd=Ps(t),this.md!==null)||this.Md)return;this.gd=!0;const i=this.Vd(Vt(e),A(this.hd)),{jd:n,Kd:r,Dd:o}=i;if(this.ad||!(o<5)){if(!this.ad){const a=.5*n,l=r>=a&&!this.ys.Xd(),c=a>r&&!this.ys.Zd();l||c||(this.Md=!0),this.ad=!0,this.od=!0,this.Fd(),this.Ed()}if(!this.Md){const a=this.Rd(t,e);this.Id(a,this.Ad.Gd),_e(t)}}}Jd(t){if(t.button!==0)return;const e=this.Vd(Vt(t),A(this.rd)),{Dd:i}=e;if(i>=5&&(this.ld=!0,this.Od()),this.ld){const n=this.Rd(t);this.zd(n,this.Ad.Qd)}}Vd(t,e){const i=Math.abs(e._t-t._t),n=Math.abs(e.ut-t.ut);return{jd:i,Kd:n,Dd:i+n}}tf(t){let e=Ki(t.changedTouches,A(this.xd));if(e===null&&t.touches.length===0&&(e=t.changedTouches[0]),e===null)return;this.xd=null,this.Sd=Ps(t),this.Fd(),this.hd=null,this.vd&&(this.vd(),this.vd=null);const i=this.Rd(t,e);if(this.Id(i,this.Ad.if),++this.Qc,this.td&&this.Qc>1){const{Dd:n}=this.Vd(Vt(e),this.sd);n<30&&!this.od&&this.Id(i,this.Ad.Bd),this.Ed()}else this.od||(this.Id(i,this.Ad.sf),this.Ad.sf&&_e(t));this.Qc===0&&_e(t),t.touches.length===0&&this.ed&&(this.ed=!1,_e(t))}kd(t){if(t.button!==0)return;const e=this.Rd(t);if(this.rd=null,this.bd=!1,this.pd&&(this.pd(),this.pd=null),uo()&&this.Nd.ownerDocument.documentElement.removeEventListener("mouseleave",this.yd),!this.Td(t))if(this.zd(e,this.Ad.nf),++this.Zc,this.Gc&&this.Zc>1){const{Dd:i}=this.Vd(Vt(t),this.Jc);i<5&&!this.ld&&this.zd(e,this.Ad.Ld),this.Od()}else this.ld||this.zd(e,this.Ad.ef)}Fd(){this.nd!==null&&(clearTimeout(this.nd),this.nd=null)}rf(t){if(this.xd!==null)return;const e=t.changedTouches[0];this.xd=e.identifier,this.Sd=Ps(t);const i=this.Nd.ownerDocument.documentElement;this.od=!1,this.ad=!1,this.Md=!1,this.hd=Vt(e),this.vd&&(this.vd(),this.vd=null);{const r=this.Yd.bind(this),o=this.tf.bind(this);this.vd=()=>{i.removeEventListener("touchmove",r),i.removeEventListener("touchend",o)},i.addEventListener("touchmove",r,{passive:!1}),i.addEventListener("touchend",o,{passive:!1}),this.Fd(),this.nd=setTimeout(this.hf.bind(this,t),240)}const n=this.Rd(t,e);this.Id(n,this.Ad.af),this.td||(this.Qc=0,this.td=setTimeout(this.Ed.bind(this),500),this.sd=Vt(e))}lf(t){if(t.button!==0)return;const e=this.Nd.ownerDocument.documentElement;uo()&&e.addEventListener("mouseleave",this.yd),this.ld=!1,this.rd=Vt(t),this.pd&&(this.pd(),this.pd=null);{const n=this.Jd.bind(this),r=this.kd.bind(this);this.pd=()=>{e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",r)},e.addEventListener("mousemove",n),e.addEventListener("mouseup",r)}if(this.bd=!0,this.Td(t))return;const i=this.Rd(t);this.zd(i,this.Ad._f),this.Gc||(this.Zc=0,this.Gc=setTimeout(this.Od.bind(this),500),this.Jc=Vt(t))}Wd(){this.Nd.addEventListener("mouseenter",this.Hd.bind(this)),this.Nd.addEventListener("touchcancel",this.Fd.bind(this));{const t=this.Nd.ownerDocument,e=i=>{this.Ad.uf&&(i.composed&&this.Nd.contains(i.composedPath()[0])||i.target&&this.Nd.contains(i.target)||this.Ad.uf())};this.ud=()=>{t.removeEventListener("touchstart",e)},this._d=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}Hi()&&(this.dd=()=>{this.Nd.removeEventListener("dblclick",this.Pd)},this.Nd.addEventListener("dblclick",this.Pd)),this.Nd.addEventListener("mouseleave",this.cf.bind(this)),this.Nd.addEventListener("touchstart",this.rf.bind(this),{passive:!0}),$f(this.Nd),this.Nd.addEventListener("mousedown",this.lf.bind(this)),this.df(),this.Nd.addEventListener("touchmove",()=>{},{passive:!1})}df(){this.Ad.ff===void 0&&this.Ad.pf===void 0&&this.Ad.vf===void 0||(this.Nd.addEventListener("touchstart",t=>this.mf(t.touches),{passive:!0}),this.Nd.addEventListener("touchmove",t=>{if(t.touches.length===2&&this.md!==null&&this.Ad.pf!==void 0){const e=fo(t.touches[0],t.touches[1])/this.wd;this.Ad.pf(this.md,e),_e(t)}},{passive:!1}),this.Nd.addEventListener("touchend",t=>{this.mf(t.touches)}))}mf(t){t.length===1&&(this.gd=!1),t.length!==2||this.gd||this.ed?this.wf():this.gf(t)}gf(t){const e=this.Nd.getBoundingClientRect()||{left:0,top:0};this.md={_t:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,ut:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.wd=fo(t[0],t[1]),this.Ad.ff!==void 0&&this.Ad.ff(),this.Fd()}wf(){this.md!==null&&(this.md=null,this.Ad.vf!==void 0&&this.Ad.vf())}cf(t){if(this.fd&&this.fd(),this.Td(t)||!this.Cd)return;const e=this.Rd(t);this.zd(e,this.Ad.Mf),this.Cd=!Hi()}hf(t){const e=Ki(t.touches,A(this.xd));if(e===null)return;const i=this.Rd(t,e);this.Id(i,this.Ad.bf),this.od=!0,this.ed=!0}Td(t){return t.sourceCapabilities&&t.sourceCapabilities.firesTouchEvents!==void 0?t.sourceCapabilities.firesTouchEvents:Ps(t)<this.Sd+500}Id(t,e){e&&e.call(this.Ad,t)}zd(t,e){e&&e.call(this.Ad,t)}Rd(t,e){const i=e||t,n=this.Nd.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-n.left,localY:i.clientY-n.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,Sf:!t.type.startsWith("mouse")&&t.type!=="contextmenu"&&t.type!=="click",xf:t.type,Cf:i.target,Qo:t.view,yf:()=>{t.type!=="touchstart"&&_e(t)}}}}function fo(s,t){const e=s.clientX-t.clientX,i=s.clientY-t.clientY;return Math.sqrt(e*e+i*i)}function _e(s){s.cancelable&&s.preventDefault()}function Vt(s){return{_t:s.pageX,ut:s.pageY}}function Ps(s){return s.timeStamp||performance.now()}function Ki(s,t){for(let e=0;e<s.length;++e)if(s[e].identifier===t)return s[e];return null}class Bf{constructor(t,e,i){this.kf=null,this.Pf=null,this.Tf=!0,this.Rf=null,this.Df=t,this.Vf=t.If()[e],this.Bf=t.If()[i],this.Af=document.createElement("tr"),this.Af.style.height="1px",this.Ef=document.createElement("td"),this.Ef.style.position="relative",this.Ef.style.padding="0",this.Ef.style.margin="0",this.Ef.setAttribute("colspan","3"),this.zf(),this.Af.appendChild(this.Ef),this.Tf=this.Df.N().layout.panes.enableResize,this.Tf?this.Lf():(this.kf=null,this.Pf=null)}m(){this.Pf!==null&&this.Pf.m()}Of(){return this.Af}Nf(){return ot({width:this.Vf.Nf().width,height:1})}Wf(){return ot({width:this.Vf.Wf().width,height:1*window.devicePixelRatio})}Ff(t,e,i){const n=this.Wf();t.fillStyle=this.Df.N().layout.panes.separatorColor,t.fillRect(e,i,n.width,n.height)}kt(){this.zf(),this.Df.N().layout.panes.enableResize!==this.Tf&&(this.Tf=this.Df.N().layout.panes.enableResize,this.Tf?this.Lf():(this.kf!==null&&(this.Ef.removeChild(this.kf.Hf),this.Ef.removeChild(this.kf.Uf),this.kf=null),this.Pf!==null&&(this.Pf.m(),this.Pf=null)))}Lf(){const t=document.createElement("div"),e=t.style;e.position="fixed",e.display="none",e.zIndex="49",e.top="0",e.left="0",e.width="100%",e.height="100%",e.cursor="row-resize",this.Ef.appendChild(t);const i=document.createElement("div"),n=i.style;n.position="absolute",n.zIndex="50",n.top="-4px",n.height="9px",n.width="100%",n.backgroundColor="",n.cursor="row-resize",this.Ef.appendChild(i);const r={$d:this.$f.bind(this),Mf:this.qf.bind(this),_f:this.Yf.bind(this),af:this.Yf.bind(this),Qd:this.jf.bind(this),Gd:this.jf.bind(this),nf:this.Kf.bind(this),if:this.Kf.bind(this)};this.Pf=new Ni(i,r,{Xd:()=>!1,Zd:()=>!0}),this.kf={Uf:i,Hf:t}}zf(){this.Ef.style.background=this.Df.N().layout.panes.separatorColor}$f(t){this.kf!==null&&(this.kf.Uf.style.backgroundColor=this.Df.N().layout.panes.separatorHoverColor)}qf(t){this.kf!==null&&this.Rf===null&&(this.kf.Uf.style.backgroundColor="")}Yf(t){if(this.kf===null)return;const e=this.Vf.Xf().ko()+this.Bf.Xf().ko(),i=e/(this.Vf.Nf().height+this.Bf.Nf().height),n=30*i;e<=2*n||(this.Rf={Zf:t.pageY,Gf:this.Vf.Xf().ko(),Jf:e-n,Qf:e,tp:i,ip:n},this.kf.Hf.style.display="block")}jf(t){const e=this.Rf;if(e===null)return;const i=(t.pageY-e.Zf)*e.tp,n=as(e.Gf+i,e.ip,e.Jf);this.Vf.Xf().Po(n),this.Bf.Xf().Po(e.Qf-n),this.Df.Qt().Bh()}Kf(t){this.Rf!==null&&this.kf!==null&&(this.Rf=null,this.kf.Hf.style.display="none")}}function Ji(s,t){return s.sp-t.sp}function qi(s,t,e){const i=(s.sp-t.sp)/(s.wt-t.wt);return Math.sign(i)*Math.min(Math.abs(i),e)}class Wf{constructor(t,e,i,n){this.np=null,this.ep=null,this.rp=null,this.hp=null,this.ap=null,this.lp=0,this.op=0,this._p=t,this.up=e,this.cp=i,this.Mn=n}dp(t,e){if(this.np!==null){if(this.np.wt===e)return void(this.np.sp=t);if(Math.abs(this.np.sp-t)<this.Mn)return}this.hp=this.rp,this.rp=this.ep,this.ep=this.np,this.np={wt:e,sp:t}}le(t,e){if(this.np===null||this.ep===null||e-this.np.wt>50)return;let i=0;const n=qi(this.np,this.ep,this.up),r=Ji(this.np,this.ep),o=[n],a=[r];if(i+=r,this.rp!==null){const c=qi(this.ep,this.rp,this.up);if(Math.sign(c)===Math.sign(n)){const h=Ji(this.ep,this.rp);if(o.push(c),a.push(h),i+=h,this.hp!==null){const u=qi(this.rp,this.hp,this.up);if(Math.sign(u)===Math.sign(n)){const m=Ji(this.rp,this.hp);o.push(u),a.push(m),i+=m}}}}let l=0;for(let c=0;c<o.length;++c)l+=a[c]/i*o[c];Math.abs(l)<this._p||(this.ap={sp:t,wt:e},this.op=l,this.lp=function(c,h){const u=Math.log(h);return Math.log(1*u/-c)/u}(Math.abs(l),this.cp))}bu(t){const e=A(this.ap),i=t-e.wt;return e.sp+this.op*(Math.pow(this.cp,i)-1)/Math.log(this.cp)}Mu(t){return this.ap===null||this.fp(t)===this.lp}fp(t){const e=t-A(this.ap).wt;return Math.min(e,this.lp)}}class Yf{constructor(t,e){this.pp=void 0,this.vp=void 0,this.mp=void 0,this.ps=!1,this.wp=t,this.gp=e,this.Mp()}kt(){this.Mp()}bp(){this.pp&&this.wp.removeChild(this.pp),this.vp&&this.wp.removeChild(this.vp),this.pp=void 0,this.vp=void 0}Sp(){return this.ps!==this.xp()||this.mp!==this.Cp()}Cp(){return this.gp.Qt().Xi().J(this.gp.N().layout.textColor)>160?"dark":"light"}xp(){return this.gp.N().layout.attributionLogo}yp(){const t=new URL(location.href);return t.hostname?"&utm_source="+t.hostname+t.pathname:""}Mp(){this.Sp()&&(this.bp(),this.ps=this.xp(),this.ps&&(this.mp=this.Cp(),this.vp=document.createElement("style"),this.vp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.pp=document.createElement("a"),this.pp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.yp()}`,this.pp.title="Charting by TradingView",this.pp.id="tv-attr-logo",this.pp.target="_blank",this.pp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.pp.toggleAttribute("data-dark",this.mp==="dark"),this.wp.appendChild(this.vp),this.wp.appendChild(this.pp)))}}function ge(s,t){const e=A(s.ownerDocument).createElement("canvas");s.appendChild(e);const i=Rd(e,{type:"device-pixel-content-box",options:{allowResizeObserver:!0},transform:(n,r)=>({width:Math.max(n.width,r.width),height:Math.max(n.height,r.height)})});return i.resizeCanvasElement(t),i}function ve(s){var t;s.width=1,s.height=1,(t=s.getContext("2d"))==null||t.clearRect(0,0,1,1)}function Nn(s,t,e,i){s.ih&&s.ih(t,e,i)}function js(s,t,e,i){s.nt(t,e,i)}function Rn(s,t,e,i){const n=s(e,i);for(const r of n){const o=r.Tt(i);o!==null&&t(o)}}function tn(s,t){return e=>{var i,n;return function(r){return r.Wt!==void 0}(e)?(((i=e.Wt())==null?void 0:i.wa())??"")!==t?[]:((n=e.ta)==null?void 0:n.call(e,s))??[]:[]}}function mo(s,t,e,i){if(!s.length)return;let n=0;const r=s[0].$t(i,!0);let o=t===1?e/2-(s[0].Wi()-r/2):s[0].Wi()-r/2-e/2;o=Math.max(0,o);for(let a=1;a<s.length;a++){const l=s[a],c=s[a-1],h=c.$t(i,!1),u=l.Wi(),m=c.Wi();if(t===1?u>m-h:u<m+h){const g=m-h*t;l.Fi(g);const y=g-t*h/2;if((t===1?y<0:y>e)&&o>0){const w=t===1?-1-y:y-e,b=Math.min(w,o);for(let S=n;S<s.length;S++)s[S].Fi(s[S].Wi()+t*b);o-=b}}else n=a,o=t===1?m-h-u:u-(m+h)}}class po{constructor(t,e,i,n){this.Yi=null,this.kp=null,this.Pp=!1,this.Tp=new ui(200),this.Rp=null,this.Dp=0,this.Vp=!1,this.Ip=()=>{this.Vp||this.yt.Bp().Qt().ar()},this.Ap=()=>{this.Vp||this.yt.Bp().Qt().ar()},this.yt=t,this.ys=e,this.gl=e.layout,this.Uu=i,this.Ep=n==="left",this.zp=tn("normal",n),this.Lp=tn("top",n),this.Op=tn("bottom",n),this.Ef=document.createElement("div"),this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.Ef.style.width="25px",this.Ef.style.left="0",this.Ef.style.position="relative",this.Np=ge(this.Ef,ot({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip);const r=this.Np.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Wp=ge(this.Ef,ot({width:16,height:16})),this.Wp.subscribeSuggestedBitmapSizeChanged(this.Ap);const o=this.Wp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={_f:this.Yf.bind(this),af:this.Yf.bind(this),Qd:this.jf.bind(this),Gd:this.jf.bind(this),uf:this.Fp.bind(this),nf:this.Kf.bind(this),if:this.Kf.bind(this),Ld:this.Hp.bind(this),Bd:this.Hp.bind(this),$d:this.Up.bind(this),Mf:this.qf.bind(this)};this.Pf=new Ni(this.Wp.canvasElement,a,{Xd:()=>!this.ys.handleScroll.vertTouchDrag,Zd:()=>!0})}m(){this.Pf.m(),this.Wp.unsubscribeSuggestedBitmapSizeChanged(this.Ap),ve(this.Wp.canvasElement),this.Wp.dispose(),this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),ve(this.Np.canvasElement),this.Np.dispose(),this.Yi!==null&&this.Yi.io().u(this),this.Yi=null}Of(){return this.Ef}k(){return this.gl.fontSize}$p(){const t=this.Uu.N();return this.Rp!==t.P&&(this.Tp.In(),this.Rp=t.P),t}qp(){if(this.Yi===null)return 0;let t=0;const e=this.$p(),i=A(this.Np.canvasElement.getContext("2d",{colorSpace:this.yt.Bp().N().layout.colorSpace}));i.save();const n=this.Yi.Va();i.font=this.Yp(),n.length>0&&(t=Math.max(this.Tp.Vi(i,n[0].Xa),this.Tp.Vi(i,n[n.length-1].Xa)));const r=this.jp();for(let c=r.length;c--;){const h=this.Tp.Vi(i,r[c].ri());h>t&&(t=h)}const o=this.Yi.zt();if(o!==null&&this.kp!==null&&(a=this.ys.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const c=this.Yi.Ts(1,o),h=this.Yi.Ts(this.kp.height-2,o);t=Math.max(t,this.Tp.Vi(i,this.Yi.Zi(Math.floor(Math.min(c,h))+.11111111111111,o)),this.Tp.Vi(i,this.Yi.Zi(Math.ceil(Math.max(c,h))-.11111111111111,o)))}var a;i.restore();const l=t||34;return Tn(Math.ceil(e.S+e.C+e.I+e.B+5+l))}Kp(t){this.kp!==null&&de(this.kp,t)||(this.kp=t,this.Vp=!0,this.Np.resizeCanvasElement(t),this.Wp.resizeCanvasElement(t),this.Vp=!1,this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`)}Xp(){return A(this.kp).width}_s(t){this.Yi!==t&&(this.Yi!==null&&this.Yi.io().u(this),this.Yi=t,t.io().i(this.ol.bind(this),this))}Wt(){return this.Yi}In(){const t=this.yt.Xf();this.yt.Bp().Qt().Ho(t,A(this.Wt()))}Zp(t){if(this.kp===null)return;const e={colorSpace:this.yt.Bp().N().layout.colorSpace};if(t!==1){this.Gp(),this.Np.applySuggestedBitmapSize();const n=pe(this.Np,e);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.Jp(r),this.Qp(r)}),this.yt.tv(n,this.Op),this.iv(n),this.yt.tv(n,this.zp),this.sv(n))}this.Wp.applySuggestedBitmapSize();const i=pe(this.Wp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.nv(i),this.yt.tv(i,this.Lp))}Wf(){return this.Np.bitmapSize}Ff(t,e,i){const n=this.Wf();n.width>0&&n.height>0&&t.drawImage(this.Np.canvasElement,e,i)}kt(){var t;(t=this.Yi)==null||t.Va()}Yf(t){if(this.Yi===null||this.Yi.Ki()||!this.ys.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Bp().Qt(),i=this.yt.Xf();this.Pp=!0,e.Eo(i,this.Yi,t.localY)}jf(t){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Bp().Qt(),i=this.yt.Xf(),n=this.Yi;e.zo(i,n,t.localY)}Fp(){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;const t=this.yt.Bp().Qt(),e=this.yt.Xf(),i=this.Yi;this.Pp&&(this.Pp=!1,t.Lo(e,i))}Kf(t){if(this.Yi===null||!this.ys.handleScale.axisPressedMouseMove.price)return;const e=this.yt.Bp().Qt(),i=this.yt.Xf();this.Pp=!1,e.Lo(i,this.Yi)}Hp(t){this.ys.handleScale.axisDoubleClickReset.price&&this.In()}Up(t){this.Yi!==null&&(!this.yt.Bp().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Rl()||this.ev(1))}qf(t){this.ev(0)}jp(){const t=[],e=this.Yi===null?void 0:this.Yi;return(i=>{for(let n=0;n<i.length;++n){const r=i[n].Fs(this.yt.Xf(),e);for(let o=0;o<r.length;o++)t.push(r[o])}})(this.yt.Xf().Dt()),t}Jp({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.yt.Xf().Qt(),o=r.$(),a=r.Vc();o===a?Si(t,0,0,i,n,o):wl(t,0,0,i,n,o,a)}Qp({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(this.kp===null||this.Yi===null||!this.Yi.N().borderVisible)return;t.fillStyle=this.Yi.N().borderColor;const n=Math.max(1,Math.floor(this.$p().S*i));let r;r=this.Ep?e.width-n:0,t.fillRect(r,0,n,e.height)}iv(t){if(this.kp===null||this.Yi===null)return;const e=this.Yi.Va(),i=this.Yi.N(),n=this.$p(),r=this.Ep?this.kp.width-n.C:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=i.borderColor;const c=Math.max(1,Math.floor(l)),h=Math.floor(.5*l),u=Math.round(n.C*a);o.beginPath();for(const m of e)o.rect(Math.floor(r*a),Math.round(m.ka*l)-h,u,c);o.fill()}),t.useMediaCoordinateSpace(({context:o})=>{o.font=this.Yp(),o.fillStyle=i.textColor??this.gl.textColor,o.textAlign=this.Ep?"right":"left",o.textBaseline="middle";const a=this.Ep?Math.round(r-n.I):Math.round(r+n.C+n.I),l=e.map(c=>this.Tp.Di(o,c.Xa));for(let c=e.length;c--;){const h=e[c];o.fillText(h.Xa,a,h.ka+l[c])}})}Gp(){if(this.kp===null||this.Yi===null)return;let t=this.kp.height/2;const e=[],i=this.Yi.Dt().slice(),n=this.yt.Xf(),r=this.$p();this.Yi===n.$n()&&this.yt.Xf().Dt().forEach(l=>{n.Un(l)&&i.push(l)});const o=this.Yi.ba()[0],a=this.Yi;i.forEach(l=>{const c=l.Fs(n,a);c.forEach(h=>{h.Fi(null),h.Hi()&&e.push(h)}),o===l&&c.length>0&&(t=c[0].Bi())}),e.forEach(l=>l.Fi(l.Bi())),this.Yi.N().alignLabels&&this.rv(e,r,t)}rv(t,e,i){if(this.kp===null)return;const n=t.filter(o=>o.Bi()<=i),r=t.filter(o=>o.Bi()>i);n.sort((o,a)=>a.Bi()-o.Bi()),n.length&&r.length&&r.push(n[0]),r.sort((o,a)=>o.Bi()-a.Bi());for(const o of t){const a=Math.floor(o.$t(e)/2),l=o.Bi();l>-a&&l<a&&o.Fi(a),l>this.kp.height-a&&l<this.kp.height+a&&o.Fi(this.kp.height-a)}mo(n,1,this.kp.height,e),mo(r,-1,this.kp.height,e)}sv(t){if(this.kp===null)return;const e=this.jp(),i=this.$p(),n=this.Ep?"right":"left";e.forEach(r=>{r.Ui()&&r.Tt(A(this.Yi)).nt(t,i,this.Tp,n)})}nv(t){if(this.kp===null||this.Yi===null)return;const e=this.yt.Bp().Qt(),i=[],n=this.yt.Xf(),r=e.sc().Fs(n,this.Yi);r.length&&i.push(r);const o=this.$p(),a=this.Ep?"right":"left";i.forEach(l=>{l.forEach(c=>{c.Tt(A(this.Yi)).nt(t,o,this.Tp,a)})})}ev(t){this.Ef.style.cursor=t===1?"ns-resize":"default"}ol(){const t=this.qp();this.Dp<t&&this.yt.Bp().Qt().Bh(),this.Dp=t}Yp(){return hi(this.gl.fontSize,this.gl.fontFamily)}}function Uf(s,t){var e;return((e=s.Jh)==null?void 0:e.call(s,t))??[]}function go(s,t){var e;return((e=s.Ws)==null?void 0:e.call(s,t))??[]}function vo(s,t){var e;return((e=s.us)==null?void 0:e.call(s,t))??[]}function Zf(s,t){var e;return((e=s.Xh)==null?void 0:e.call(s,t))??[]}class tr{constructor(t,e){this.kp=ot({width:0,height:0}),this.hv=null,this.av=null,this.lv=null,this.ov=null,this._v=!1,this.uv=new ft,this.cv=new ft,this.dv=0,this.fv=!1,this.pv=null,this.vv=!1,this.mv=null,this.wv=null,this.Vp=!1,this.Ip=()=>{this.Vp||this.gv===null||this.ts().ar()},this.Ap=()=>{this.Vp||this.gv===null||this.ts().ar()},this.gp=t,this.gv=e,this.gv.Yo().i(this.Mv.bind(this),this,!0),this.bv=document.createElement("td"),this.bv.style.padding="0",this.bv.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Sv=document.createElement("td"),this.Sv.style.padding="0",this.xv=document.createElement("td"),this.xv.style.padding="0",this.bv.appendChild(i),this.Np=ge(i,ot({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip);const n=this.Np.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Wp=ge(i,ot({width:16,height:16})),this.Wp.subscribeSuggestedBitmapSizeChanged(this.Ap);const r=this.Wp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Af=document.createElement("tr"),this.Af.appendChild(this.Sv),this.Af.appendChild(this.bv),this.Af.appendChild(this.xv),this.Cv(),this.Pf=new Ni(this.Wp.canvasElement,this,{Xd:()=>this.pv===null&&!this.gp.N().handleScroll.vertTouchDrag,Zd:()=>this.pv===null&&!this.gp.N().handleScroll.horzTouchDrag})}m(){this.hv!==null&&this.hv.m(),this.av!==null&&this.av.m(),this.lv=null,this.Wp.unsubscribeSuggestedBitmapSizeChanged(this.Ap),ve(this.Wp.canvasElement),this.Wp.dispose(),this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),ve(this.Np.canvasElement),this.Np.dispose(),this.gv!==null&&(this.gv.Yo().u(this),this.gv.m()),this.Pf.m()}Xf(){return A(this.gv)}yv(t){var e;this.gv!==null&&this.gv.Yo().u(this),this.gv=t,this.gv!==null&&this.gv.Yo().i(tr.prototype.Mv.bind(this),this,!0),this.Cv(),this.gp.If().indexOf(this)===this.gp.If().length-1?(this.lv=this.lv??new Yf(this.bv,this.gp),this.lv.kt()):((e=this.lv)==null||e.bp(),this.lv=null)}Bp(){return this.gp}Of(){return this.Af}Cv(){if(this.gv!==null&&(this.kv(),this.ts().js().length!==0)){if(this.hv!==null){const t=this.gv.Bo();this.hv._s(A(t))}if(this.av!==null){const t=this.gv.Ao();this.av._s(A(t))}}}Pv(){this.hv!==null&&this.hv.kt(),this.av!==null&&this.av.kt()}ko(){return this.gv!==null?this.gv.ko():0}Po(t){this.gv&&this.gv.Po(t)}$d(t){if(!this.gv)return;this.Tv();const e=t.localX,i=t.localY;this.Rv(e,i,t)}_f(t){this.Tv(),this.Dv(),this.Rv(t.localX,t.localY,t)}qd(t){if(!this.gv)return;this.Tv();const e=t.localX,i=t.localY;this.Rv(e,i,t)}ef(t){this.gv!==null&&(this.Tv(),this.Vv(t))}Ld(t){this.gv!==null&&this.Iv(this.cv,t)}Bd(t){this.Ld(t)}Qd(t){this.Tv(),this.Bv(t),this.Rv(t.localX,t.localY,t)}nf(t){this.gv!==null&&(this.Tv(),this.fv=!1,this.Av(t))}sf(t){this.gv!==null&&this.Vv(t)}bf(t){if(this.fv=!0,this.pv===null){const e={x:t.localX,y:t.localY};this.Ev(e,e,t)}}Mf(t){this.gv!==null&&(this.Tv(),this.gv.Qt().Ju(null),this.zv())}Lv(){return this.uv}Ov(){return this.cv}ff(){this.dv=1,this.ts().hn()}pf(t,e){if(!this.gp.N().handleScale.pinch)return;const i=5*(e-this.dv);this.dv=e,this.ts()._c(t._t,i)}af(t){this.fv=!1,this.vv=this.pv!==null,this.Dv();const e=this.ts().sc();this.pv!==null&&e.Vt()&&(this.mv={x:e.si(),y:e.ni()},this.pv={x:t.localX,y:t.localY})}Gd(t){if(this.gv===null)return;const e=t.localX,i=t.localY;if(this.pv===null)this.Bv(t);else{this.vv=!1;const n=A(this.mv),r=n.x+(e-this.pv.x),o=n.y+(i-this.pv.y);this.Rv(r,o,t)}}if(t){this.Bp().N().trackingMode.exitMode===0&&(this.vv=!0),this.Nv(),this.Av(t)}jn(t,e){const i=this.gv;return i===null?null:Ml(i,t,e)}Wv(t,e){A(e==="left"?this.hv:this.av).Kp(ot({width:t,height:this.kp.height}))}Nf(){return this.kp}Kp(t){de(this.kp,t)||(this.kp=t,this.Vp=!0,this.Np.resizeCanvasElement(t),this.Wp.resizeCanvasElement(t),this.Vp=!1,this.bv.style.width=t.width+"px",this.bv.style.height=t.height+"px")}Fv(){const t=A(this.gv);t.Io(t.Bo()),t.Io(t.Ao());for(const e of t.ba())if(t.Un(e)){const i=e.Wt();i!==null&&t.Io(i),e.Ns()}for(const e of t.Ko())e.Ns()}Wf(){return this.Np.bitmapSize}Ff(t,e,i){const n=this.Wf();n.width>0&&n.height>0&&t.drawImage(this.Np.canvasElement,e,i)}Zp(t){if(t===0||this.gv===null)return;t>1&&this.Fv(),this.hv!==null&&this.hv.Zp(t),this.av!==null&&this.av.Zp(t);const e={colorSpace:this.gp.N().layout.colorSpace};if(t!==1){this.Np.applySuggestedBitmapSize();const n=pe(this.Np,e);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.Jp(r)}),this.gv&&(this.Hv(n,Uf),this.Uv(n),this.Hv(n,go),this.Hv(n,vo)))}this.Wp.applySuggestedBitmapSize();const i=pe(this.Wp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.$v(i),this.Hv(i,Zf),this.Hv(i,vo))}qv(){return this.hv}Yv(){return this.av}tv(t,e){this.Hv(t,e)}Mv(){this.gv!==null&&this.gv.Yo().u(this),this.gv=null}Vv(t){this.Iv(this.uv,t)}Iv(t,e){const i=e.localX,n=e.localY;t.v()&&t.p(this.ts().At().nu(i),{x:i,y:n},e)}Jp({context:t,bitmapSize:e}){const{width:i,height:n}=e,r=this.ts(),o=r.$(),a=r.Vc();o===a?Si(t,0,0,i,n,a):wl(t,0,0,i,n,o,a)}Uv(t){const e=A(this.gv),i=e.jo().lr().Tt(e);i!==null&&i.nt(t,!1)}$v(t){this.jv(t,go,js,this.ts().sc())}Hv(t,e){const i=A(this.gv),n=i.Dt(),r=i.Ko();for(const o of r)this.jv(t,e,Nn,o);for(const o of n)this.jv(t,e,Nn,o);for(const o of r)this.jv(t,e,js,o);for(const o of n)this.jv(t,e,js,o)}jv(t,e,i,n){const r=A(this.gv),o=r.Qt().Gu(),a=o!==null&&o.Xo===n,l=o!==null&&a&&o.Zo!==void 0?o.Zo.Xn:void 0;Rn(e,c=>i(c,t,a,l),n,r)}kv(){if(this.gv===null)return;const t=this.gp,e=this.gv.Bo().N().visible,i=this.gv.Ao().N().visible;e||this.hv===null||(this.Sv.removeChild(this.hv.Of()),this.hv.m(),this.hv=null),i||this.av===null||(this.xv.removeChild(this.av.Of()),this.av.m(),this.av=null);const n=t.Qt().Sc();e&&this.hv===null&&(this.hv=new po(this,t.N(),n,"left"),this.Sv.appendChild(this.hv.Of())),i&&this.av===null&&(this.av=new po(this,t.N(),n,"right"),this.xv.appendChild(this.av.Of()))}Kv(t){return t.Sf&&this.fv||this.pv!==null}Xv(t){return Math.max(0,Math.min(t,this.kp.width-1))}Zv(t){return Math.max(0,Math.min(t,this.kp.height-1))}Rv(t,e,i){this.ts().wc(this.Xv(t),this.Zv(e),i,A(this.gv))}zv(){this.ts().Mc()}Nv(){this.vv&&(this.pv=null,this.zv())}Ev(t,e,i){this.pv=t,this.vv=!1,this.Rv(e.x,e.y,i);const n=this.ts().sc();this.mv={x:n.si(),y:n.ni()}}ts(){return this.gp.Qt()}Av(t){if(!this._v)return;const e=this.ts(),i=this.Xf();if(e.Wo(i,i.Ps()),this.ov=null,this._v=!1,e.fc(),this.wv!==null){const n=performance.now(),r=e.At();this.wv.le(r._u(),n),this.wv.Mu(n)||e._n(this.wv)}}Tv(){this.pv=null}Dv(){if(this.gv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)A(document.activeElement).blur();else{const t=document.getSelection();t!==null&&t.removeAllRanges()}!this.gv.Ps().Ki()&&this.ts().At().Ki()}}Bv(t){if(this.gv===null)return;const e=this.ts(),i=e.At();if(i.Ki())return;const n=this.gp.N(),r=n.handleScroll,o=n.kineticScroll;if((!r.pressedMouseMove||t.Sf)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t.Sf))return;const a=this.gv.Ps(),l=performance.now();if(this.ov!==null||this.Kv(t)||(this.ov={x:t.clientX,y:t.clientY,Yc:l,Gv:t.localX,Jv:t.localY}),this.ov!==null&&!this._v&&(this.ov.x!==t.clientX||this.ov.y!==t.clientY)){if(t.Sf&&o.touch||!t.Sf&&o.mouse){const c=i.lu();this.wv=new Wf(.2/c,7/c,.997,15/c),this.wv.dp(i._u(),this.ov.Yc)}else this.wv=null;a.Ki()||e.Oo(this.gv,a,t.localY),e.cc(t.localX),this._v=!0}this._v&&(a.Ki()||e.No(this.gv,a,t.localY),e.dc(t.localX),this.wv!==null&&this.wv.dp(i._u(),l))}}class yo{constructor(t,e,i,n,r){this.xt=!0,this.kp=ot({width:0,height:0}),this.Ip=()=>this.Zp(3),this.Ep=t==="left",this.Uu=i.Sc,this.ys=e,this.Qv=n,this.tm=r,this.Ef=document.createElement("div"),this.Ef.style.width="25px",this.Ef.style.height="100%",this.Ef.style.overflow="hidden",this.Np=ge(this.Ef,ot({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip)}m(){this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),ve(this.Np.canvasElement),this.Np.dispose()}Of(){return this.Ef}Nf(){return this.kp}Kp(t){de(this.kp,t)||(this.kp=t,this.Np.resizeCanvasElement(t),this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`,this.xt=!0)}Zp(t){if(t<3&&!this.xt||this.kp.width===0||this.kp.height===0)return;this.xt=!1,this.Np.applySuggestedBitmapSize();const e=pe(this.Np,{colorSpace:this.ys.layout.colorSpace});e!==null&&e.useBitmapCoordinateSpace(i=>{this.Jp(i),this.Qp(i)})}Wf(){return this.Np.bitmapSize}Ff(t,e,i){const n=this.Wf();n.width>0&&n.height>0&&t.drawImage(this.Np.canvasElement,e,i)}Qp({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:n}){if(!this.Qv())return;t.fillStyle=this.ys.timeScale.borderColor;const r=Math.floor(this.Uu.N().S*i),o=Math.floor(this.Uu.N().S*n),a=this.Ep?e.width-r:0;t.fillRect(a,0,r,o)}Jp({context:t,bitmapSize:e}){Si(t,0,0,e.width,e.height,this.tm())}}function er(s){return t=>{var e;return((e=t.ia)==null?void 0:e.call(t,s))??[]}}const Xf=er("normal"),Qf=er("top"),Gf=er("bottom");class Hf{constructor(t,e){this.im=null,this.sm=null,this.M=null,this.nm=!1,this.kp=ot({width:0,height:0}),this.rm=new ft,this.Tp=new ui(5),this.Vp=!1,this.Ip=()=>{this.Vp||this.gp.Qt().ar()},this.Ap=()=>{this.Vp||this.gp.Qt().ar()},this.gp=t,this.i_=e,this.ys=t.N().layout,this.pp=document.createElement("tr"),this.hm=document.createElement("td"),this.hm.style.padding="0",this.am=document.createElement("td"),this.am.style.padding="0",this.Ef=document.createElement("td"),this.Ef.style.height="25px",this.Ef.style.padding="0",this.lm=document.createElement("div"),this.lm.style.width="100%",this.lm.style.height="100%",this.lm.style.position="relative",this.lm.style.overflow="hidden",this.Ef.appendChild(this.lm),this.Np=ge(this.lm,ot({width:16,height:16})),this.Np.subscribeSuggestedBitmapSizeChanged(this.Ip);const i=this.Np.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Wp=ge(this.lm,ot({width:16,height:16})),this.Wp.subscribeSuggestedBitmapSizeChanged(this.Ap);const n=this.Wp.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.pp.appendChild(this.hm),this.pp.appendChild(this.Ef),this.pp.appendChild(this.am),this.om(),this.gp.Qt().yo().i(this.om.bind(this),this),this.Pf=new Ni(this.Wp.canvasElement,this,{Xd:()=>!0,Zd:()=>!this.gp.N().handleScroll.horzTouchDrag})}m(){this.Pf.m(),this.im!==null&&this.im.m(),this.sm!==null&&this.sm.m(),this.Wp.unsubscribeSuggestedBitmapSizeChanged(this.Ap),ve(this.Wp.canvasElement),this.Wp.dispose(),this.Np.unsubscribeSuggestedBitmapSizeChanged(this.Ip),ve(this.Np.canvasElement),this.Np.dispose()}Of(){return this.pp}_m(){return this.im}um(){return this.sm}_f(t){if(this.nm)return;this.nm=!0;const e=this.gp.Qt();!e.At().Ki()&&this.gp.N().handleScale.axisPressedMouseMove.time&&e.oc(t.localX)}af(t){this._f(t)}uf(){const t=this.gp.Qt();!t.At().Ki()&&this.nm&&(this.nm=!1,this.gp.N().handleScale.axisPressedMouseMove.time&&t.mc())}Qd(t){const e=this.gp.Qt();!e.At().Ki()&&this.gp.N().handleScale.axisPressedMouseMove.time&&e.vc(t.localX)}Gd(t){this.Qd(t)}nf(){this.nm=!1;const t=this.gp.Qt();t.At().Ki()&&!this.gp.N().handleScale.axisPressedMouseMove.time||t.mc()}if(){this.nf()}Ld(){this.gp.N().handleScale.axisDoubleClickReset.time&&this.gp.Qt().cn()}Bd(){this.Ld()}$d(){this.gp.Qt().N().handleScale.axisPressedMouseMove.time&&this.ev(1)}Mf(){this.ev(0)}Nf(){return this.kp}dm(){return this.rm}fm(t,e,i){de(this.kp,t)||(this.kp=t,this.Vp=!0,this.Np.resizeCanvasElement(t),this.Wp.resizeCanvasElement(t),this.Vp=!1,this.Ef.style.width=`${t.width}px`,this.Ef.style.height=`${t.height}px`,this.rm.p(t)),this.im!==null&&this.im.Kp(ot({width:e,height:t.height})),this.sm!==null&&this.sm.Kp(ot({width:i,height:t.height}))}pm(){const t=this.vm();return Math.ceil(t.S+t.C+t.k+t.A+t.V+t.wm)}kt(){this.gp.Qt().At().Va()}Wf(){return this.Np.bitmapSize}Ff(t,e,i){const n=this.Wf();n.width>0&&n.height>0&&t.drawImage(this.Np.canvasElement,e,i)}Zp(t){if(t===0)return;const e={colorSpace:this.ys.colorSpace};if(t!==1){this.Np.applySuggestedBitmapSize();const n=pe(this.Np,e);n!==null&&(n.useBitmapCoordinateSpace(r=>{this.Jp(r),this.Qp(r),this.gm(n,Gf)}),this.iv(n),this.gm(n,Xf)),this.im!==null&&this.im.Zp(t),this.sm!==null&&this.sm.Zp(t)}this.Wp.applySuggestedBitmapSize();const i=pe(this.Wp,e);i!==null&&(i.useBitmapCoordinateSpace(({context:n,bitmapSize:r})=>{n.clearRect(0,0,r.width,r.height)}),this.Mm([...this.gp.Qt().js(),this.gp.Qt().sc()],i),this.gm(i,Qf))}gm(t,e){const i=this.gp.Qt().js();for(const n of i)Rn(e,r=>Nn(r,t,!1,void 0),n,void 0);for(const n of i)Rn(e,r=>js(r,t,!1,void 0),n,void 0)}Jp({context:t,bitmapSize:e}){Si(t,0,0,e.width,e.height,this.gp.Qt().Vc())}Qp({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.gp.N().timeScale.borderVisible){t.fillStyle=this.bm();const n=Math.max(1,Math.floor(this.vm().S*i));t.fillRect(0,0,e.width,n)}}iv(t){const e=this.gp.Qt().At(),i=e.Va();if(!i||i.length===0)return;const n=this.i_.maxTickMarkWeight(i),r=this.vm(),o=e.N();o.borderVisible&&o.ticksVisible&&t.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:c})=>{a.strokeStyle=this.bm(),a.fillStyle=this.bm();const h=Math.max(1,Math.floor(l)),u=Math.floor(.5*l);a.beginPath();const m=Math.round(r.C*c);for(let g=i.length;g--;){const y=Math.round(i[g].coord*l);a.rect(y-u,0,h,m)}a.fill()}),t.useMediaCoordinateSpace(({context:a})=>{const l=r.S+r.C+r.A+r.k/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.H(),a.font=this.Yp();for(const c of i)if(c.weight<n){const h=c.needAlignCoordinate?this.Sm(a,c.coord,c.label):c.coord;a.fillText(c.label,h,l)}this.gp.N().timeScale.allowBoldLabels&&(a.font=this.xm());for(const c of i)if(c.weight>=n){const h=c.needAlignCoordinate?this.Sm(a,c.coord,c.label):c.coord;a.fillText(c.label,h,l)}})}Sm(t,e,i){const n=this.Tp.Vi(t,i),r=n/2,o=Math.floor(e-r)+.5;return o<0?e+=Math.abs(0-o):o+n>this.kp.width&&(e-=Math.abs(this.kp.width-(o+n))),e}Mm(t,e){const i=this.vm();for(const n of t)for(const r of n.cs())r.Tt().nt(e,i)}bm(){return this.gp.N().timeScale.borderColor}H(){return this.ys.textColor}W(){return this.ys.fontSize}Yp(){return hi(this.W(),this.ys.fontFamily)}xm(){return hi(this.W(),this.ys.fontFamily,"bold")}vm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,k:NaN,P:"",Gi:new ui,wm:0});const t=this.M,e=this.Yp();if(t.P!==e){const i=this.W();t.k=i,t.P=e,t.A=3*i/12,t.V=3*i/12,t.Ji=9*i/12,t.L=0,t.wm=4*i/12,t.Gi.In()}return this.M}ev(t){this.Ef.style.cursor=t===1?"ew-resize":"default"}om(){const t=this.gp.Qt(),e=t.N();e.leftPriceScale.visible||this.im===null||(this.hm.removeChild(this.im.Of()),this.im.m(),this.im=null),e.rightPriceScale.visible||this.sm===null||(this.am.removeChild(this.sm.Of()),this.sm.m(),this.sm=null);const i={Sc:this.gp.Qt().Sc()},n=()=>e.leftPriceScale.borderVisible&&t.At().N().borderVisible,r=()=>t.Vc();e.leftPriceScale.visible&&this.im===null&&(this.im=new yo("left",e,i,n,r),this.hm.appendChild(this.im.Of())),e.rightPriceScale.visible&&this.sm===null&&(this.sm=new yo("right",e,i,n,r),this.am.appendChild(this.sm.Of()))}}var Do;const Kf=!!Ve&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(s=>s.brand.includes("Chromium"))&&!!Ve&&((Do=navigator==null?void 0:navigator.userAgentData)!=null&&Do.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class Jf{constructor(t,e,i){var n;this.Cm=[],this.ym=[],this.km=0,this.tl=0,this.fo=0,this.Pm=0,this.Tm=0,this.Rm=null,this.Dm=!1,this.uv=new ft,this.cv=new ft,this.Wu=new ft,this.Vm=null,this.Im=null,this.wp=t,this.ys=e,this.i_=i,this.pp=document.createElement("div"),this.pp.classList.add("tv-lightweight-charts"),this.pp.style.overflow="hidden",this.pp.style.direction="ltr",this.pp.style.width="100%",this.pp.style.height="100%",(n=this.pp).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Bm=document.createElement("table"),this.Bm.setAttribute("cellspacing","0"),this.pp.appendChild(this.Bm),this.Am=this.Em.bind(this),en(this.ys)&&this.zm(!0),this.ts=new Lf(this.Hu.bind(this),this.ys,i),this.Qt().nc().i(this.Lm.bind(this),this),this.Om=new Hf(this,this.i_),this.Bm.appendChild(this.Om.Of());const r=e.autoSize&&this.Nm();let o=this.ys.width,a=this.ys.height;if(r||o===0||a===0){const l=t.getBoundingClientRect();o=o||l.width,a=a||l.height}this.Wm(o,a),this.Fm(),t.appendChild(this.pp),this.Hm(),this.ts.At().Cu().i(this.ts.Bh.bind(this.ts),this),this.ts.yo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.ys}If(){return this.Cm}Um(){return this.Om}m(){this.zm(!1),this.km!==0&&window.cancelAnimationFrame(this.km),this.ts.nc().u(this),this.ts.At().Cu().u(this),this.ts.yo().u(this),this.ts.m();for(const t of this.Cm)this.Bm.removeChild(t.Of()),t.Lv().u(this),t.Ov().u(this),t.m();this.Cm=[];for(const t of this.ym)this.$m(t);this.ym=[],A(this.Om).m(),this.pp.parentElement!==null&&this.pp.parentElement.removeChild(this.pp),this.Wu.m(),this.uv.m(),this.cv.m(),this.qm()}Wm(t,e,i=!1){if(this.tl===e&&this.fo===t)return;const n=function(a){const l=Math.floor(a.width),c=Math.floor(a.height);return ot({width:l-l%2,height:c-c%2})}(ot({width:t,height:e}));this.tl=n.height,this.fo=n.width;const r=this.tl+"px",o=this.fo+"px";A(this.pp).style.height=r,A(this.pp).style.width=o,this.Bm.style.height=r,this.Bm.style.width=o,i?this.Ym(wt.gn(),performance.now()):this.ts.Bh()}Zp(t){t===void 0&&(t=wt.gn());for(let e=0;e<this.Cm.length;e++)this.Cm[e].Zp(t.en(e).tn);this.ys.timeScale.visible&&this.Om.Zp(t.nn())}hr(t){var n;const e=en(this.ys);this.ts.hr(t);const i=en(this.ys);i!==e&&this.zm(i),(n=t.layout)!=null&&n.panes&&this.jm(),this.Hm(),this.Km(t)}Lv(){return this.uv}Ov(){return this.cv}nc(){return this.Wu}Xm(){this.Rm!==null&&(this.Ym(this.Rm,performance.now()),this.Rm=null);const t=this.Zm(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=A(e.getContext("2d"));return this.Zm(i),e}Gm(t){return t==="left"&&!this.Jm()||t==="right"&&!this.Qm()||this.Cm.length===0?0:A(t==="left"?this.Cm[0].qv():this.Cm[0].Yv()).Xp()}tw(){return this.ys.autoSize&&this.Vm!==null}Uf(){return this.pp}iw(t){this.Im=t,this.Im?this.Uf().style.setProperty("cursor",t):this.Uf().style.removeProperty("cursor")}sw(){return this.Im}nw(t){return Mt(this.Cm[t]).Nf()}jm(){this.ym.forEach(t=>{t.kt()})}Km(t){(t.autoSize!==void 0||!this.Vm||t.width===void 0&&t.height===void 0)&&(t.autoSize&&!this.Vm&&this.Nm(),t.autoSize===!1&&this.Vm!==null&&this.qm(),t.autoSize||t.width===void 0&&t.height===void 0||this.Wm(t.width||this.fo,t.height||this.tl))}Zm(t){let e=0,i=0;const n=this.Cm[0],r=(a,l)=>{let c=0;for(let h=0;h<this.Cm.length;h++){const u=this.Cm[h],m=A(a==="left"?u.qv():u.Yv()),g=m.Wf();if(t!==null&&m.Ff(t,l,c),c+=g.height,h<this.Cm.length-1){const y=this.ym[h],w=y.Wf();t!==null&&y.Ff(t,l,c),c+=w.height}}};this.Jm()&&(r("left",0),e+=A(n.qv()).Wf().width);for(let a=0;a<this.Cm.length;a++){const l=this.Cm[a],c=l.Wf();if(t!==null&&l.Ff(t,e,i),i+=c.height,a<this.Cm.length-1){const h=this.ym[a],u=h.Wf();t!==null&&h.Ff(t,e,i),i+=u.height}}e+=n.Wf().width,this.Qm()&&(r("right",e),e+=A(n.Yv()).Wf().width);const o=(a,l,c)=>{A(a==="left"?this.Om._m():this.Om.um()).Ff(A(t),l,c)};if(this.ys.timeScale.visible){const a=this.Om.Wf();if(t!==null){let l=0;this.Jm()&&(o("left",l,i),l=A(n.qv()).Wf().width),this.Om.Ff(t,l,i),l+=a.width,this.Qm()&&o("right",l,i)}i+=a.height}return ot({width:e,height:i})}ew(){let t=0,e=0,i=0;for(const b of this.Cm)this.Jm()&&(e=Math.max(e,A(b.qv()).qp(),this.ys.leftPriceScale.minimumWidth)),this.Qm()&&(i=Math.max(i,A(b.Yv()).qp(),this.ys.rightPriceScale.minimumWidth)),t+=b.ko();e=Tn(e),i=Tn(i);const n=this.fo,r=this.tl,o=Math.max(n-e-i,0),a=1*this.ym.length,l=this.ys.timeScale.visible;let c=l?Math.max(this.Om.pm(),this.ys.timeScale.minimumHeight):0;var h;c=(h=c)+h%2;const u=a+c,m=r<u?0:r-u,g=m/t;let y=0;const w=window.devicePixelRatio||1;for(let b=0;b<this.Cm.length;++b){const S=this.Cm[b];S.yv(this.ts.$s()[b]);let _=0,N=0;N=b===this.Cm.length-1?Math.ceil((m-y)*w)/w:Math.round(S.ko()*g*w)/w,_=Math.max(N,2),y+=_,S.Kp(ot({width:o,height:_})),this.Jm()&&S.Wv(e,"left"),this.Qm()&&S.Wv(i,"right"),S.Xf()&&this.ts.ec(S.Xf(),_)}this.Om.fm(ot({width:l?o:0,height:c}),l?e:0,l?i:0),this.ts.To(o),this.Pm!==e&&(this.Pm=e),this.Tm!==i&&(this.Tm=i)}zm(t){t?this.pp.addEventListener("wheel",this.Am,{passive:!1}):this.pp.removeEventListener("wheel",this.Am)}rw(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Kf?1/window.devicePixelRatio:1}Em(t){if(!(t.deltaX!==0&&this.ys.handleScroll.mouseWheel||t.deltaY!==0&&this.ys.handleScale.mouseWheel))return;const e=this.rw(t),i=e*t.deltaX/100,n=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),n!==0&&this.ys.handleScale.mouseWheel){const r=Math.sign(n)*Math.min(1,Math.abs(n)),o=t.clientX-this.pp.getBoundingClientRect().left;this.Qt()._c(o,r)}i!==0&&this.ys.handleScroll.mouseWheel&&this.Qt().uc(-80*i)}Ym(t,e){var n;const i=t.nn();i===3&&this.hw(),i!==3&&i!==2||(this.aw(t),this.lw(t,e),this.Om.kt(),this.Cm.forEach(r=>{r.Pv()}),((n=this.Rm)==null?void 0:n.nn())===3&&(this.Rm.vn(t),this.hw(),this.aw(this.Rm),this.lw(this.Rm,e),t=this.Rm,this.Rm=null)),this.Zp(t)}lw(t,e){for(const i of t.pn())this.mn(i,e)}aw(t){const e=this.ts.$s();for(let i=0;i<e.length;i++)t.en(i).sn&&e[i].Uo()}mn(t,e){const i=this.ts.At();switch(t.an){case 0:i.ku();break;case 1:i.Pu(t.Ft);break;case 2:i.dn(t.Ft);break;case 3:i.fn(t.Ft);break;case 4:i.du();break;case 5:t.Ft.Mu(e)||i.fn(t.Ft.bu(e))}}Hu(t){this.Rm!==null?this.Rm.vn(t):this.Rm=t,this.Dm||(this.Dm=!0,this.km=window.requestAnimationFrame(e=>{if(this.Dm=!1,this.km=0,this.Rm!==null){const i=this.Rm;this.Rm=null,this.Ym(i,e);for(const n of i.pn())if(n.an===5&&!n.Ft.Mu(e)){this.Qt()._n(n.Ft);break}}}))}hw(){this.Fm()}$m(t){this.Bm.removeChild(t.Of()),t.m()}Fm(){const t=this.ts.$s(),e=t.length,i=this.Cm.length;for(let n=e;n<i;n++){const r=Mt(this.Cm.pop());this.Bm.removeChild(r.Of()),r.Lv().u(this),r.Ov().u(this),r.m();const o=this.ym.pop();o!==void 0&&this.$m(o)}for(let n=i;n<e;n++){const r=new tr(this,t[n]);if(r.Lv().i(this.ow.bind(this,r),this),r.Ov().i(this._w.bind(this,r),this),this.Cm.push(r),n>0){const o=new Bf(this,n-1,n);this.ym.push(o),this.Bm.insertBefore(o.Of(),this.Om.Of())}this.Bm.insertBefore(r.Of(),this.Om.Of())}for(let n=0;n<e;n++){const r=t[n],o=this.Cm[n];o.Xf()!==r?o.yv(r):o.Cv()}this.Hm(),this.ew()}uw(t,e,i,n){var u;const r=new Map;t!==null&&this.ts.js().forEach(m=>{const g=m.Xs().Wr(t);g!==null&&r.set(m,g)});let o;if(t!==null){const m=(u=this.ts.At().ss(t))==null?void 0:u.originalTime;m!==void 0&&(o=m)}const a=this.Qt().Gu(),l=a!==null&&a.Xo instanceof Ti?a.Xo:void 0,c=a!==null&&a.Zo!==void 0?a.Zo.Kn:void 0,h=this.cw(n);return{dw:o,Re:t??void 0,fw:e??void 0,pw:h!==-1?h:void 0,mw:l,ww:r,gw:c,Mw:i??void 0}}cw(t){let e=-1;if(t)e=this.Cm.indexOf(t);else{const i=this.Qt().sc().Us();i!==null&&(e=this.Qt().$s().indexOf(i))}return e}ow(t,e,i,n){this.uv.p(()=>this.uw(e,i,n,t))}_w(t,e,i,n){this.cv.p(()=>this.uw(e,i,n,t))}Lm(t,e,i){var n;this.iw(((n=this.Qt().Gu())==null?void 0:n.Jo)??null),this.Wu.p(()=>this.uw(t,e,i))}Hm(){const t=this.ys.timeScale.visible?"":"none";this.Om.Of().style.display=t}Jm(){return this.Cm[0].Xf().Bo().N().visible}Qm(){return this.Cm[0].Xf().Ao().N().visible}Nm(){return"ResizeObserver"in window&&(this.Vm=new ResizeObserver(t=>{const e=t[t.length-1];e&&this.Wm(e.contentRect.width,e.contentRect.height)}),this.Vm.observe(this.wp,{box:"border-box"}),!0)}qm(){this.Vm!==null&&this.Vm.disconnect(),this.Vm=null}}function en(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function qf(s){return s.open===void 0&&s.value===void 0}function tm(s){return function(t){return t.open!==void 0}(s)||function(t){return t.value!==void 0}(s)}function bo(s,t,e,i){const n=e.value,r={Re:t,wt:s,Ft:[n,n,n,n],dw:i};return e.color!==void 0&&(r.R=e.color),r}function em(s,t,e,i){const n=e.value,r={Re:t,wt:s,Ft:[n,n,n,n],dw:i};return e.lineColor!==void 0&&(r.vt=e.lineColor),e.topColor!==void 0&&(r.mr=e.topColor),e.bottomColor!==void 0&&(r.wr=e.bottomColor),r}function sm(s,t,e,i){const n=e.value,r={Re:t,wt:s,Ft:[n,n,n,n],dw:i};return e.topLineColor!==void 0&&(r.gr=e.topLineColor),e.bottomLineColor!==void 0&&(r.Mr=e.bottomLineColor),e.topFillColor1!==void 0&&(r.br=e.topFillColor1),e.topFillColor2!==void 0&&(r.Sr=e.topFillColor2),e.bottomFillColor1!==void 0&&(r.Cr=e.bottomFillColor1),e.bottomFillColor2!==void 0&&(r.yr=e.bottomFillColor2),r}function im(s,t,e,i){const n={Re:t,wt:s,Ft:[e.open,e.high,e.low,e.close],dw:i};return e.color!==void 0&&(n.R=e.color),n}function nm(s,t,e,i){const n={Re:t,wt:s,Ft:[e.open,e.high,e.low,e.close],dw:i};return e.color!==void 0&&(n.R=e.color),e.borderColor!==void 0&&(n.Ht=e.borderColor),e.wickColor!==void 0&&(n.vr=e.wickColor),n}function rm(s,t,e,i,n){const r=Mt(n)(e),o=Math.max(...r),a=Math.min(...r),l=r[r.length-1],c=[l,o,a,l],{time:h,color:u,...m}=e;return{Re:t,wt:s,Ft:c,dw:i,se:m,R:u}}function Ke(s){return s.Ft!==void 0}function wo(s,t){return t.customValues!==void 0&&(s.bw=t.customValues),s}function he(s){return(t,e,i,n,r,o)=>function(a,l){return l?l(a):qf(a)}(i,o)?wo({wt:t,Re:e,dw:n},i):wo(s(t,e,i,n,r),i)}function xo(s){return{Candlestick:he(nm),Bar:he(im),Area:he(em),Baseline:he(sm),Histogram:he(bo),Line:he(bo),Custom:he(rm)}[s]}function _o(s){return{Re:0,Sw:new Map,Hh:s}}function So(s,t){if(s!==void 0&&s.length!==0)return{xw:t.key(s[0].wt),Cw:t.key(s[s.length-1].wt)}}function Co(s){let t;return s.forEach(e=>{t===void 0&&(t=e.dw)}),Mt(t)}class om{constructor(t){this.yw=new Map,this.kw=new Map,this.Pw=new Map,this.Tw=[],this.i_=t}m(){this.yw.clear(),this.kw.clear(),this.Pw.clear(),this.Tw=[]}Rw(t,e){let i=this.yw.size!==0,n=!1;const r=this.kw.get(t);if(r!==void 0)if(this.kw.size===1)i=!1,n=!0,this.yw.clear();else for(const l of this.Tw)l.pointData.Sw.delete(t)&&(n=!0);let o=[];if(e.length!==0){const l=e.map(g=>g.time),c=this.i_.createConverterToInternalObj(e),h=xo(t.Rr()),u=t.da(),m=t.pa();o=e.map((g,y)=>{const w=c(g.time),b=this.i_.key(w);let S=this.yw.get(b);S===void 0&&(S=_o(w),this.yw.set(b,S),n=!0);const _=h(w,S.Re,g,l[y],u,m);return S.Sw.set(t,_),_})}i&&this.Dw(),this.Vw(t,o);let a=-1;if(n){const l=[];this.yw.forEach(c=>{l.push({timeWeight:0,time:c.Hh,pointData:c,originalTime:Co(c.Sw)})}),l.sort((c,h)=>this.i_.key(c.time)-this.i_.key(h.time)),a=this.Iw(l)}return this.Bw(t,a,function(l,c,h){const u=So(l,h),m=So(c,h);if(u!==void 0&&m!==void 0)return{Aw:!1,zh:u.Cw>=m.Cw&&u.xw>=m.xw}}(this.kw.get(t),r,this.i_))}yc(t){return this.Rw(t,[])}Ew(t,e,i){const n=e;(function(b){b.dw===void 0&&(b.dw=b.time)})(n),this.i_.preprocessData(e);const r=this.i_.createConverterToInternalObj([e])(e.time),o=this.Pw.get(t);if(!i&&o!==void 0&&this.i_.key(r)<this.i_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${r}`);let a=this.yw.get(this.i_.key(r));if(i&&a===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=a===void 0;a===void 0&&(a=_o(r),this.yw.set(this.i_.key(r),a));const c=xo(t.Rr()),h=t.da(),u=t.pa(),m=c(r,a.Re,e,n.dw,h,u);a.Sw.set(t,m),i?this.zw(t,m,a.Re):this.Lw(t,m);const g={zh:Ke(m),Aw:i};if(!l)return this.Bw(t,-1,g);const y={timeWeight:0,time:a.Hh,pointData:a,originalTime:Co(a.Sw)},w=je(this.Tw,this.i_.key(y.time),(b,S)=>this.i_.key(b.time)<S);this.Tw.splice(w,0,y);for(let b=w;b<this.Tw.length;++b)sn(this.Tw[b].pointData,b);return this.i_.fillWeightsForPoints(this.Tw,w),this.Bw(t,w,g)}Lw(t,e){let i=this.kw.get(t);i===void 0&&(i=[],this.kw.set(t,i));const n=i.length!==0?i[i.length-1]:null;n===null||this.i_.key(e.wt)>this.i_.key(n.wt)?Ke(e)&&i.push(e):Ke(e)?i[i.length-1]=e:i.splice(-1,1),this.Pw.set(t,e.wt)}zw(t,e,i){const n=this.kw.get(t);if(n===void 0)return;const r=je(n,i,(o,a)=>o.Re<a);Ke(e)?n[r]=e:n.splice(r,1)}Vw(t,e){e.length!==0?(this.kw.set(t,e.filter(Ke)),this.Pw.set(t,e[e.length-1].wt)):(this.kw.delete(t),this.Pw.delete(t))}Dw(){for(const t of this.Tw)t.pointData.Sw.size===0&&this.yw.delete(this.i_.key(t.time))}Iw(t){let e=-1;for(let i=0;i<this.Tw.length&&i<t.length;++i){const n=this.Tw[i],r=t[i];if(this.i_.key(n.time)!==this.i_.key(r.time)){e=i;break}r.timeWeight=n.timeWeight,sn(r.pointData,i)}if(e===-1&&this.Tw.length!==t.length&&(e=Math.min(this.Tw.length,t.length)),e===-1)return-1;for(let i=e;i<t.length;++i)sn(t[i].pointData,i);return this.i_.fillWeightsForPoints(t,e),this.Tw=t,e}Ow(){if(this.kw.size===0)return null;let t=0;return this.kw.forEach(e=>{e.length!==0&&(t=Math.max(t,e[e.length-1].Re))}),t}Bw(t,e,i){const n={Do:new Map,At:{iu:this.Ow()}};if(e!==-1)this.kw.forEach((r,o)=>{n.Do.set(o,{se:r,Nw:o===t?i:void 0})}),this.kw.has(t)||n.Do.set(t,{se:[],Nw:i}),n.At.Ww=this.Tw,n.At.Fw=e;else{const r=this.kw.get(t);n.Do.set(t,{se:r||[],Nw:i})}return n}}function sn(s,t){s.Re=t,s.Sw.forEach(e=>{e.Re=t})}function am(s,t){return s.wt<t}function lm(s,t){return t<s.wt}function cm(s,t,e){const i=t.Uh(),n=t.bi(),r=je(s,i,am),o=kl(s,n,lm);if(!e)return{from:r,to:o};let a=r,l=o;return r>0&&r<s.length&&s[r].wt>=i&&(a=r-1),o>0&&o<s.length&&s[o-1].wt<=n&&(l=o+1),{from:a,to:l}}class Ol{constructor(t,e,i){this.Hw=!0,this.Uw=!0,this.$w=!0,this.qw=[],this.Yw=null,this.Jn=t,this.Qn=e,this.jw=i}kt(t){this.Hw=!0,t==="data"&&(this.Uw=!0),t==="options"&&(this.$w=!0)}Tt(){return this.Jn.Vt()?(this.Kw(),this.Yw===null?null:this.Xw):null}Zw(){this.qw=this.qw.map(t=>({...t,...this.Jn.Rh().Dr(t.wt)}))}Gw(){this.Yw=null}Kw(){this.Uw&&(this.Jw(),this.Uw=!1),this.$w&&(this.Zw(),this.$w=!1),this.Hw&&(this.Qw(),this.Hw=!1)}Qw(){const t=this.Jn.Wt(),e=this.Qn.At();if(this.Gw(),e.Ki()||t.Ki())return;const i=e.ye();if(i===null||this.Jn.Xs().zr()===0)return;const n=this.Jn.zt();n!==null&&(this.Yw=cm(this.qw,i,this.jw),this.tg(t,e,n.Ft),this.ig())}}class hm{constructor(t,e){this.sg=t,this.Yi=e}nt(t,e,i){this.sg.draw(t,this.Yi,e,i)}}class um extends Ol{constructor(t,e,i){super(t,e,!1),this.sh=i,this.Xw=new hm(this.sh.renderer(),n=>{const r=t.zt();return r===null?null:t.Wt().Nt(n,r.Ft)})}fa(t){return this.sh.priceValueBuilder(t)}va(t){return this.sh.isWhitespace(t)}Jw(){const t=this.Jn.Rh();this.qw=this.Jn.Xs().Hr().map(e=>({wt:e.Re,_t:NaN,...t.Dr(e.Re),ng:e.se}))}tg(t,e){e.su(this.qw,En(this.Yw))}ig(){this.sh.update({bars:this.qw.map(dm),barSpacing:this.Qn.At().lu(),visibleRange:this.Yw},this.Jn.N())}}function dm(s){return{x:s._t,time:s.wt,originalData:s.ng,barColor:s.cr}}const fm={color:"#2196f3"},mm=(s,t,e)=>{const i=le(e);return new um(s,t,i)};function sr(s){const t={value:s.Ft[3],time:s.dw};return s.bw!==void 0&&(t.customValues=s.bw),t}function Eo(s){const t=sr(s);return s.R!==void 0&&(t.color=s.R),t}function pm(s){const t=sr(s);return s.vt!==void 0&&(t.lineColor=s.vt),s.mr!==void 0&&(t.topColor=s.mr),s.wr!==void 0&&(t.bottomColor=s.wr),t}function gm(s){const t=sr(s);return s.gr!==void 0&&(t.topLineColor=s.gr),s.Mr!==void 0&&(t.bottomLineColor=s.Mr),s.br!==void 0&&(t.topFillColor1=s.br),s.Sr!==void 0&&(t.topFillColor2=s.Sr),s.Cr!==void 0&&(t.bottomFillColor1=s.Cr),s.yr!==void 0&&(t.bottomFillColor2=s.yr),t}function Il(s){const t={open:s.Ft[0],high:s.Ft[1],low:s.Ft[2],close:s.Ft[3],time:s.dw};return s.bw!==void 0&&(t.customValues=s.bw),t}function vm(s){const t=Il(s);return s.R!==void 0&&(t.color=s.R),t}function ym(s){const t=Il(s),{R:e,Ht:i,vr:n}=s;return e!==void 0&&(t.color=e),i!==void 0&&(t.borderColor=i),n!==void 0&&(t.wickColor=n),t}function Mn(s){return{Area:pm,Line:Eo,Baseline:gm,Histogram:Eo,Bar:vm,Candlestick:ym,Custom:bm}[s]}function bm(s){const t=s.dw;return{...s.se,time:t}}const wm={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},xm={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},_m={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:bl,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},nn={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},Sm={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function ko(){return{width:0,height:0,autoSize:!1,layout:_m,crosshair:wm,grid:xm,overlayPriceScales:{...nn},leftPriceScale:{...nn,visible:!1},rightPriceScale:{...nn,visible:!0},timeScale:Sm,localization:{locale:Ve?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class Dl{constructor(t,e,i){this.Df=t,this.eg=e,this.rg=i??0}applyOptions(t){this.Df.Qt().Qu(this.eg,t,this.rg)}options(){return this.Yi().N()}width(){return Ei(this.eg)?this.Df.Gm(this.eg):0}setVisibleRange(t){this.setAutoScale(!1),this.Yi().Nl(new Et(t.from,t.to))}getVisibleRange(){const t=this.Yi().Qe();return t===null?null:{from:t.$e(),to:t.qe()}}setAutoScale(t){this.applyOptions({autoScale:t})}Yi(){return A(this.Df.Qt().tc(this.eg,this.rg)).Wt}}class Cm{constructor(t,e,i,n){this.Df=t,this.yt=i,this.hg=e,this.ag=n}getHeight(){return this.yt.$t()}setHeight(t){const e=this.Df.Qt(),i=e.Bc(this.yt);e.hc(i,t)}paneIndex(){return this.Df.Qt().Bc(this.yt)}moveTo(t){const e=this.paneIndex();e!==t&&(xt(t>=0&&t<this.Df.If().length,"Invalid pane index"),this.Df.Qt().ac(e,t))}getSeries(){return this.yt.Do().map(t=>this.hg(t))??[]}getHTMLElement(){return this.Df.If()[this.paneIndex()].Of()}attachPrimitive(t){this.yt.ua(t),t.attached&&t.attached({chart:this.ag,requestUpdate:()=>this.yt.Qt().Bh()})}detachPrimitive(t){this.yt.ca(t)}priceScale(t){if(this.yt.Co(t)===null)throw new Error(`Cannot find price scale with id: ${t}`);return new Dl(this.Df,t,this.paneIndex())}}const Em={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class To{constructor(t){this.ir=t}applyOptions(t){this.ir.hr(t)}options(){return this.ir.N()}lg(){return this.ir}}class km{constructor(t,e,i,n,r,o){this.og=new ft,this.Jn=t,this._g=e,this.ug=i,this.i_=r,this.ag=n,this.cg=o}m(){this.og.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(t){const e=this.Jn.zt();return e===null?null:this.Jn.Wt().Nt(t,e.Ft)}coordinateToPrice(t){const e=this.Jn.zt();return e===null?null:this.Jn.Wt().Ts(t,e.Ft)}barsInLogicalRange(t){if(t===null)return null;const e=new Re(new hs(t.from,t.to)).w_(),i=this.Jn.Xs();if(i.Ki())return null;const n=i.Wr(e.Uh(),1),r=i.Wr(e.bi(),-1),o=A(i.Lr()),a=A(i.Ks());if(n!==null&&r!==null&&n.Re>r.Re)return{barsBefore:t.from-o,barsAfter:a-t.to};const l={barsBefore:n===null||n.Re===o?t.from-o:n.Re-o,barsAfter:r===null||r.Re===a?a-t.to:a-r.Re};return n!==null&&r!==null&&(l.from=n.dw,l.to=r.dw),l}setData(t){this.i_,this.Jn.Rr(),this._g.dg(this.Jn,t),this.fg("full")}update(t,e=!1){this.Jn.Rr(),this._g.pg(this.Jn,t,e),this.fg("update")}dataByIndex(t,e){const i=this.Jn.Xs().Wr(t,e);return i===null?null:Mn(this.seriesType())(i)}data(){const t=Mn(this.seriesType());return this.Jn.Xs().Hr().map(e=>t(e))}subscribeDataChanged(t){this.og.i(t)}unsubscribeDataChanged(t){this.og._(t)}applyOptions(t){this.Jn.hr(t)}options(){return Ht(this.Jn.N())}priceScale(){return this.ug.priceScale(this.Jn.Wt().wa(),this.getPane().paneIndex())}createPriceLine(t){const e=Pt(Ht(Em),t),i=this.Jn.Oh(e);return new To(i)}removePriceLine(t){this.Jn.Nh(t.lg())}priceLines(){return this.Jn.Wh().map(t=>new To(t))}seriesType(){return this.Jn.Rr()}attachPrimitive(t){this.Jn.ua(t),t.attached&&t.attached({chart:this.ag,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.i_})}detachPrimitive(t){this.Jn.ca(t),t.detached&&t.detached(),this.Jn.Qt().Bh()}getPane(){const t=this.Jn,e=A(this.Jn.Qt().Hn(t));return this.cg(e)}moveToPane(t){this.Jn.Qt().Rc(this.Jn,t)}seriesOrder(){const t=this.Jn.Qt().Hn(this.Jn);return t===null?-1:t.Do().indexOf(this.Jn)}setSeriesOrder(t){const e=this.Jn.Qt().Hn(this.Jn);e!==null&&e.qo(this.Jn,t)}fg(t){this.og.v()&&this.og.p(t)}}class Tm{constructor(t,e,i){this.vg=new ft,this.T_=new ft,this.rm=new ft,this.ts=t,this.uh=t.At(),this.Om=e,this.uh.Su().i(this.mg.bind(this)),this.uh.xu().i(this.wg.bind(this)),this.Om.dm().i(this.gg.bind(this)),this.i_=i}m(){this.uh.Su().u(this),this.uh.xu().u(this),this.Om.dm().u(this),this.vg.m(),this.T_.m(),this.rm.m()}scrollPosition(){return this.uh._u()}scrollToPosition(t,e){e?this.uh.gu(t,1e3):this.ts.fn(t)}scrollToRealTime(){this.uh.wu()}getVisibleRange(){const t=this.uh.K_();return t===null?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.i_.convertHorzItemToInternal(t.from),to:this.i_.convertHorzItemToInternal(t.to)},i=this.uh.J_(e);this.ts.Pc(i)}getVisibleLogicalRange(){const t=this.uh.j_();return t===null?null:{from:t.Uh(),to:t.bi()}}setVisibleLogicalRange(t){xt(t.from<=t.to,"The from index cannot be after the to index."),this.ts.Pc(t)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.ku()}logicalToCoordinate(t){const e=this.ts.At();return e.Ki()?null:e.qt(t)}coordinateToLogical(t){return this.uh.Ki()?null:this.uh.nu(t)}timeToIndex(t,e){const i=this.i_.convertHorzItemToInternal(t);return this.uh.U_(i,e)}timeToCoordinate(t){const e=this.timeToIndex(t,!1);return e===null?null:this.uh.qt(e)}coordinateToTime(t){const e=this.ts.At(),i=e.nu(t),n=e.ss(i);return n===null?null:n.originalTime}width(){return this.Om.Nf().width}height(){return this.Om.Nf().height}subscribeVisibleTimeRangeChange(t){this.vg.i(t)}unsubscribeVisibleTimeRangeChange(t){this.vg._(t)}subscribeVisibleLogicalRangeChange(t){this.T_.i(t)}unsubscribeVisibleLogicalRangeChange(t){this.T_._(t)}subscribeSizeChange(t){this.rm.i(t)}unsubscribeSizeChange(t){this.rm._(t)}applyOptions(t){this.uh.hr(t)}options(){return{...Ht(this.uh.N()),barSpacing:this.uh.lu()}}mg(){this.vg.v()&&this.vg.p(this.getVisibleRange())}wg(){this.T_.v()&&this.T_.p(this.getVisibleLogicalRange())}gg(t){this.rm.p(t.width,t.height)}}function Nm(s){if(s===void 0||s.type==="custom")return;const t=s;t.minMove!==void 0&&t.precision===void 0&&(t.precision=function(e){if(e>=1)return 0;let i=0;for(;i<8;i++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return i;e*=10}return i}(t.minMove))}function No(s){return function(t){if(ks(t.handleScale)){const i=t.handleScale;t.handleScale={axisDoubleClickReset:{time:i,price:i},axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(t.handleScale!==void 0){const{axisPressedMouseMove:i,axisDoubleClickReset:n}=t.handleScale;ks(i)&&(t.handleScale.axisPressedMouseMove={time:i,price:i}),ks(n)&&(t.handleScale.axisDoubleClickReset={time:n,price:n})}const e=t.handleScroll;ks(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(s),s}class Rm{constructor(t,e,i){this.Mg=new Map,this.bg=new Map,this.Sg=new ft,this.xg=new ft,this.Cg=new ft,this.zu=new WeakMap,this.yg=new om(e);const n=i===void 0?Ht(ko()):Pt(Ht(ko()),No(i));this.kg=e,this.Df=new Jf(t,n,e),this.Df.Lv().i(o=>{this.Sg.v()&&this.Sg.p(this.Pg(o()))},this),this.Df.Ov().i(o=>{this.xg.v()&&this.xg.p(this.Pg(o()))},this),this.Df.nc().i(o=>{this.Cg.v()&&this.Cg.p(this.Pg(o()))},this);const r=this.Df.Qt();this.Tg=new Tm(r,this.Df.Um(),this.kg)}remove(){this.Df.Lv().u(this),this.Df.Ov().u(this),this.Df.nc().u(this),this.Tg.m(),this.Df.m(),this.Mg.clear(),this.bg.clear(),this.Sg.m(),this.xg.m(),this.Cg.m(),this.yg.m()}resize(t,e,i){this.autoSizeActive()||this.Df.Wm(t,e,i)}addCustomSeries(t,e={},i=0){const n=(r=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...fm,...r.defaultOptions()},Rg:mm,Dg:r}))(le(t));return this.Vg(n,e,i)}addSeries(t,e={},i=0){return this.Vg(t,e,i)}removeSeries(t){const e=Mt(this.Mg.get(t)),i=this.yg.yc(e);this.Df.Qt().yc(e),this.Ig(i),this.Mg.delete(t),this.bg.delete(e)}dg(t,e){this.Ig(this.yg.Rw(t,e))}pg(t,e,i){this.Ig(this.yg.Ew(t,e,i))}subscribeClick(t){this.Sg.i(t)}unsubscribeClick(t){this.Sg._(t)}subscribeCrosshairMove(t){this.Cg.i(t)}unsubscribeCrosshairMove(t){this.Cg._(t)}subscribeDblClick(t){this.xg.i(t)}unsubscribeDblClick(t){this.xg._(t)}priceScale(t,e=0){return new Dl(this.Df,t,e)}timeScale(){return this.Tg}applyOptions(t){this.Df.hr(No(t))}options(){return this.Df.N()}takeScreenshot(){return this.Df.Xm()}removePane(t){this.Df.Qt().rc(t)}swapPanes(t,e){this.Df.Qt().ac(t,e)}autoSizeActive(){return this.Df.tw()}chartElement(){return this.Df.Uf()}panes(){return this.Df.Qt().$s().map(t=>this.Bg(t))}paneSize(t=0){const e=this.Df.nw(t);return{height:e.height,width:e.width}}setCrosshairPosition(t,e,i){const n=this.Mg.get(i);if(n===void 0)return;const r=this.Df.Qt().Hn(n);r!==null&&this.Df.Qt().gc(t,e,r)}clearCrosshairPosition(){this.Df.Qt().Mc(!0)}horzBehaviour(){return this.kg}Vg(t,e={},i=0){xt(t.Rg!==void 0),Nm(e.priceFormat),t.type==="Candlestick"&&function(l){l.borderColor!==void 0&&(l.borderUpColor=l.borderColor,l.borderDownColor=l.borderColor),l.wickColor!==void 0&&(l.wickUpColor=l.wickColor,l.wickDownColor=l.wickColor)}(e);const n=Pt(Ht(vl),Ht(t.defaultOptions),e),r=t.Rg,o=new Ti(this.Df.Qt(),t.type,n,r,t.Dg);this.Df.Qt().xc(o,i);const a=new km(o,this,this,this,this.kg,l=>this.Bg(l));return this.Mg.set(a,o),this.bg.set(o,a),a}Ig(t){const e=this.Df.Qt();e.bc(t.At.iu,t.At.Ww,t.At.Fw),t.Do.forEach((i,n)=>n.ht(i.se,i.Nw)),e.At().O_(),e.au()}Ag(t){return Mt(this.bg.get(t))}Pg(t){const e=new Map;t.ww.forEach((n,r)=>{const o=r.Rr(),a=Mn(o)(n);if(o!=="Custom")xt(tm(a));else{const l=r.pa();xt(!l||l(a)===!1)}e.set(this.Ag(r),a)});const i=t.mw!==void 0&&this.bg.has(t.mw)?this.Ag(t.mw):void 0;return{time:t.dw,logical:t.Re,point:t.fw,paneIndex:t.pw,hoveredSeries:i,hoveredObjectId:t.gw,seriesData:e,sourceEvent:t.Mw}}Bg(t){let e=this.zu.get(t);return e||(e=new Cm(this.Df,i=>this.Ag(i),t,this),this.zu.set(t,e)),e}}function Mm(s){if(ys(s)){const t=document.getElementById(s);return xt(t!==null,`Cannot find element in DOM with id=${s}`),t}return s}function Am(s,t,e){const i=Mm(s),n=new Rm(i,t,e);return t.setOptions(n.options()),n}function Pm(s,t){return Am(s,new ho,ho.Xc(t))}class Om extends Ol{constructor(t,e){super(t,e,!0)}tg(t,e,i){e.su(this.qw,En(this.Yw)),t.Hl(this.qw,i,En(this.Yw))}Eg(t,e){return{wt:t,gt:e,_t:NaN,ut:NaN}}Jw(){const t=this.Jn.Rh();this.qw=this.Jn.Xs().Hr().map(e=>{const i=e.Ft[3];return this.zg(e.Re,i,t)})}}function Im(s,t,e,i,n,r,o){if(t.length===0||i.from>=t.length||i.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:c}=s,h=t[i.from];let u=r(s,h),m=h;if(i.to-i.from<2){const g=n/2;a.beginPath();const y={_t:h._t-g,ut:h.ut},w={_t:h._t+g,ut:h.ut};a.moveTo(y._t*l,y.ut*c),a.lineTo(w._t*l,w.ut*c),o(s,u,y,w)}else{const g=(w,b)=>{o(s,u,m,b),a.beginPath(),u=w,m=b};let y=m;a.beginPath(),a.moveTo(h._t*l,h.ut*c);for(let w=i.from+1;w<i.to;++w){y=t[w];const b=r(s,y);switch(e){case 0:a.lineTo(y._t*l,y.ut*c);break;case 1:a.lineTo(y._t*l,t[w-1].ut*c),b!==u&&(g(b,y),a.lineTo(y._t*l,t[w-1].ut*c)),a.lineTo(y._t*l,y.ut*c);break;case 2:{const[S,_]=Dm(t,w-1,w);a.bezierCurveTo(S._t*l,S.ut*c,_._t*l,_.ut*c,y._t*l,y.ut*c);break}}e!==1&&b!==u&&(g(b,y),a.moveTo(y._t*l,y.ut*c))}(m!==y||m===y&&e===1)&&o(s,u,m,y)}}const Ro=6;function rn(s,t){return{_t:s._t-t._t,ut:s.ut-t.ut}}function Mo(s,t){return{_t:s._t/t,ut:s.ut/t}}function Dm(s,t,e){const i=Math.max(0,t-1),n=Math.min(s.length-1,e+1);var r,o;return[(r=s[t],o=Mo(rn(s[e],s[i]),Ro),{_t:r._t+o._t,ut:r.ut+o.ut}),rn(s[e],Mo(rn(s[n],s[t]),Ro))]}function Lm(s,t){const e=s.context;e.strokeStyle=t,e.stroke()}class jm extends Be{constructor(){super(...arguments),this.rt=null}ht(t){this.rt=t}et(t){if(this.rt===null)return;const{ot:e,lt:i,Lg:n,Og:r,ct:o,Xt:a,Ng:l}=this.rt;if(i===null)return;const c=t.context;c.lineCap="butt",c.lineWidth=o*t.verticalPixelRatio,De(c,a),c.lineJoin="round";const h=this.Wg.bind(this);r!==void 0&&Im(t,e,r,i,n,h,Lm),l&&function(u,m,g,y,w){if(y.to-y.from<=0)return;const{horizontalPixelRatio:b,verticalPixelRatio:S,context:_}=u;let N=null;const k=Math.max(1,Math.floor(b))%2/2,P=g*S+k;for(let E=y.to-1;E>=y.from;--E){const z=m[E];if(z){const O=w(u,z);O!==N&&(_.beginPath(),N!==null&&_.fill(),_.fillStyle=O,N=O);const j=Math.round(z._t*b)+k,F=z.ut*S;_.moveTo(j,F),_.arc(j,F,P,0,2*Math.PI)}}_.fill()}(t,e,l,i,h)}}class Vm extends jm{Wg(t,e){return e.vt}}class zm extends Om{constructor(){super(...arguments),this.Xw=new Vm}zg(t,e,i){return{...this.Eg(t,e),...i.Dr(t)}}ig(){const t=this.Jn.N(),e={ot:this.qw,Xt:t.lineStyle,Og:t.lineVisible?t.lineType:void 0,ct:t.lineWidth,Ng:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,lt:this.Yw,Lg:this.Qn.At().lu()};this.Xw.ht(e)}}const Fm={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Rg:(s,t)=>new zm(s,t)};({...vl});const $m=s=>{if(s.length===8){const t=s.substring(0,4),e=s.substring(4,6),i=s.substring(6,8);return`${t}-${e}-${i}`}return s},Bm=({data:s,buyConditions:t,sellConditions:e,buyCondExp:i,sellCondExp:n})=>{const r=d.useRef(null);return d.useEffect(()=>{if(!r.current||!s.dates||!s.total_assets)return;const o=Pm(r.current,{width:260,height:200}),a=o.addSeries(Fm),l=s.dates.map((h,u)=>({time:$m(h),value:s.total_assets[u]}));a.setData(l);const c=()=>{r.current&&o.applyOptions({width:r.current.clientWidth})};return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c),o.remove()}},[s]),f.jsxs("div",{className:"mt-4 space-y-4",children:[f.jsx("div",{ref:r,className:"w-full h-[200px]"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"text-sm font-medium",children:"매수 조건"}),f.jsx("ul",{className:"text-xs space-y-1 text-muted-foreground",children:t.map((o,a)=>f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-primary",children:"•"}),f.jsxs("span",{children:[o.expr," ",o.operator," ",o.value]})]},a))}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.jsx("strong",{children:"조합:"})," ",i]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("h4",{className:"text-sm font-medium",children:"매도 조건"}),f.jsx("ul",{className:"text-xs space-y-1 text-muted-foreground",children:e.map((o,a)=>f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-destructive",children:"•"}),f.jsxs("span",{children:[o.expr," ",o.operator," ",o.value]})]},a))}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.jsx("strong",{children:"조합:"})," ",n]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(At,{className:"flex-1 bg-black hover:bg-black/90 text-white",size:"sm",onClick:()=>alert("전략 연동 화면으로 이동합니다."),children:"전략 연동"}),f.jsx(At,{className:"flex-1 bg-black hover:bg-black/90 text-white",size:"sm",onClick:()=>alert("전략이 저장되었습니다."),children:"저장"})]})]})},Wm=["인터넷, 유통 업종에서 최근 모멘텀이 좋은 종목들을 뽑아줘","추세 추종 전략 만들어줘","오늘 시황 어때?"],Ao={id:"1",text:`안녕하세요! 저는 Newsystock의 ScreenerAI 입니다. 주식 시장과 투자에 대한 질문을 해주세요. POC 버전 안내: 아래 추천질문에 있는 유형(종목필터링, 전략생성)을 클릭하거나 비슷한 유형으로 입력해보시면 됩니다. 실시간으로 테스트 및 개선 중이라 불안정할 수 있습니다.

2025-07-09 업데이트: Agent 모드가 기본모드가 되고 일반모드 대신 질문 모드(Agent 모드처럼 맥락 기억)가 추가되었습니다. 일반적인 투자 질문(예: 오늘시황 어때?)이 가능합니다.
2025-07-15 업데이트: Agent모드에서 백테스트가 진행되면 주요지표값을 차트와 함께 표시합니다.`,sender:"bot",timestamp:new Date};function Ym(){const{logout:s,user:t}=bi(),{toast:e}=Un(),[i,n]=d.useState([Ao]),[r,o]=d.useState(""),[a,l]=d.useState(!1),[c,h]=d.useState(!0),[u,m]=d.useState("agent"),g=d.useRef(null),y=d.useRef(null),[w,b]=d.useState(0);d.useEffect(()=>{var z,O;window.amplitude&&window.amplitude.track("chat-view-screener-poc"),"virtualKeyboard"in navigator&&(navigator.virtualKeyboard.overlaysContent=!0);const E=()=>{if(window.visualViewport){const j=window.innerHeight-window.visualViewport.height;b(j)}};return(z=window.visualViewport)==null||z.addEventListener("resize",E),(O=window.visualViewport)==null||O.addEventListener("scroll",E),()=>{var j,F;(j=window.visualViewport)==null||j.removeEventListener("resize",E),(F=window.visualViewport)==null||F.removeEventListener("scroll",E)}},[]),d.useEffect(()=>{var E;(E=g.current)==null||E.scrollIntoView({behavior:"smooth"})},[i]);const S=(E,z)=>{const O=E.slice(-10),j=[],F=[];O.forEach(T=>{T.backtestData&&j.push({buyConditions:T.backtestData.buyConditions,sellConditions:T.backtestData.sellConditions,buyCondExp:T.backtestData.buyCondExp,sellCondExp:T.backtestData.sellCondExp}),T.stockInfo&&F.push(T.stockInfo.name)});let Z=`## 가장 최근 메시지
${z}

`;if(Z+=`## 지난 메시지
`,O.slice(-5).forEach(T=>{T.sender==="user"&&(Z+=`- ${T.text}
`)}),j.length>0&&(Z+=`
## 지난 전략
${JSON.stringify(j[j.length-1],null,2)}
`),F.length>0){const T=[...new Set(F)].slice(0,10);Z+=`
## 지난 종목
${T.join(", ")}
`}return Z},_=async(E,z)=>{var Z,T,U,B,H,tt,nt,ht,ct,vt,yt,Wt,Yt,se,bs,ye,We,be,Ye,ws,Ue,xs;const O=(Z=E.body)==null?void 0:Z.getReader();if(!O)return;const j=new TextDecoder;let F={id:(Date.now()+2).toString(),text:"처리 중...",sender:"bot",timestamp:new Date,isStreaming:!0,streamingData:[]};n(ie=>[...ie,F]);try{for(;;){const{done:ie,value:we}=await O.read();if(ie)break;const Ai=j.decode(we).split(`
`).filter(_s=>_s.trim());console.log(Ai);for(const _s of Ai)try{const p=JSON.parse(_s);if((T=F.streamingData)==null||T.push(p),p.type==="status"||p.type==="tool_execution")F.text=p.message,n(x=>[...x]);else if(p.type==="error"){F.isStreaming=!1,F.text=`오류가 발생했습니다: ${p.message||"알 수 없는 오류"}`,n(x=>[...x]);return}else if(p.type==="complete"){if(F.isStreaming=!1,F.text=p.message,(U=p.data)!=null&&U.result){const v=p.data.result[0];let D=[];if((v==null?void 0:v.message)==="조건에 맞는 종목 검색 완료"&&((B=v==null?void 0:v.result)!=null&&B.stocks)){const C=v.result.stocks.map(R=>({id:(Date.now()+Math.random()).toString(),text:"주가 차트",sender:"bot",timestamp:new Date,stockInfo:{name:R.name,code:R.code}}));if(D.push(...C),(tt=(H=v==null?void 0:v.result)==null?void 0:H.meta)!=null&&tt.condition_list){const V=v.result.meta.condition_list.map(Q=>`${Q.factor} ${Q.op} ${Q.value}`).join(`
`),st={id:(Date.now()+Math.random()).toString(),text:`**적용된 조건식:**
${V}`,sender:"bot",timestamp:new Date};D.push(st)}}else if((v==null?void 0:v.message)==="백테스트 시뮬레이션 완료"&&((ht=(nt=v==null?void 0:v.result)==null?void 0:nt.data)!=null&&ht.portfolio_summary)){const C=v.result.data.portfolio_summary,R=v.result.meta.strategy,V=v.result.data.basic_stats,st=v.result.meta.settings;if(D=[{id:(Date.now()+Math.random()).toString(),text:"백테스트 결과",sender:"bot",timestamp:new Date,backtestData:{dates:C.dates,total_assets:C.total_assets,buyConditions:R.buy_conditions,sellConditions:R.sell_conditions,buyCondExp:R.buy_cond_exp,sellCondExp:R.sell_cond_exp}}],V){const bt=[`누적수익률: ${(V.cumulative_return*100).toFixed(2)}%`,`연평균수익률(CAGR): ${(V.cagr*100).toFixed(2)}%`,`최대낙폭(MDD): ${(V.mdd*100).toFixed(2)}%`,`평균수익률: ${(V.mean*100).toFixed(2)}%`,`승일평균수익: ${(V.mean_win_return*100).toFixed(2)}%`,`패일평균수익: ${(V.mean_loss_return*100).toFixed(2)}%`,`샤프지수: ${V.sharpe.toFixed(3)}`],Pi={id:(Date.now()+Math.random()).toString(),text:`**백테스트 주요 지표**
`+bt.map(Ze=>`• ${Ze}`).join(`
`),sender:"bot",timestamp:new Date};D.push(Pi)}}else if((ct=v==null?void 0:v.message)!=null&&ct.includes("전략")&&((yt=(vt=v==null?void 0:v.result)==null?void 0:vt.meta)!=null&&yt.strategy)&&(Array.isArray(v.result.meta.strategy.buy_conditions)&&v.result.meta.strategy.buy_conditions.length>0||Array.isArray(v.result.meta.strategy.sell_conditions)&&v.result.meta.strategy.sell_conditions.length>0)){const C=v.result.meta.strategy,R=v.result.meta.settings;let V=`**적용된 조건식:**
`;if(R!=null&&R.order_factor&&(R!=null&&R.order_base)){const Q=R.order_base==="DESC"?"내림차순":"오름차순";V+=`매수 우선순위:
`,V+=`${R.order_factor} (${Q})
`}((Wt=C.buy_conditions)==null?void 0:Wt.length)>0&&(V+=`매수 조건:
`,V+=C.buy_conditions.map(Q=>`${Q.expr} ${Q.operator} ${Q.value}`).join(`
`)+`
`,C.buy_cond_exp&&(V+=`조합: ${C.buy_cond_exp}
`)),((Yt=C.sell_conditions)==null?void 0:Yt.length)>0&&(V+=`매도 조건:
`,V+=C.sell_conditions.map(Q=>`${Q.expr} ${Q.operator} ${Q.value}`).join(`
`)+`
`,C.sell_cond_exp&&(V+=`조합: ${C.sell_cond_exp}
`));const st={id:(Date.now()+Math.random()).toString(),text:V.trim(),sender:"bot",timestamp:new Date};D.push(st)}if(D.length>0&&n(C=>[...C,...D]),!D.some(C=>C.text.startsWith("**적용된 조건식:**"))){if((bs=(se=v==null?void 0:v.result)==null?void 0:se.meta)!=null&&bs.condition_list){const C=v.result.meta.condition_list,R=v.result.meta.settings;let st=`**적용된 조건식:**
${C.map(bt=>`${bt.factor} ${bt.op} ${bt.value}`).join(`
`)}`;if(R!=null&&R.order_factor&&(R!=null&&R.order_base)){const bt=R.order_base==="DESC"?"내림차순":"오름차순";st+=`
우선순위: ${R.order_factor} (${bt})`}const Q={id:(Date.now()+Math.random()).toString(),text:st,sender:"bot",timestamp:new Date};n(bt=>[...bt,Q])}else if((We=(ye=v==null?void 0:v.result)==null?void 0:ye.meta)!=null&&We.strategy&&(Array.isArray(v.result.meta.strategy.buy_conditions)&&v.result.meta.strategy.buy_conditions.length>0||Array.isArray(v.result.meta.strategy.sell_conditions)&&v.result.meta.strategy.sell_conditions.length>0)){const C=v.result.meta.strategy,R=v.result.meta.settings;let V=`**적용된 조건식:**
`;if(R!=null&&R.order_factor&&(R!=null&&R.order_base)){const Q=R.order_base==="DESC"?"내림차순":"오름차순";V+=`매수 우선순위:
`,V+=`${R.order_factor} (${Q})
`}((be=C.buy_conditions)==null?void 0:be.length)>0&&(V+=`매수 조건:
`,V+=C.buy_conditions.map(Q=>`${Q.expr} ${Q.operator} ${Q.value}`).join(`
`)+`
`,C.buy_cond_exp&&(V+=`조합: ${C.buy_cond_exp}
`)),((Ye=C.sell_conditions)==null?void 0:Ye.length)>0&&(V+=`매도 조건:
`,V+=C.sell_conditions.map(Q=>`${Q.expr} ${Q.operator} ${Q.value}`).join(`
`)+`
`,C.sell_cond_exp&&(V+=`조합: ${C.sell_cond_exp}
`));const st={id:(Date.now()+Math.random()).toString(),text:V.trim(),sender:"bot",timestamp:new Date};n(Q=>[...Q,st])}else if(Array.isArray(v==null?void 0:v.conditions)&&v.conditions.length>0){let R=`**적용된 조건식:**
${v.conditions.map(st=>`${st.factor} ${st.op} ${st.value}`).join(`
`)}`;const V={id:(Date.now()+Math.random()).toString(),text:R,sender:"bot",timestamp:new Date};n(st=>[...st,V])}else if(Array.isArray(v==null?void 0:v.buy_conditions)&&v.buy_conditions.length>0||Array.isArray(v==null?void 0:v.sell_conditions)&&v.sell_conditions.length>0){let C=`**적용된 조건식:**
`;if(v!=null&&v.order_factor&&(v!=null&&v.order_base)){const V=v.order_base==="DESC"?"내림차순":"오름차순";C+=`매수 우선순위:
`,C+=`${v.order_factor} (${V})
`,console.log(C)}((ws=v.buy_conditions)==null?void 0:ws.length)>0&&(C+=`매수 조건:
`,C+=v.buy_conditions.map(V=>`${V.factor} ${V.op} ${V.value}`).join(`
`)+`
`,v.buy_cond_exp&&(C+=`조합: ${v.buy_cond_exp}
`)),((Ue=v.sell_conditions)==null?void 0:Ue.length)>0&&(C+=`매도 조건:
`,C+=v.sell_conditions.map(V=>`${V.factor} ${V.op} ${V.value}`).join(`
`)+`
`,v.sell_cond_exp&&(C+=`조합: ${v.sell_cond_exp}
`));const R={id:(Date.now()+Math.random()).toString(),text:C.trim(),sender:"bot",timestamp:new Date};n(V=>[...V,R])}}}const x={id:(Date.now()+3).toString(),text:((xs=p.data)==null?void 0:xs.reply)||"처리 완료",sender:"bot",timestamp:new Date};n(v=>[...v,x])}}catch(p){console.error("JSON 파싱 오류:",p)}}}catch(ie){console.error("Streaming 오류:",ie),F.text="스트리밍 처리 중 오류가 발생했습니다.",F.isStreaming=!1,n(we=>[...we])}finally{O.releaseLock()}},N=async(E=r)=>{if(!E.trim())return;const z={id:Date.now().toString(),text:E,sender:"user",timestamp:new Date};n(O=>[...O,z]),o(""),l(!0);try{const{data:{session:O}}=await Ee.auth.getSession(),j=await Ee.functions.invoke("micro-reply",{headers:{Authorization:`Bearer ${O==null?void 0:O.access_token}`},body:{msg:E}});console.log("Category:",j.data.category);const F={id:(Date.now()+1).toString(),text:j.data.reply,sender:"bot",timestamp:new Date};n(U=>[...U,F]);const Z=S(i,E),T=await fetch("https://gwkirrnjlrcwaejjlokn.supabase.co/functions/v1/mcp-0709",{method:"POST",headers:{Authorization:`Bearer ${O==null?void 0:O.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({msg:Z,agent:u==="agent"})});if(T.ok)await _(T,O);else throw new Error("MCP-0709 함수 호출 실패")}catch(O){console.error("Error calling edge function:",O);const j={id:(Date.now()+1).toString(),text:"죄송합니다. 응답을 생성하는 중에 오류가 발생했습니다.",sender:"bot",timestamp:new Date};n(F=>[...F,j])}finally{l(!1)}},k=async()=>{await s(),e({title:"로그아웃 완료",description:"안전하게 로그아웃되었습니다."})},P=()=>{n([Ao]),o(""),l(!1),e({title:"대화 초기화 완료",description:"새로운 대화를 시작할 수 있습니다."})};return f.jsxs("div",{className:"fixed inset-0 flex flex-col bg-background overflow-hidden",children:[f.jsx("header",{className:"flex-none border-b p-4 shadow-sm bg-card",children:f.jsxs("div",{className:"flex justify-between items-center max-w-3xl mx-auto",children:[f.jsx(Ra,{showText:!0}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("span",{className:"text-sm text-muted-foreground hidden md:inline-block",children:t==null?void 0:t.email}),f.jsxs(At,{variant:"outline",size:"sm",onClick:k,children:[f.jsx(_c,{className:"h-4 w-4 mr-2"}),"로그아웃"]})]})]})}),f.jsxs("div",{className:"flex-1 min-h-0 flex flex-col max-w-3xl w-full mx-auto overflow-hidden",children:[f.jsx(Ya,{ref:y,className:"flex-1 px-4",children:f.jsxs("div",{className:"space-y-4 py-4",children:[i.map(E=>f.jsx("div",{className:`flex ${E.sender==="user"?"justify-end":"justify-start"}`,children:E.text.startsWith("**적용된 조건식:**")?f.jsxs(rs,{className:"bg-muted p-4 my-2 w-full max-w-[80%] md:max-w-[70%]",children:[f.jsx("div",{className:"text-sm font-semibold mb-2",children:"적용된 조건식"}),(()=>{const z=E.text.replace(`**적용된 조건식:**
`,"").split(`
`),O=[];let j="",F=[];return z.forEach((Z,T)=>{Z==="매수 조건:"||Z==="매도 조건:"||Z==="매수 우선순위:"?(j&&F.length>0&&O.push(f.jsxs("div",{className:"mb-1",children:[f.jsx("div",{className:"font-medium",children:j}),f.jsx("ul",{className:"list-disc pl-6 text-sm",children:F.map((U,B)=>f.jsx("li",{children:U},B))})]},j+T)),j=Z,F=[]):Z.trim()!==""&&F.push(Z)}),j&&F.length>0&&O.push(f.jsxs("div",{className:"mb-1",children:[f.jsx("div",{className:"font-medium",children:j}),f.jsx("ul",{className:"list-disc pl-6 text-sm",children:F.map((Z,T)=>f.jsx("li",{children:Z},T))})]},j+"last")),O.length===0?f.jsx("ul",{className:"list-disc pl-5 text-sm",children:z.map((Z,T)=>f.jsx("li",{children:Z},T))}):O})(),f.jsx("div",{className:"text-xs mt-1 text-muted-foreground",children:E.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]}):E.text.startsWith("**백테스트 주요 지표**")?f.jsxs(rs,{className:"bg-muted p-4 my-2 w-full max-w-[80%] md:max-w-[70%]",children:[f.jsx("div",{className:"text-sm font-semibold mb-2",children:"백테스트 주요 지표"}),f.jsx("ul",{className:"list-disc pl-5 text-sm",children:E.text.replace(`**백테스트 주요 지표**
`,"").split(`
`).map((z,O)=>f.jsx("li",{children:z.replace(/^• /,"")},O))}),f.jsx("div",{className:"text-xs mt-1 text-muted-foreground",children:E.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]}):f.jsxs("div",{className:`max-w-[80%] md:max-w-[70%] rounded-lg p-3 ${E.sender==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[f.jsxs("div",{className:"whitespace-pre-line min-w-64",children:[E.text!=="주가 차트"&&f.jsx("div",{className:"text-sm font-medium mt-2",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{children:E.text}),E.isStreaming&&f.jsx("div",{className:"animate-spin",children:f.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})]})}),E.stockInfo&&f.jsxs("div",{className:"text-sm font-medium mt-2",children:[E.stockInfo.name,f.jsx("br",{}),"(",E.stockInfo.code,")"]})]}),(E.text==="주가 차트"||E.text==="백테스트")&&E.stockInfo&&f.jsx("div",{className:"mt-4 space-y-4",children:E.text==="주가 차트"?f.jsx(At,{className:"w-full bg-black hover:bg-black/90 text-white border-black",size:"sm",onClick:()=>alert("주문 화면으로 이동합니다."),children:"주문 연동"}):f.jsxs("div",{className:"flex gap-2",children:[f.jsx(At,{className:"flex-1 bg-black hover:bg-black/90 text-white border-black",size:"sm",onClick:()=>alert("전략 연동 화면으로 이동합니다."),children:"전략 연동"}),f.jsx(At,{className:"flex-1 bg-black hover:bg-black/90 text-white border-black",size:"sm",onClick:()=>alert("전략이 저장되었습니다."),children:"저장"})]})}),E.text==="백테스트 결과"&&E.backtestData&&f.jsx(Bm,{data:E.backtestData,buyConditions:E.backtestData.buyConditions,sellConditions:E.backtestData.sellConditions,buyCondExp:E.backtestData.buyCondExp,sellCondExp:E.backtestData.sellCondExp}),f.jsx("div",{className:`text-xs mt-1 ${E.sender==="user"?"text-primary-foreground/70":"text-muted-foreground"}`,children:E.timestamp.toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit"})})]})},E.id)),a&&f.jsx("div",{className:"flex justify-start",children:f.jsx("div",{className:"bg-muted rounded-lg p-3",children:f.jsxs("div",{className:"flex space-x-1",children:[f.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),f.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce delay-75"}),f.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce delay-150"})]})})}),f.jsx("div",{ref:g})]})}),f.jsx("div",{className:"px-4 py-2",children:f.jsx(rs,{className:"p-3",children:f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"추천 질문"}),f.jsx(At,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 bg-black text-white ",onClick:()=>h(!c),children:c?f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"6 9 12 15 18 9"})}):f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:f.jsx("polyline",{points:"18 15 12 9 6 15"})})})]}),f.jsx("div",{className:`space-y-2 transition-all duration-200 ${c?"block":"hidden"}`,children:f.jsx("div",{className:"flex flex-wrap gap-2",children:Wm.map((E,z)=>f.jsx(At,{variant:"outline",size:"sm",className:"text-xs",onClick:()=>N(E),children:E},z))})})]})})}),f.jsxs("div",{className:"flex-none border-t bg-background px-4 py-4",style:{marginBottom:`env(keyboard-inset-height, ${w}px)`},children:[f.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[f.jsx(Cd,{value:u,onValueChange:E=>m(E),className:"w-auto",children:f.jsxs(gl,{className:"bg-[#ddd]",children:[f.jsx(Cn,{value:"agent",className:"data-[state=inactive]:bg-[#ddd] data-[state=active]:bg-white data-[state=active]:text-black",children:"Agent 모드"}),f.jsx(Cn,{value:"general",className:"data-[state=inactive]:bg-[#ddd] data-[state=active]:bg-white data-[state=active]:text-black",children:"빠른 질문 모드"})]})}),f.jsx(At,{variant:"outline",size:"sm",onClick:P,className:"text-xs",children:"대화초기화"})]}),f.jsxs("form",{onSubmit:E=>{E.preventDefault(),N()},className:"flex gap-2",children:[f.jsx(ri,{value:r,onChange:E=>o(E.target.value),placeholder:`${u==="general"?"질문":"Agent"} 모드로 메시지를 입력하세요...`,className:"flex-1"}),f.jsx(At,{type:"submit",disabled:!r.trim()||a,children:f.jsx(Sc,{className:"h-4 w-4"})})]})]})]})]})}function Um({children:s,restricted:t=!1}){const{user:e,isLoading:i}=bi();return i?f.jsx("div",{className:"flex items-center justify-center h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):t&&e?f.jsx(Vs,{to:"/chat",replace:!0}):f.jsx(f.Fragment,{children:s})}function Zm({children:s}){const{user:t,isLoading:e}=bi(),i=pc();return e?f.jsx("div",{className:"flex items-center justify-center h-screen",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):t?f.jsx(f.Fragment,{children:s}):f.jsx(Vs,{to:"/login",state:{from:i},replace:!0})}const Xm=gc([{path:"/",element:f.jsx(Vs,{to:"/chat",replace:!0})},{path:"/login",element:f.jsx(Um,{restricted:!0,children:f.jsx(Su,{})})},{path:"/chat",element:f.jsx(Zm,{children:f.jsx(Ym,{})})},{path:"*",element:f.jsx(Vs,{to:"/chat",replace:!0})}]);function Qm(s,t){if(s==null)return{};var e={},i=Object.keys(s),n,r;for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&(e[n]=s[n]);return e}var Gm=["color"],Hm=d.forwardRef(function(s,t){var e=s.color,i=e===void 0?"currentColor":e,n=Qm(s,Gm);return d.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:t}),d.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:i,fillRule:"evenodd",clipRule:"evenodd"}))});function Km(s,t=[]){let e=[];function i(r,o){const a=d.createContext(o),l=e.length;e=[...e,o];function c(u){const{scope:m,children:g,...y}=u,w=(m==null?void 0:m[s][l])||a,b=d.useMemo(()=>y,Object.values(y));return f.jsx(w.Provider,{value:b,children:g})}function h(u,m){const g=(m==null?void 0:m[s][l])||a,y=d.useContext(g);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${u}\` must be used within \`${r}\``)}return c.displayName=r+"Provider",[c,h]}const n=()=>{const r=e.map(o=>d.createContext(o));return function(a){const l=(a==null?void 0:a[s])||r;return d.useMemo(()=>({[`__scope${s}`]:{...a,[s]:l}}),[a,l])}};return n.scopeName=s,[i,Jm(n,...t)]}function Jm(...s){const t=s[0];if(s.length===1)return t;const e=()=>{const i=s.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(r){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const u=l(r)[`__scope${c}`];return{...a,...u}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return e.scopeName=t.scopeName,e}function qm(s){const t=s+"CollectionProvider",[e,i]=Km(t),[n,r]=e(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:w}=g,b=K.useRef(null),S=K.useRef(new Map).current;return f.jsx(n,{scope:y,itemMap:S,collectionRef:b,children:w})};o.displayName=t;const a=s+"CollectionSlot",l=K.forwardRef((g,y)=>{const{scope:w,children:b}=g,S=r(a,w),_=Ot(y,S.collectionRef);return f.jsx(Oe,{ref:_,children:b})});l.displayName=a;const c=s+"CollectionItemSlot",h="data-radix-collection-item",u=K.forwardRef((g,y)=>{const{scope:w,children:b,...S}=g,_=K.useRef(null),N=Ot(y,_),k=r(c,w);return K.useEffect(()=>(k.itemMap.set(_,{ref:_,...S}),()=>void k.itemMap.delete(_))),f.jsx(Oe,{[h]:"",ref:N,children:b})});u.displayName=c;function m(g){const y=r(s+"CollectionConsumer",g);return K.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const S=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(y.itemMap.values()).sort((k,P)=>S.indexOf(k.ref.current)-S.indexOf(P.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:l,ItemSlot:u},m,i]}function tp(s,t=globalThis==null?void 0:globalThis.document){const e=_t(s);d.useEffect(()=>{const i=n=>{n.key==="Escape"&&e(n)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[e,t])}var ep="DismissableLayer",An="dismissableLayer.update",sp="dismissableLayer.pointerDownOutside",ip="dismissableLayer.focusOutside",Po,Ll=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jl=d.forwardRef((s,t)=>{const{disableOutsidePointerEvents:e=!1,onEscapeKeyDown:i,onPointerDownOutside:n,onFocusOutside:r,onInteractOutside:o,onDismiss:a,...l}=s,c=d.useContext(Ll),[h,u]=d.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=d.useState({}),y=Ot(t,z=>u(z)),w=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=w.indexOf(b),_=h?w.indexOf(h):-1,N=c.layersWithOutsidePointerEventsDisabled.size>0,k=_>=S,P=rp(z=>{const O=z.target,j=[...c.branches].some(F=>F.contains(O));!k||j||(n==null||n(z),o==null||o(z),z.defaultPrevented||a==null||a())},m),E=op(z=>{const O=z.target;[...c.branches].some(F=>F.contains(O))||(r==null||r(z),o==null||o(z),z.defaultPrevented||a==null||a())},m);return tp(z=>{_===c.layers.size-1&&(i==null||i(z),!z.defaultPrevented&&a&&(z.preventDefault(),a()))},m),d.useEffect(()=>{if(h)return e&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(Po=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(h)),c.layers.add(h),Oo(),()=>{e&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=Po)}},[h,m,e,c]),d.useEffect(()=>()=>{h&&(c.layers.delete(h),c.layersWithOutsidePointerEventsDisabled.delete(h),Oo())},[h,c]),d.useEffect(()=>{const z=()=>g({});return document.addEventListener(An,z),()=>document.removeEventListener(An,z)},[]),f.jsx(St.div,{...l,ref:y,style:{pointerEvents:N?k?"auto":"none":void 0,...s.style},onFocusCapture:mt(s.onFocusCapture,E.onFocusCapture),onBlurCapture:mt(s.onBlurCapture,E.onBlurCapture),onPointerDownCapture:mt(s.onPointerDownCapture,P.onPointerDownCapture)})});jl.displayName=ep;var np="DismissableLayerBranch",Vl=d.forwardRef((s,t)=>{const e=d.useContext(Ll),i=d.useRef(null),n=Ot(t,i);return d.useEffect(()=>{const r=i.current;if(r)return e.branches.add(r),()=>{e.branches.delete(r)}},[e.branches]),f.jsx(St.div,{...s,ref:n})});Vl.displayName=np;function rp(s,t=globalThis==null?void 0:globalThis.document){const e=_t(s),i=d.useRef(!1),n=d.useRef(()=>{});return d.useEffect(()=>{const r=a=>{if(a.target&&!i.current){let l=function(){zl(sp,e,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",n.current),n.current=l,t.addEventListener("click",n.current,{once:!0})):l()}else t.removeEventListener("click",n.current);i.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",r),t.removeEventListener("click",n.current)}},[t,e]),{onPointerDownCapture:()=>i.current=!0}}function op(s,t=globalThis==null?void 0:globalThis.document){const e=_t(s),i=d.useRef(!1);return d.useEffect(()=>{const n=r=>{r.target&&!i.current&&zl(ip,e,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",n),()=>t.removeEventListener("focusin",n)},[t,e]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Oo(){const s=new CustomEvent(An);document.dispatchEvent(s)}function zl(s,t,e,{discrete:i}){const n=e.originalEvent.target,r=new CustomEvent(s,{bubbles:!1,cancelable:!0,detail:e});t&&n.addEventListener(s,t,{once:!0}),i?_a(n,r):n.dispatchEvent(r)}var ap=jl,lp=Vl,cp="Portal",Fl=d.forwardRef((s,t)=>{var a;const{container:e,...i}=s,[n,r]=d.useState(!1);ms(()=>r(!0),[]);const o=e||n&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?vc.createPortal(f.jsx(St.div,{...i,ref:t}),o):null});Fl.displayName=cp;function hp({prop:s,defaultProp:t,onChange:e=()=>{}}){const[i,n]=up({defaultProp:t,onChange:e}),r=s!==void 0,o=r?s:i,a=_t(e),l=d.useCallback(c=>{if(r){const u=typeof c=="function"?c(s):c;u!==s&&a(u)}else n(c)},[r,s,n,a]);return[o,l]}function up({defaultProp:s,onChange:t}){const e=d.useState(s),[i]=e,n=d.useRef(i),r=_t(t);return d.useEffect(()=>{n.current!==i&&(r(i),n.current=i)},[i,n,r]),e}var dp="VisuallyHidden",ir=d.forwardRef((s,t)=>f.jsx(St.span,{...s,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...s.style}}));ir.displayName=dp;var nr="ToastProvider",[rr,fp,mp]=qm("Toast"),[$l,Fp]=Ma("Toast",[mp]),[pp,Ri]=$l(nr),Bl=s=>{const{__scopeToast:t,label:e="Notification",duration:i=5e3,swipeDirection:n="right",swipeThreshold:r=50,children:o}=s,[a,l]=d.useState(null),[c,h]=d.useState(0),u=d.useRef(!1),m=d.useRef(!1);return e.trim()||console.error(`Invalid prop \`label\` supplied to \`${nr}\`. Expected non-empty \`string\`.`),f.jsx(rr.Provider,{scope:t,children:f.jsx(pp,{scope:t,label:e,duration:i,swipeDirection:n,swipeThreshold:r,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:d.useCallback(()=>h(g=>g+1),[]),onToastRemove:d.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:o})})};Bl.displayName=nr;var Wl="ToastViewport",gp=["F8"],Pn="toast.viewportPause",On="toast.viewportResume",Yl=d.forwardRef((s,t)=>{const{__scopeToast:e,hotkey:i=gp,label:n="Notifications ({hotkey})",...r}=s,o=Ri(Wl,e),a=fp(e),l=d.useRef(null),c=d.useRef(null),h=d.useRef(null),u=d.useRef(null),m=Ot(t,u,o.onViewportChange),g=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;d.useEffect(()=>{const b=S=>{var N;i.length!==0&&i.every(k=>S[k]||S.code===k)&&((N=u.current)==null||N.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[i]),d.useEffect(()=>{const b=l.current,S=u.current;if(y&&b&&S){const _=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(Pn);S.dispatchEvent(E),o.isClosePausedRef.current=!0}},N=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(On);S.dispatchEvent(E),o.isClosePausedRef.current=!1}},k=E=>{!b.contains(E.relatedTarget)&&N()},P=()=>{b.contains(document.activeElement)||N()};return b.addEventListener("focusin",_),b.addEventListener("focusout",k),b.addEventListener("pointermove",_),b.addEventListener("pointerleave",P),window.addEventListener("blur",_),window.addEventListener("focus",N),()=>{b.removeEventListener("focusin",_),b.removeEventListener("focusout",k),b.removeEventListener("pointermove",_),b.removeEventListener("pointerleave",P),window.removeEventListener("blur",_),window.removeEventListener("focus",N)}}},[y,o.isClosePausedRef]);const w=d.useCallback(({tabbingDirection:b})=>{const _=a().map(N=>{const k=N.ref.current,P=[k,...Rp(k)];return b==="forwards"?P:P.reverse()});return(b==="forwards"?_.reverse():_).flat()},[a]);return d.useEffect(()=>{const b=u.current;if(b){const S=_=>{var P,E,z;const N=_.altKey||_.ctrlKey||_.metaKey;if(_.key==="Tab"&&!N){const O=document.activeElement,j=_.shiftKey;if(_.target===b&&j){(P=c.current)==null||P.focus();return}const T=w({tabbingDirection:j?"backwards":"forwards"}),U=T.findIndex(B=>B===O);on(T.slice(U+1))?_.preventDefault():j?(E=c.current)==null||E.focus():(z=h.current)==null||z.focus()}};return b.addEventListener("keydown",S),()=>b.removeEventListener("keydown",S)}},[a,w]),f.jsxs(lp,{ref:l,role:"region","aria-label":n.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&f.jsx(In,{ref:c,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"forwards"});on(b)}}),f.jsx(rr.Slot,{scope:e,children:f.jsx(St.ol,{tabIndex:-1,...r,ref:m})}),y&&f.jsx(In,{ref:h,onFocusFromOutsideViewport:()=>{const b=w({tabbingDirection:"backwards"});on(b)}})]})});Yl.displayName=Wl;var Ul="ToastFocusProxy",In=d.forwardRef((s,t)=>{const{__scopeToast:e,onFocusFromOutsideViewport:i,...n}=s,r=Ri(Ul,e);return f.jsx(ir,{"aria-hidden":!0,tabIndex:0,...n,ref:t,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=r.viewport)!=null&&c.contains(a))&&i()}})});In.displayName=Ul;var Mi="Toast",vp="toast.swipeStart",yp="toast.swipeMove",bp="toast.swipeCancel",wp="toast.swipeEnd",Zl=d.forwardRef((s,t)=>{const{forceMount:e,open:i,defaultOpen:n,onOpenChange:r,...o}=s,[a=!0,l]=hp({prop:i,defaultProp:n,onChange:r});return f.jsx(Fe,{present:e||a,children:f.jsx(Sp,{open:a,...o,ref:t,onClose:()=>l(!1),onPause:_t(s.onPause),onResume:_t(s.onResume),onSwipeStart:mt(s.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:mt(s.onSwipeMove,c=>{const{x:h,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:mt(s.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:mt(s.onSwipeEnd,c=>{const{x:h,y:u}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),l(!1)})})})});Zl.displayName=Mi;var[xp,_p]=$l(Mi,{onClose(){}}),Sp=d.forwardRef((s,t)=>{const{__scopeToast:e,type:i="foreground",duration:n,open:r,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:h,onSwipeMove:u,onSwipeCancel:m,onSwipeEnd:g,...y}=s,w=Ri(Mi,e),[b,S]=d.useState(null),_=Ot(t,B=>S(B)),N=d.useRef(null),k=d.useRef(null),P=n||w.duration,E=d.useRef(0),z=d.useRef(P),O=d.useRef(0),{onToastAdd:j,onToastRemove:F}=w,Z=_t(()=>{var H;(b==null?void 0:b.contains(document.activeElement))&&((H=w.viewport)==null||H.focus()),o()}),T=d.useCallback(B=>{!B||B===1/0||(window.clearTimeout(O.current),E.current=new Date().getTime(),O.current=window.setTimeout(Z,B))},[Z]);d.useEffect(()=>{const B=w.viewport;if(B){const H=()=>{T(z.current),c==null||c()},tt=()=>{const nt=new Date().getTime()-E.current;z.current=z.current-nt,window.clearTimeout(O.current),l==null||l()};return B.addEventListener(Pn,tt),B.addEventListener(On,H),()=>{B.removeEventListener(Pn,tt),B.removeEventListener(On,H)}}},[w.viewport,P,l,c,T]),d.useEffect(()=>{r&&!w.isClosePausedRef.current&&T(P)},[r,P,w.isClosePausedRef,T]),d.useEffect(()=>(j(),()=>F()),[j,F]);const U=d.useMemo(()=>b?ql(b):null,[b]);return w.viewport?f.jsxs(f.Fragment,{children:[U&&f.jsx(Cp,{__scopeToast:e,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),f.jsx(xp,{scope:e,onClose:Z,children:Dn.createPortal(f.jsx(rr.ItemSlot,{scope:e,children:f.jsx(ap,{asChild:!0,onEscapeKeyDown:mt(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||Z(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(St.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":r?"open":"closed","data-swipe-direction":w.swipeDirection,...y,ref:_,style:{userSelect:"none",touchAction:"none",...s.style},onKeyDown:mt(s.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,Z()))}),onPointerDown:mt(s.onPointerDown,B=>{B.button===0&&(N.current={x:B.clientX,y:B.clientY})}),onPointerMove:mt(s.onPointerMove,B=>{if(!N.current)return;const H=B.clientX-N.current.x,tt=B.clientY-N.current.y,nt=!!k.current,ht=["left","right"].includes(w.swipeDirection),ct=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,vt=ht?ct(0,H):0,yt=ht?0:ct(0,tt),Wt=B.pointerType==="touch"?10:2,Yt={x:vt,y:yt},se={originalEvent:B,delta:Yt};nt?(k.current=Yt,Os(yp,u,se,{discrete:!1})):Io(Yt,w.swipeDirection,Wt)?(k.current=Yt,Os(vp,h,se,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(H)>Wt||Math.abs(tt)>Wt)&&(N.current=null)}),onPointerUp:mt(s.onPointerUp,B=>{const H=k.current,tt=B.target;if(tt.hasPointerCapture(B.pointerId)&&tt.releasePointerCapture(B.pointerId),k.current=null,N.current=null,H){const nt=B.currentTarget,ht={originalEvent:B,delta:H};Io(H,w.swipeDirection,w.swipeThreshold)?Os(wp,g,ht,{discrete:!0}):Os(bp,m,ht,{discrete:!0}),nt.addEventListener("click",ct=>ct.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),Cp=s=>{const{__scopeToast:t,children:e,...i}=s,n=Ri(Mi,t),[r,o]=d.useState(!1),[a,l]=d.useState(!1);return Tp(()=>o(!0)),d.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:f.jsx(Fl,{asChild:!0,children:f.jsx(ir,{...i,children:r&&f.jsxs(f.Fragment,{children:[n.label," ",e]})})})},Ep="ToastTitle",Xl=d.forwardRef((s,t)=>{const{__scopeToast:e,...i}=s;return f.jsx(St.div,{...i,ref:t})});Xl.displayName=Ep;var kp="ToastDescription",Ql=d.forwardRef((s,t)=>{const{__scopeToast:e,...i}=s;return f.jsx(St.div,{...i,ref:t})});Ql.displayName=kp;var Gl="ToastAction",Hl=d.forwardRef((s,t)=>{const{altText:e,...i}=s;return e.trim()?f.jsx(Jl,{altText:e,asChild:!0,children:f.jsx(or,{...i,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Gl}\`. Expected non-empty \`string\`.`),null)});Hl.displayName=Gl;var Kl="ToastClose",or=d.forwardRef((s,t)=>{const{__scopeToast:e,...i}=s,n=_p(Kl,e);return f.jsx(Jl,{asChild:!0,children:f.jsx(St.button,{type:"button",...i,ref:t,onClick:mt(s.onClick,n.onClose)})})});or.displayName=Kl;var Jl=d.forwardRef((s,t)=>{const{__scopeToast:e,altText:i,...n}=s;return f.jsx(St.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...n,ref:t})});function ql(s){const t=[];return Array.from(s.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&t.push(i.textContent),Np(i)){const n=i.ariaHidden||i.hidden||i.style.display==="none",r=i.dataset.radixToastAnnounceExclude==="";if(!n)if(r){const o=i.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...ql(i))}}),t}function Os(s,t,e,{discrete:i}){const n=e.originalEvent.currentTarget,r=new CustomEvent(s,{bubbles:!0,cancelable:!0,detail:e});t&&n.addEventListener(s,t,{once:!0}),i?_a(n,r):n.dispatchEvent(r)}var Io=(s,t,e=0)=>{const i=Math.abs(s.x),n=Math.abs(s.y),r=i>n;return t==="left"||t==="right"?r&&i>e:!r&&n>e};function Tp(s=()=>{}){const t=_t(s);ms(()=>{let e=0,i=0;return e=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(i)}},[t])}function Np(s){return s.nodeType===s.ELEMENT_NODE}function Rp(s){const t=[],e=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const n=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||n?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;e.nextNode();)t.push(e.currentNode);return t}function on(s){const t=document.activeElement;return s.some(e=>e===t?!0:(e.focus(),document.activeElement!==t))}var Mp=Bl,tc=Yl,ec=Zl,sc=Xl,ic=Ql,nc=Hl,rc=or;const Ap=Mp,oc=d.forwardRef(({className:s,...t},e)=>f.jsx(tc,{ref:e,className:lt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));oc.displayName=tc.displayName;const Pp=Wn("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ac=d.forwardRef(({className:s,variant:t,...e},i)=>f.jsx(ec,{ref:i,className:lt(Pp({variant:t}),s),...e}));ac.displayName=ec.displayName;const Op=d.forwardRef(({className:s,...t},e)=>f.jsx(nc,{ref:e,className:lt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));Op.displayName=nc.displayName;const lc=d.forwardRef(({className:s,...t},e)=>f.jsx(rc,{ref:e,className:lt("absolute right-1 top-1 rounded-md p-1 text-white opacity-0 transition-opacity hover:text-white focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:f.jsx(Hm,{className:"h-4 w-4"})}));lc.displayName=rc.displayName;const cc=d.forwardRef(({className:s,...t},e)=>f.jsx(sc,{ref:e,className:lt("text-sm font-semibold [&+div]:text-xs",s),...t}));cc.displayName=sc.displayName;const hc=d.forwardRef(({className:s,...t},e)=>f.jsx(ic,{ref:e,className:lt("text-sm opacity-90",s),...t}));hc.displayName=ic.displayName;function Ip(){const{toasts:s}=Un();return f.jsxs(Ap,{children:[s.map(function({id:t,title:e,description:i,action:n,...r}){return f.jsxs(ac,{...r,children:[f.jsxs("div",{className:"grid gap-1",children:[e&&f.jsx(cc,{children:e}),i&&f.jsx(hc,{children:i})]}),n,f.jsx(lc,{})]},t)}),f.jsx(oc,{})]})}function Dp(){return f.jsx(Ac,{attribute:"class",defaultTheme:"light",children:f.jsxs(gu,{children:[f.jsx(yc,{router:Xm}),f.jsx(Ip,{})]})})}zo(document.getElementById("root")).render(f.jsx(d.StrictMode,{children:f.jsx(Dp,{})}));
